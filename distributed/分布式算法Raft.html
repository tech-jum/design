<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ц╖▒хЕехЙЦцЮРхЕ▒шпЖцАзчоЧц│Х Raft | DESIGN</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/design/favicon.ico">
    <meta name="description" content="DESIGN">
    
    <link rel="preload" href="/design/assets/css/0.styles.3c2ef156.css" as="style"><link rel="preload" href="/design/assets/js/app.31535b90.js" as="script"><link rel="preload" href="/design/assets/js/4.843d76c1.js" as="script"><link rel="preload" href="/design/assets/js/31.e6497a3e.js" as="script"><link rel="preload" href="/design/assets/js/5.eb6f8f38.js" as="script"><link rel="prefetch" href="/design/assets/js/10.07f2584d.js"><link rel="prefetch" href="/design/assets/js/11.df166aa0.js"><link rel="prefetch" href="/design/assets/js/12.b7ade635.js"><link rel="prefetch" href="/design/assets/js/13.151414b4.js"><link rel="prefetch" href="/design/assets/js/14.5dd04c5d.js"><link rel="prefetch" href="/design/assets/js/15.14e9a635.js"><link rel="prefetch" href="/design/assets/js/16.8728dd67.js"><link rel="prefetch" href="/design/assets/js/17.1686b754.js"><link rel="prefetch" href="/design/assets/js/18.d815545e.js"><link rel="prefetch" href="/design/assets/js/19.d846ce2f.js"><link rel="prefetch" href="/design/assets/js/20.1dd8edb9.js"><link rel="prefetch" href="/design/assets/js/21.38ae8c29.js"><link rel="prefetch" href="/design/assets/js/22.26dcb0f5.js"><link rel="prefetch" href="/design/assets/js/23.d996c1df.js"><link rel="prefetch" href="/design/assets/js/24.84573b57.js"><link rel="prefetch" href="/design/assets/js/25.362291b4.js"><link rel="prefetch" href="/design/assets/js/26.287f6746.js"><link rel="prefetch" href="/design/assets/js/27.665cd644.js"><link rel="prefetch" href="/design/assets/js/28.2d373aaa.js"><link rel="prefetch" href="/design/assets/js/29.18195cfe.js"><link rel="prefetch" href="/design/assets/js/30.b8a39bf2.js"><link rel="prefetch" href="/design/assets/js/32.7c78886f.js"><link rel="prefetch" href="/design/assets/js/33.3a07575c.js"><link rel="prefetch" href="/design/assets/js/34.53801173.js"><link rel="prefetch" href="/design/assets/js/35.fe943393.js"><link rel="prefetch" href="/design/assets/js/36.e9ecc031.js"><link rel="prefetch" href="/design/assets/js/37.48dcf161.js"><link rel="prefetch" href="/design/assets/js/38.bc65c12c.js"><link rel="prefetch" href="/design/assets/js/39.76a7947c.js"><link rel="prefetch" href="/design/assets/js/40.57c60fe7.js"><link rel="prefetch" href="/design/assets/js/41.64d1acff.js"><link rel="prefetch" href="/design/assets/js/42.2b13267e.js"><link rel="prefetch" href="/design/assets/js/43.bc12e4a9.js"><link rel="prefetch" href="/design/assets/js/44.05348389.js"><link rel="prefetch" href="/design/assets/js/45.a821f14b.js"><link rel="prefetch" href="/design/assets/js/46.4f6121ee.js"><link rel="prefetch" href="/design/assets/js/47.2331491d.js"><link rel="prefetch" href="/design/assets/js/48.e99e2990.js"><link rel="prefetch" href="/design/assets/js/49.97ac4425.js"><link rel="prefetch" href="/design/assets/js/50.9561222b.js"><link rel="prefetch" href="/design/assets/js/51.5a3682fc.js"><link rel="prefetch" href="/design/assets/js/52.41f6da09.js"><link rel="prefetch" href="/design/assets/js/53.f3cbdb44.js"><link rel="prefetch" href="/design/assets/js/54.b64ed791.js"><link rel="prefetch" href="/design/assets/js/55.0b2515c6.js"><link rel="prefetch" href="/design/assets/js/56.f87ff124.js"><link rel="prefetch" href="/design/assets/js/57.c351d3a3.js"><link rel="prefetch" href="/design/assets/js/58.68c1d0ee.js"><link rel="prefetch" href="/design/assets/js/59.8cc7450d.js"><link rel="prefetch" href="/design/assets/js/6.cbcf7f30.js"><link rel="prefetch" href="/design/assets/js/60.f2f8871f.js"><link rel="prefetch" href="/design/assets/js/61.8922cbcd.js"><link rel="prefetch" href="/design/assets/js/62.ccb7c5ee.js"><link rel="prefetch" href="/design/assets/js/63.8191a330.js"><link rel="prefetch" href="/design/assets/js/64.1d881bbb.js"><link rel="prefetch" href="/design/assets/js/65.f4089278.js"><link rel="prefetch" href="/design/assets/js/66.66cf1b40.js"><link rel="prefetch" href="/design/assets/js/67.27e2cf6f.js"><link rel="prefetch" href="/design/assets/js/68.6a688bec.js"><link rel="prefetch" href="/design/assets/js/69.f59b5cd7.js"><link rel="prefetch" href="/design/assets/js/7.159ffade.js"><link rel="prefetch" href="/design/assets/js/70.aa52fe1c.js"><link rel="prefetch" href="/design/assets/js/71.f7f17e5c.js"><link rel="prefetch" href="/design/assets/js/72.f0a76070.js"><link rel="prefetch" href="/design/assets/js/73.b454f9b3.js"><link rel="prefetch" href="/design/assets/js/74.748903ca.js"><link rel="prefetch" href="/design/assets/js/75.1abb30fc.js"><link rel="prefetch" href="/design/assets/js/76.38081e86.js"><link rel="prefetch" href="/design/assets/js/77.631fd31e.js"><link rel="prefetch" href="/design/assets/js/78.b642c4ea.js"><link rel="prefetch" href="/design/assets/js/79.09f8c9ad.js"><link rel="prefetch" href="/design/assets/js/8.bbc07c86.js"><link rel="prefetch" href="/design/assets/js/80.15162b19.js"><link rel="prefetch" href="/design/assets/js/81.0a02424d.js"><link rel="prefetch" href="/design/assets/js/82.0a6de1bd.js"><link rel="prefetch" href="/design/assets/js/83.8bd118c7.js"><link rel="prefetch" href="/design/assets/js/84.c9db97ea.js"><link rel="prefetch" href="/design/assets/js/85.ea23932a.js"><link rel="prefetch" href="/design/assets/js/86.a70e5ac7.js"><link rel="prefetch" href="/design/assets/js/9.c3d97cd4.js"><link rel="prefetch" href="/design/assets/js/vendors~flowchart.5fa23d41.js"><link rel="prefetch" href="/design/assets/js/vendors~notification.4b668bb8.js">
    <link rel="stylesheet" href="/design/assets/css/0.styles.3c2ef156.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/design/" class="home-link router-link-active"><img src="https://raw.githubusercontent.com/dunwu/images/dev/common/dunwu-logo-200.png" alt="DESIGN" class="logo"> <span class="site-name can-hide">DESIGN</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/design/architecture/" class="nav-link">
  цЮ╢цЮД
</a></div><div class="nav-item"><a href="/design/distributed/" class="nav-link router-link-active">
  хИЖх╕Гх╝П
</a></div><div class="nav-item"><a href="/design/pattern/" class="nav-link">
  шо╛шобцибх╝П
</a></div><div class="nav-item"><a href="/design/refactor/" class="nav-link">
  щЗНцЮД
</a></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ЁЯОп хНЪхов
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/dunwu/design" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/design/architecture/" class="nav-link">
  цЮ╢цЮД
</a></div><div class="nav-item"><a href="/design/distributed/" class="nav-link router-link-active">
  хИЖх╕Гх╝П
</a></div><div class="nav-item"><a href="/design/pattern/" class="nav-link">
  шо╛шобцибх╝П
</a></div><div class="nav-item"><a href="/design/refactor/" class="nav-link">
  щЗНцЮД
</a></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ЁЯОп хНЪхов
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/dunwu/design" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ц╖▒хЕехЙЦцЮРхЕ▒шпЖцАзчоЧц│Х Raft</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#ф╕АуАБraft-чоАф╗Л" class="sidebar-link">ф╕АуАБRaft чоАф╗Л</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#хИЖх╕Гх╝Пф╕АшЗ┤цАз" class="sidebar-link">хИЖх╕Гх╝Пф╕АшЗ┤цАз</a></li><li class="sidebar-sub-header"><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#хдНхИ╢чК╢цАБцЬ║" class="sidebar-link">хдНхИ╢чК╢цАБцЬ║</a></li><li class="sidebar-sub-header"><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#raft-х║ФчФи" class="sidebar-link">RAFT х║ФчФи</a></li></ul></li><li><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#ф║МуАБraft-хЯ║чбА" class="sidebar-link">ф║МуАБRaft хЯ║чбА</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#цЬНхКбхЩишзТшЙ▓" class="sidebar-link">цЬНхКбхЩишзТшЙ▓</a></li><li class="sidebar-sub-header"><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#ф╗╗цЬЯ" class="sidebar-link">ф╗╗цЬЯ</a></li><li class="sidebar-sub-header"><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#rpc" class="sidebar-link">RPC</a></li></ul></li><li><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#ф╕ЙуАБщАЙф╕╛-leader" class="sidebar-link">ф╕ЙуАБщАЙф╕╛ Leader</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#щАЙф╕╛шзДхИЩ" class="sidebar-link">щАЙф╕╛шзДхИЩ</a></li><li class="sidebar-sub-header"><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#хНХ-candidate-щАЙф╕╛" class="sidebar-link">хНХ Candidate щАЙф╕╛</a></li><li class="sidebar-sub-header"><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#хдЪ-candidate-щАЙф╕╛" class="sidebar-link">хдЪ Candidate щАЙф╕╛</a></li></ul></li><li><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#хЫЫуАБцЧех┐ЧхдНхИ╢" class="sidebar-link">хЫЫуАБцЧех┐ЧхдНхИ╢</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#цЧех┐Чца╝х╝П" class="sidebar-link">цЧех┐Чца╝х╝П</a></li><li class="sidebar-sub-header"><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#цЧех┐ЧхдНхИ╢ц╡БчиЛ" class="sidebar-link">цЧех┐ЧхдНхИ╢ц╡БчиЛ</a></li><li class="sidebar-sub-header"><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#цЧех┐Чф╕АшЗ┤цАз" class="sidebar-link">цЧех┐Чф╕АшЗ┤цАз</a></li></ul></li><li><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#ф║ФуАБхоЙхЕицАз" class="sidebar-link">ф║ФуАБхоЙхЕицАз</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#щАЙф╕╛щЩРхИ╢" class="sidebar-link">щАЙф╕╛щЩРхИ╢</a></li><li class="sidebar-sub-header"><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#цПРф║дцЧзф╗╗цЬЯчЪДцЧех┐ЧцЭбчЫо" class="sidebar-link">цПРф║дцЧзф╗╗цЬЯчЪДцЧех┐ЧцЭбчЫо</a></li></ul></li><li><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#хЕнуАБцЧех┐ЧхОЛч╝й" class="sidebar-link">хЕнуАБцЧех┐ЧхОЛч╝й</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/design/distributed/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95Raft.html#хПВшАГш╡ДцЦЩ" class="sidebar-link">хПВшАГш╡ДцЦЩ</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ц╖▒хЕехЙЦцЮРхЕ▒шпЖцАзчоЧц│Х-raft"><a href="#ц╖▒хЕехЙЦцЮРхЕ▒шпЖцАзчоЧц│Х-raft" class="header-anchor">#</a> ц╖▒хЕехЙЦцЮРхЕ▒шпЖцАзчоЧц│Х Raft</h1> <blockquote><p>ЁЯУж цЬмцЦЗх╖▓х╜ТцбгхИ░я╝ЪуАМ<a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer">blog<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>уАН</p></blockquote> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200201221202.png" alt="img"></p> <ul><li><a href="#%E4%B8%80raft-%E7%AE%80%E4%BB%8B">ф╕АуАБRaft чоАф╗Л</a> <ul><li><a href="#%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%80%E8%87%B4%E6%80%A7">хИЖх╕Гх╝Пф╕АшЗ┤цАз</a></li> <li><a href="#%E5%A4%8D%E5%88%B6%E7%8A%B6%E6%80%81%E6%9C%BA">хдНхИ╢чК╢цАБцЬ║</a></li> <li><a href="#raft-%E5%BA%94%E7%94%A8">RAFT х║ФчФи</a></li></ul></li> <li><a href="#%E4%BA%8Craft-%E5%9F%BA%E7%A1%80">ф║МуАБRaft хЯ║чбА</a> <ul><li><a href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%A7%92%E8%89%B2">цЬНхКбхЩишзТшЙ▓</a></li> <li><a href="#%E4%BB%BB%E6%9C%9F">ф╗╗цЬЯ</a></li> <li><a href="#rpc">RPC</a></li></ul></li> <li><a href="#%E4%B8%89%E9%80%89%E4%B8%BE-leader">ф╕ЙуАБщАЙф╕╛ Leader</a> <ul><li><a href="#%E9%80%89%E4%B8%BE%E8%A7%84%E5%88%99">щАЙф╕╛шзДхИЩ</a></li> <li><a href="#%E5%8D%95-candidate-%E9%80%89%E4%B8%BE">хНХ Candidate щАЙф╕╛</a></li> <li><a href="#%E5%A4%9A-candidate-%E9%80%89%E4%B8%BE">хдЪ Candidate щАЙф╕╛</a></li></ul></li> <li><a href="#%E5%9B%9B%E6%97%A5%E5%BF%97%E5%A4%8D%E5%88%B6">хЫЫуАБцЧех┐ЧхдНхИ╢</a> <ul><li><a href="#%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F">цЧех┐Чца╝х╝П</a></li> <li><a href="#%E6%97%A5%E5%BF%97%E5%A4%8D%E5%88%B6%E6%B5%81%E7%A8%8B">цЧех┐ЧхдНхИ╢ц╡БчиЛ</a></li> <li><a href="#%E6%97%A5%E5%BF%97%E4%B8%80%E8%87%B4%E6%80%A7">цЧех┐Чф╕АшЗ┤цАз</a></li></ul></li> <li><a href="#%E4%BA%94%E5%AE%89%E5%85%A8%E6%80%A7">ф║ФуАБхоЙхЕицАз</a> <ul><li><a href="#%E9%80%89%E4%B8%BE%E9%99%90%E5%88%B6">щАЙф╕╛щЩРхИ╢</a></li> <li><a href="#%E6%8F%90%E4%BA%A4%E6%97%A7%E4%BB%BB%E6%9C%9F%E7%9A%84%E6%97%A5%E5%BF%97%E6%9D%A1%E7%9B%AE">цПРф║дцЧзф╗╗цЬЯчЪДцЧех┐ЧцЭбчЫо</a></li></ul></li> <li><a href="#%E5%85%AD%E6%97%A5%E5%BF%97%E5%8E%8B%E7%BC%A9">хЕнуАБцЧех┐ЧхОЛч╝й</a></li> <li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">хПВшАГш╡ДцЦЩ</a></li></ul> <h2 id="ф╕АуАБraft-чоАф╗Л"><a href="#ф╕АуАБraft-чоАф╗Л" class="header-anchor">#</a> ф╕АуАБRaft чоАф╗Л</h2> <p><strong><a href="https://ramcloud.atlassian.net/wiki/download/attachments/6586375/raft.pdf" target="_blank" rel="noopener noreferrer">Raft<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> цШпф╕АчзНф╕║ф║ЖчобчРЖцЧех┐ЧхдНхИ╢чЪДхИЖх╕Гх╝Пф╕АшЗ┤цАзчоЧц│Х</strong>уАВ</p> <p><a href="https://ramcloud.atlassian.net/wiki/download/attachments/6586375/raft.pdf" target="_blank" rel="noopener noreferrer">Raft<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> хЗ║чО░ф╣ЛхЙНя╝МPaxos ф╕АчЫ┤цШпхИЖх╕Гх╝Пф╕АшЗ┤цАзчоЧц│ХчЪДцаЗхЗЖуАВPaxos <strong>щЪ╛ф╗ечРЖшзгя╝МцЫ┤щЪ╛ф╗ехоЮчО░</strong>уАВRaft чЪДшо╛шобчЫоцаЗцШпчоАхМЦ Paxosя╝Мф╜┐х╛ЧчоЧц│Х<strong>цЧвхо╣цШУчРЖшзгя╝Мф╣Яхо╣цШУхоЮчО░</strong>уАВ</p> <p>Paxos хТМ Raft щГ╜цШпхИЖх╕Гх╝Пф╕АшЗ┤цАзчоЧц│Хя╝Мш┐Щф╕кш┐ЗчиЛхжВхРМцКХчеищАЙф╕╛щвЖшвЦя╝ИLeaderя╝Йя╝МхПВщАЙшАЕя╝ИCandidateя╝ЙщЬАшжБшп┤цЬНхдзхдЪцХ░цКХчеишАЕя╝ИFollowerя╝ЙцКХчеич╗Щф╗Ця╝Мф╕АцЧжщАЙф╕╛хЗ║щвЖшвЦя╝Мх░▒чФ▒щвЖшвЦхПСхП╖цЦ╜ф╗дуАВPaxos хТМ Raft чЪДхМ║хИлхЬиф║ОщАЙф╕╛чЪДхЕ╖ф╜Уш┐ЗчиЛф╕НхРМуАВ</p> <p><strong>Raft хПпф╗ешзгхЖ│хИЖх╕Гх╝П CAP чРЖшо║ф╕нчЪД CP</strong>я╝МхН│ <em>ф╕АшЗ┤цАзя╝ИCя╝ЪConsistencyя╝Й</em> хТМ <em>хИЖхМ║хо╣х┐НцАзя╝ИPя╝ЪPartition Toleranceя╝Й</em>я╝Мх╣╢ф╕НшГ╜шзгхЖ│ <em>хПпчФицАзя╝ИAя╝ЪAvailabilityя╝Й</em> чЪДщЧощвШуАВ</p> <h3 id="хИЖх╕Гх╝Пф╕АшЗ┤цАз"><a href="#хИЖх╕Гх╝Пф╕АшЗ┤цАз" class="header-anchor">#</a> хИЖх╕Гх╝Пф╕АшЗ┤цАз</h3> <p>хИЖх╕Гх╝Пф╕АшЗ┤цАз (distributed consensus) цШпхИЖх╕Гх╝Пч│╗ч╗Яф╕нцЬАхЯ║цЬмчЪДщЧощвШя╝МчФицЭеф┐ЭшпБф╕Аф╕кхИЖх╕Гх╝Пч│╗ч╗ЯчЪДхПпщЭацАзф╗ехПКхо╣щФЩшГ╜хКЫуАВчоАхНХцЭешп┤я╝М<em><strong>хИЖх╕Гх╝Пф╕АшЗ┤цАзцШпцМЗхдЪф╕кцЬНхКбхЩичЪДф┐ЭцМБчК╢цАБф╕АшЗ┤</strong></em>уАВ</p> <p>хЬихИЖх╕Гх╝Пч│╗ч╗Яф╕ня╝МхПпшГ╜хЗ║чО░хРДчзНцДПхдЦя╝ИцЦнчФ╡уАБч╜Сч╗ЬцЛехбЮуАБCPU/хЖЕхнШшАЧх░╜чнЙчнЙя╝Йя╝Мф╜┐х╛ЧцЬНхКбхЩихоХцЬ║цИЦцЧац│Хшо┐щЧоя╝МцЬАч╗Ихп╝шЗ┤цЧац│ХхТМхЕ╢ф╗ЦцЬНхКбхЩиф┐ЭцМБчК╢цАБф╕АшЗ┤уАВф╕║ф║Жх║Фхп╣ш┐ЩчзНцГЕхЖ╡я╝Мх░▒щЬАшжБцЬЙф╕АчзНф╕АшЗ┤цАзхНПшооцЭеш┐ЫшбМхо╣щФЩя╝Мф╜┐х╛ЧхИЖх╕Гх╝Пч│╗ч╗Яф╕нхН│ф╜┐цЬЙщГихИЖцЬНхКбхЩихоХцЬ║цИЦцЧац│Хшо┐щЧоя╝МцХ┤ф╜Уф╛ЭчД╢хПпф╗ехп╣хдЦцПРф╛ЫцЬНхКбуАВ</p> <p>ф╗ехо╣щФЩцЦ╣х╝Пш╛╛цИРф╕АшЗ┤я╝МшЗкчД╢ф╕НшГ╜шжБц▒ВцЙАцЬЙцЬНхКбхЩищГ╜ш╛╛цИРф╕АшЗ┤чК╢цАБя╝МхПкшжБ<strong>ш╢Еш┐ЗхНКцХ░ф╗еф╕К</strong>чЪДцЬНхКбхЩиш╛╛цИРф╕АшЗ┤х░▒хПпф╗еф║ЖуАВхБЗшо╛цЬЙ N хП░цЬНхКбхЩия╝М хдзф║ОчнЙф║О $\frac{N}{2}+1$ хП░цЬНхКбхЩих░▒чоЧцШпхНКцХ░ф╗еф╕Кф║Ж уАВ</p> <h3 id="хдНхИ╢чК╢цАБцЬ║"><a href="#хдНхИ╢чК╢цАБцЬ║" class="header-anchor">#</a> хдНхИ╢чК╢цАБцЬ║</h3> <p><strong><code>хдНхИ╢чК╢цАБцЬ║я╝ИReplicated State Machinesя╝Й</code></strong> цШпцМЗф╕Ач╗ДцЬНхКбхЩиф╕КчЪДчК╢цАБцЬ║ф║зчФЯчЫ╕хРМчК╢цАБчЪДхЙпцЬмя╝Мх╣╢ф╕ФхЬиф╕Аф║ЫцЬ║хЩихоХцОЙчЪДцГЕхЖ╡ф╕Лф╣ЯхПпф╗еч╗зч╗нш┐РшбМуАВф╕АшЗ┤цАзчоЧц│ХчобчРЖчЭАцЭешЗкховцИ╖члпцМЗф╗дчЪДхдНхИ╢цЧех┐ЧуАВчК╢цАБцЬ║ф╗ОцЧех┐Чф╕нхдДчРЖчЫ╕хРМщб║х║ПчЪДчЫ╕хРМцМЗф╗дя╝МцЙАф╗еф║зчФЯчЪДч╗УцЮЬф╣ЯцШпчЫ╕хРМчЪДуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200131233906.png" alt="img"></p> <p>хдНхИ╢чК╢цАБцЬ║щАЪх╕╕щГ╜цШпхЯ║ф║ОхдНхИ╢цЧех┐ЧхоЮчО░чЪДя╝МхжВф╕КхЫ╛уАВцпПф╕Аф╕кцЬНхКбхЩихнШхВиф╕Аф╕кхМЕхРлф╕Ач│╗хИЧцМЗф╗дчЪДцЧех┐Чя╝Мх╣╢ф╕ФцМЙчЕзцЧех┐ЧчЪДщб║х║Пш┐ЫшбМцЙзшбМуАВцпПф╕Аф╕кцЧех┐ЧщГ╜цМЙчЕзчЫ╕хРМчЪДщб║х║ПхМЕхРлчЫ╕хРМчЪДцМЗф╗дя╝МцЙАф╗ецпПф╕Аф╕кцЬНхКбхЩищГ╜цЙзшбМчЫ╕хРМчЪДцМЗф╗дх║ПхИЧуАВхЫаф╕║цпПф╕кчК╢цАБцЬ║щГ╜цШпчбохоЪчЪДя╝МцпПф╕АцмбцЙзшбМцУНф╜ЬщГ╜ф║зчФЯчЫ╕хРМчЪДчК╢цАБхТМхРМца╖чЪДх║ПхИЧуАВ</p> <p>ф┐ЭшпБхдНхИ╢цЧех┐ЧчЫ╕хРМх░▒цШпф╕АшЗ┤цАзчоЧц│ХчЪДх╖еф╜Ьф║ЖуАВхЬиф╕АхП░цЬНхКбхЩиф╕Кя╝Мф╕АшЗ┤цАзцибхЭЧцОецФ╢ховцИ╖члпхПСщАБцЭечЪДцМЗф╗дчД╢хРОхвЮхКахИ░шЗкх╖▒чЪДцЧех┐Чф╕нхО╗уАВхоГхТМхЕ╢ф╗ЦцЬНхКбхЩиф╕КчЪДф╕АшЗ┤цАзцибхЭЧш┐ЫшбМщАЪф┐бцЭеф┐ЭшпБцпПф╕Аф╕кцЬНхКбхЩиф╕КчЪДцЧех┐ЧцЬАч╗ИщГ╜ф╗ечЫ╕хРМчЪДщб║х║ПхМЕхРлчЫ╕хРМчЪДшп╖ц▒Вя╝Мх░╜чобцЬЙф║ЫцЬНхКбхЩиф╝ЪхоХцЬ║уАВф╕АцЧжцМЗф╗дшвлцнгчбочЪДхдНхИ╢я╝МцпПф╕Аф╕кцЬНхКбхЩичЪДчК╢цАБцЬ║цМЙчЕзцЧех┐Чщб║х║ПхдДчРЖф╗Цф╗мя╝МчД╢хРОш╛УхЗ║ч╗УцЮЬшвлш┐ФхЫЮч╗ЩховцИ╖члпуАВхЫацндя╝МцЬНхКбхЩищЫЖч╛дчЬЛш╡╖цЭех╜вцИРф╕Аф╕кщлШхПпщЭачЪДчК╢цАБцЬ║уАВ</p> <p>хоЮщЩЕч│╗ч╗Яф╕нф╜┐чФичЪДф╕АшЗ┤цАзчоЧц│ХщАЪх╕╕хРлцЬЙф╗еф╕ЛчЙ╣цАзя╝Ъ</p> <ul><li><strong>хоЙхЕицАзф┐ЭшпБ</strong>я╝Ич╗Эхп╣ф╕Нф╝Ъш┐ФхЫЮф╕Аф╕кщФЩшппчЪДч╗УцЮЬя╝Йя╝ЪхЬищЭЮцЛЬхНах║нщФЩшппцГЕхЖ╡ф╕Ля╝МхМЕцЛмч╜Сч╗Ьх╗╢ш┐ЯуАБхИЖхМ║уАБф╕вхМЕуАБхЖЧф╜ЩхТМф╣▒х║ПчнЙщФЩшппщГ╜хПпф╗еф┐ЭшпБцнгчбоуАВ</li> <li><strong>хПпчФицАз</strong>я╝ЪщЫЖч╛дф╕нхПкшжБцЬЙхдзхдЪцХ░чЪДцЬ║хЩихПпш┐РшбМх╣╢ф╕ФшГ╜хдЯчЫ╕ф║ТщАЪф┐буАБхТМховцИ╖члпщАЪф┐бя╝Мх░▒хПпф╗еф┐ЭшпБхПпчФиуАВхЫацндя╝Мф╕Аф╕кхЕ╕хЮЛчЪДхМЕхРл 5 ф╕кшКВчВ╣чЪДщЫЖч╛дхПпф╗ехо╣х┐Нф╕дф╕кшКВчВ╣чЪДхд▒ш┤еуАВцЬНхКбхЩишвлхБЬцнвх░▒шодф╕║цШпхд▒ш┤еуАВф╗Цф╗мх╜УцЬЙчи│хоЪчЪДхнШхВичЪДцЧ╢хАЩхПпф╗еф╗ОчК╢цАБф╕нцБвхдНхЫЮцЭех╣╢щЗНцЦ░хКахЕещЫЖч╛дуАВ</li> <li><strong>ф╕Нф╛Эш╡ЦцЧ╢х║ПцЭеф┐ЭшпБф╕АшЗ┤цАз</strong>я╝ЪчЙйчРЖцЧ╢щТЯщФЩшппцИЦшАЕцЮБчлпчЪДц╢ИцБпх╗╢ш┐ЯхПкцЬЙхЬицЬАхЭПцГЕхЖ╡ф╕ЛцЙНф╝Ъхп╝шЗ┤хПпчФицАзщЧощвШуАВ</li> <li>щАЪх╕╕цГЕхЖ╡ф╕Ля╝Мф╕АцЭбцМЗф╗дхПпф╗ех░╜хПпшГ╜х┐лчЪДхЬищЫЖч╛дф╕нхдзхдЪцХ░шКВчВ╣хУНх║Фф╕Аш╜ош┐ЬчиЛш┐ЗчиЛш░ГчФицЧ╢хоМцИРуАВх░ПщГихИЖцпФш╛ГцЕвчЪДшКВчВ╣ф╕Нф╝Ъх╜▒хУНч│╗ч╗ЯцХ┤ф╜УчЪДцАзшГ╜уАВ</li></ul> <h3 id="raft-х║ФчФи"><a href="#raft-х║ФчФи" class="header-anchor">#</a> RAFT х║ФчФи</h3> <p>RAFT хПпф╗ехБЪф╗Аф╣Ия╝Я</p> <p>щАЪш┐З RAFT цПРф╛ЫчЪДхдНхИ╢чК╢цАБцЬ║я╝МхПпф╗ешзгхЖ│хИЖх╕Гх╝Пч│╗ч╗ЯчЪДхдНхИ╢уАБф┐охдНуАБшКВчВ╣чобчРЖчнЙщЧощвШуАВRaft цЮБхдзчЪДчоАхМЦх╜УхЙНхИЖх╕Гх╝Пч│╗ч╗ЯчЪДшо╛шобф╕ОхоЮчО░я╝Мшойх╝АхПСшАЕхПкхЕ│ц│иф║Оф╕ЪхКбщА╗ш╛Ся╝Мх░ЖхЕ╢цК╜ш▒бхоЮчО░цИРхп╣х║ФчЪДчК╢цАБцЬ║хН│хПпуАВхЯ║ф║Ош┐ЩхеЧцбЖцЮ╢я╝МхПпф╗ецЮДх╗║х╛ИхдЪхИЖх╕Гх╝Пх║ФчФия╝Ъ</p> <ul><li>хИЖх╕Гх╝ПщФБцЬНхКбя╝МцпФхжВ Zookeeper</li> <li>хИЖх╕Гх╝ПхнШхВич│╗ч╗Яя╝МцпФхжВхИЖх╕Гх╝Пц╢ИцБпщШЯхИЧуАБхИЖх╕Гх╝ПхЭЧч│╗ч╗ЯуАБхИЖх╕Гх╝ПцЦЗф╗╢ч│╗ч╗ЯуАБхИЖх╕Гх╝Пшбица╝ч│╗ч╗ЯчнЙ</li> <li>щлШхПпщЭахЕГф┐бцБпчобчРЖя╝МцпФхжВхРДч▒╗ Master цибхЭЧчЪД HA</li></ul> <h2 id="ф║МуАБraft-хЯ║чбА"><a href="#ф║МуАБraft-хЯ║чбА" class="header-anchor">#</a> ф║МуАБRaft хЯ║чбА</h2> <p>Raft х░Жф╕АшЗ┤цАзщЧощвШхИЖшзгцИРф║Жф╕Йф╕кхнРщЧощвШя╝Ъ</p> <ul><li><strong>щАЙф╕╛ Leader</strong></li> <li><strong>цЧех┐ЧхдНхИ╢</strong></li> <li><strong>хоЙхЕицАз</strong></li></ul> <p>хЬихРОч╗нчлашКВя╝Мф╝Ъшпжч╗Жшо▓шзгш┐Щф╕кхнРщЧощвШуАВчО░хЬия╝МхЕИф║Жшзгф╕Аф╕Л Raft чЪДф╕Аф║Ыца╕х┐ГцжВх┐╡уАВ</p> <h3 id="цЬНхКбхЩишзТшЙ▓"><a href="#цЬНхКбхЩишзТшЙ▓" class="header-anchor">#</a> цЬНхКбхЩишзТшЙ▓</h3> <p>хЬи Raft ф╕ня╝Мф╗╗ф╜ХцЧ╢хИ╗я╝МцпПф╕кцЬНхКбхЩищГ╜хдДф║Ош┐Щф╕Йф╕кшзТшЙ▓ф╣Лф╕А я╝Ъ</p> <ul><li><strong><code>Leader</code></strong> - щвЖхп╝шАЕя╝МщАЪх╕╕ф╕Аф╕кч│╗ч╗Яф╕нцШп<strong>ф╕Аф╕╗я╝ИLeaderя╝ЙхдЪф╗Оя╝ИFollowerя╝Й</strong>уАВLeader <strong>ш┤Яш┤гхдДчРЖцЙАцЬЙчЪДховцИ╖члпшп╖ц▒В</strong>уАВ</li> <li><strong><code>Follower</code></strong> - ш╖ЯщЪПшАЕя╝М<strong>ф╕Нф╝ЪхПСщАБф╗╗ф╜Хшп╖ц▒В</strong>я╝МхПкцШпчоАхНХчЪД <strong>хУНх║ФцЭешЗк Leader цИЦшАЕ Candidate чЪДшп╖ц▒В</strong>уАВ</li> <li><strong><code>Candidate</code></strong> - хПВщАЙшАЕя╝МщАЙф╕╛цЦ░ Leader цЧ╢чЪДф╕┤цЧ╢шзТшЙ▓уАВ</li></ul> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200131215742.png" alt="img"></p> <blockquote><p>ЁЯТб хЫ╛чд║шп┤цШОя╝Ъ</p> <ul><li>Follower хПкхУНх║ФцЭешЗкхЕ╢ф╗ЦцЬНхКбхЩичЪДшп╖ц▒ВуАВхЬиф╕АхоЪцЧ╢щЩРхЖЕя╝МхжВцЮЬ Follower цОецФ╢ф╕НхИ░ц╢ИцБпя╝Мх░▒ф╝Ъш╜мхПШцИР Candidateя╝Мх╣╢хПСш╡╖щАЙф╕╛уАВ</li> <li>Candidate хРС Follower хПСш╡╖цКХчеишп╖ц▒Вя╝МхжВцЮЬшО╖х╛ЧщЫЖч╛дф╕нхНКцХ░ф╗еф╕КчЪДщАЙчеия╝Мх░▒ф╝Ъш╜мхПШф╕║ LeaderуАВ</li> <li>хЬиф╕Аф╕к Term хЖЕя╝МLeader хзЛч╗Иф┐ЭцМБф╕НхПШя╝МчЫ┤хИ░ф╕Лч║┐ф║ЖуАВLeader щЬАшжБхСицЬЯцАзхРСцЙАцЬЙ Follower хПСщАБх┐Гш╖│ц╢ИцБпя╝Мф╗ещШ╗цнв Follower ш╜мхПШф╕║ CandidateуАВ</li></ul></blockquote> <h3 id="ф╗╗цЬЯ"><a href="#ф╗╗цЬЯ" class="header-anchor">#</a> ф╗╗цЬЯ</h3> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200131220742.png" alt="img"></p> <p>Raft цККцЧ╢щЧ┤хИЖхЙ▓цИРф╗╗цДПщХ┐х║жчЪД **<em><code>ф╗╗цЬЯя╝ИTermя╝Й</code><em><strong>я╝Мф╗╗цЬЯчФиш┐Юч╗нчЪДцХ┤цХ░цаЗшо░уАВцпПф╕Ацо╡ф╗╗цЬЯф╗Оф╕Ацмб</strong>щАЙф╕╛</em></em>х╝АхзЛуАВ<strong>Raft ф┐ЭшпБф║ЖхЬиф╕Аф╕кч╗ЩхоЪчЪДф╗╗цЬЯхЖЕя╝МцЬАхдЪхПкцЬЙф╕Аф╕кщвЖхп╝шАЕ</strong>уАВ</p> <ul><li>хжВцЮЬщАЙф╕╛цИРхКЯя╝МLeader ф╝ЪчобчРЖцХ┤ф╕кщЫЖч╛дчЫ┤хИ░ф╗╗цЬЯч╗УцЭЯуАВ</li> <li>хжВцЮЬщАЙф╕╛хд▒ш┤ея╝МщВгф╣Иш┐Щф╕кф╗╗цЬЯх░▒ф╝ЪхЫаф╕║ц▓бцЬЙ Leader шАМч╗УцЭЯуАВ</li></ul> <p><strong>ф╕НхРМцЬНхКбхЩишКВчВ╣шзВхпЯхИ░чЪДф╗╗цЬЯш╜мцНвчК╢цАБхПпшГ╜ф╕Нф╕Аца╖</strong>я╝Ъ</p> <ul><li>цЬНхКбхЩишКВчВ╣хПпшГ╜шзВхпЯхИ░хдЪцмбчЪДф╗╗цЬЯш╜мцНвуАВ</li> <li>цЬНхКбхЩишКВчВ╣ф╣ЯхПпшГ╜шзВхпЯф╕НхИ░ф╗╗ф╜Хф╕Ацмбф╗╗цЬЯш╜мцНвуАВ</li></ul> <p><strong>ф╗╗цЬЯхЬи Raft чоЧц│Хф╕нхЕЕх╜УщА╗ш╛СцЧ╢щТЯчЪДф╜ЬчФия╝Мф╜┐х╛ЧцЬНхКбхЩишКВчВ╣хПпф╗ецЯецШОф╕Аф║Ыш┐ЗцЬЯчЪДф┐бцБпя╝ИцпФхжВш┐ЗцЬЯчЪД Leaderя╝ЙуАВцпПф╕кцЬНхКбхЩишКВчВ╣щГ╜ф╝ЪхнШхВиф╕Аф╕кх╜УхЙНф╗╗цЬЯхП╖я╝Мш┐Щф╕Ач╝ЦхП╖хЬицХ┤ф╕кцЧ╢цЬЯхЖЕхНХш░ГчЪДхвЮщХ┐уАВх╜УцЬНхКбхЩиф╣ЛщЧ┤щАЪф┐бчЪДцЧ╢хАЩф╝Ъф║дцНвх╜УхЙНф╗╗цЬЯхП╖уАВ</strong></p> <ul><li>хжВцЮЬф╕Аф╕кцЬНхКбхЩичЪДх╜УхЙНф╗╗цЬЯхП╖цпФхЕ╢ф╗Цф║║х░Пя╝МщВгф╣Иф╗Цф╝ЪцЫ┤цЦ░шЗкх╖▒чЪДч╝ЦхП╖хИ░ш╛ГхдзчЪДч╝ЦхП╖хА╝уАВ</li> <li>хжВцЮЬф╕Аф╕к Candidate цИЦшАЕ Leader хПСчО░шЗкх╖▒чЪДф╗╗цЬЯхП╖ш┐ЗцЬЯф║Жя╝МщВгф╣Иф╗Цф╝ЪчлЛхН│цБвхдНцИРш╖ЯщЪПшАЕчК╢цАБуАВ</li> <li>хжВцЮЬф╕Аф╕кшКВчВ╣цОецФ╢хИ░ф╕Аф╕кхМЕхРлш┐ЗцЬЯчЪДф╗╗цЬЯхП╖чЪДшп╖ц▒Вя╝МщВгф╣Иф╗Цф╝ЪчЫ┤цОецЛТч╗Эш┐Щф╕кшп╖ц▒ВуАВ</li></ul> <h3 id="rpc"><a href="#rpc" class="header-anchor">#</a> RPC</h3> <p>Raft чоЧц│Хф╕нцЬНхКбхЩишКВчВ╣ф╣ЛщЧ┤чЪДщАЪф┐бф╜┐чФи ***<code>ш┐ЬчиЛш┐ЗчиЛш░ГчФия╝ИRPCя╝Й</code>***уАВ</p> <p>хЯ║цЬмчЪДф╕АшЗ┤цАзчоЧц│ХхПкщЬАшжБф╕дчзН RPCя╝Ъ</p> <ul><li><strong><code>RequestVote RPC</code></strong> - шп╖ц▒ВцКХчеи RPCя╝МчФ▒ Candidate хЬищАЙф╕╛цЬЯщЧ┤хПСш╡╖уАВ</li> <li><strong><code>AppendEntries RPC</code></strong> - щЩДхКацЭбчЫо RPCя╝МчФ▒ Leader хПСш╡╖я╝МчФицЭехдНхИ╢цЧех┐ЧхТМцПРф╛Ыф╕АчзНх┐Гш╖│цЬ║хИ╢уАВ</li></ul> <h2 id="ф╕ЙуАБщАЙф╕╛-leader"><a href="#ф╕ЙуАБщАЙф╕╛-leader" class="header-anchor">#</a> ф╕ЙуАБщАЙф╕╛ Leader</h2> <h3 id="щАЙф╕╛шзДхИЩ"><a href="#щАЙф╕╛шзДхИЩ" class="header-anchor">#</a> щАЙф╕╛шзДхИЩ</h3> <p><strong>Raft ф╜┐чФиф╕АчзНх┐Гш╖│цЬ║хИ╢цЭешзжхПС Leader щАЙф╕╛</strong>уАВ</p> <p><strong>Leader щЬАшжБхСицЬЯцАзчЪДхРСцЙАцЬЙ Follower хПСщАБх┐Гш╖│ц╢ИцБп</strong>я╝Мф╗ецндч╗┤цМБшЗкх╖▒чЪДцЭГхиБх╣╢щШ╗цнвцЦ░ Leader чЪДф║зчФЯуАВ</p> <p>цпПф╕к Follower щГ╜шо╛ч╜оф║Жф╕Аф╕к<strong>щЪПцЬ║чЪДчлЮщАЙш╢ЕцЧ╢цЧ╢щЧ┤</strong>я╝Мф╕АшИмф╕║ <code>150ms ~ 300ms</code>я╝МхжВцЮЬхЬичлЮщАЙш╢ЕцЧ╢цЧ╢щЧ┤хЖЕц▓бцЬЙцФ╢хИ░ Leader чЪДх┐Гш╖│ц╢ИцБпя╝Мх░▒ф╝Ъшодф╕║х╜УхЙН Term ц▓бцЬЙхПпчФичЪД Leaderя╝Мх╣╢хПСш╡╖щАЙф╕╛цЭещАЙхЗ║цЦ░чЪД LeaderуАВх╝АхзЛф╕АцмбщАЙф╕╛ш┐ЗчиЛя╝МFollower хЕИшжБхвЮхКашЗкх╖▒чЪДх╜УхЙН Term хП╖я╝Мх╣╢<strong>ш╜мцНвф╕║ Candidate</strong>уАВ</p> <p>Candidate ф╝Ъх╣╢шбМчЪД<strong>хРСщЫЖч╛дф╕нчЪДцЙАцЬЙцЬНхКбхЩишКВчВ╣хПСщАБцКХчеишп╖ц▒Вя╝И<code>RequestVote RPC</code>я╝Й</strong>я╝МхоГф╝Ъф┐ЭцМБх╜УхЙНчК╢цАБчЫ┤хИ░ф╗еф╕Лф╕Йф╗╢ф║ЛцГЕф╣Лф╕АхПСчФЯя╝Ъ</p> <ul><li><strong>шЗкх╖▒цИРф╕║ Leader</strong></li> <li><strong>хЕ╢ф╗ЦчЪДцЬНхКбхЩицИРф╕║ Leader</strong></li> <li><strong>ц▓бцЬЙф╗╗ф╜ХцЬНхКбхЩицИРф╕║ Leader</strong></li></ul> <h4 id="шЗкх╖▒цИРф╕║-leader"><a href="#шЗкх╖▒цИРф╕║-leader" class="header-anchor">#</a> шЗкх╖▒цИРф╕║ Leader</h4> <ul><li>х╜Уф╕Аф╕к Candidate ф╗ОцХ┤ф╕кщЫЖч╛д<strong>хНКцХ░ф╗еф╕К</strong>чЪДцЬНхКбхЩишКВчВ╣шО╖х╛Чф║ЖщТИхп╣хРМф╕Аф╕к Term чЪДщАЙчеия╝МщВгф╣ИхоГх░▒ш╡вх╛Чф║Жш┐ЩцмбщАЙф╕╛х╣╢цИРф╕║ LeaderуАВцпПф╕кцЬНхКбхЩицЬАхдЪф╝Ъхп╣ф╕Аф╕к Term цКХхЗ║ф╕Ах╝ащАЙчеия╝МцМЙчЕзхЕИцЭехЕИцЬНхКбя╝ИFIFOя╝ЙчЪДхОЯхИЩуАВ<em>шжБц▒ВхНКцХ░ф╗еф╕КщАЙчеичЪДшзДхИЩчбоф┐Эф║ЖцЬАхдЪхПкф╝ЪцЬЙф╕Аф╕к Candidate ш╡вх╛ЧцндцмбщАЙф╕╛</em>уАВ</li> <li>ф╕АцЧж Candidate ш╡вх╛ЧщАЙф╕╛я╝Мх░▒члЛхН│цИРф╕║ LeaderуАВчД╢хРОхоГф╝ЪхРСхЕ╢ф╗ЦчЪДцЬНхКбхЩихПСщАБх┐Гш╖│ц╢ИцБпцЭех╗║члЛшЗкх╖▒чЪДцЭГхиБх╣╢ф╕ФщШ╗цнвцЦ░чЪДщвЖхп╝ф║║чЪДф║зчФЯуАВ</li></ul> <h4 id="хЕ╢ф╗ЦчЪДцЬНхКбхЩицИРф╕║-leader"><a href="#хЕ╢ф╗ЦчЪДцЬНхКбхЩицИРф╕║-leader" class="header-anchor">#</a> хЕ╢ф╗ЦчЪДцЬНхКбхЩицИРф╕║ Leader</h4> <p>чнЙх╛ЕцКХчеицЬЯщЧ┤я╝МCandidate хПпшГ╜ф╝Ъф╗ОхЕ╢ф╗ЦчЪДцЬНхКбхЩицОецФ╢хИ░хг░цШОхоГцШп Leader чЪД <code>AppendEntries RPC</code>уАВ</p> <ul><li>хжВцЮЬш┐Щф╕к Leader чЪД Term хП╖я╝ИхМЕхРлхЬицндцмбчЪД RPC ф╕ня╝Йф╕Нх░Пф║О Candidate х╜УхЙНчЪД Termя╝МщВгф╣И Candidate ф╝ЪцЙ┐шод Leader хРИц│Хх╣╢хЫЮхИ░ Follower чК╢цАБуАВ</li> <li>хжВцЮЬцндцмб RPC ф╕нчЪД Term хП╖цпФшЗкх╖▒х░Пя╝МщВгф╣И Candidate х░▒ф╝ЪцЛТч╗Эш┐Щф╕кц╢ИцБпх╣╢ч╗зч╗нф┐ЭцМБ Candidate чК╢цАБуАВ</li></ul> <h4 id="ц▓бцЬЙф╗╗ф╜ХцЬНхКбхЩицИРф╕║-leader"><a href="#ц▓бцЬЙф╗╗ф╜ХцЬНхКбхЩицИРф╕║-leader" class="header-anchor">#</a> ц▓бцЬЙф╗╗ф╜ХцЬНхКбхЩицИРф╕║ Leader</h4> <p>хжВцЮЬцЬЙхдЪф╕к Follower хРМцЧ╢цИРф╕║ Candidateя╝МщВгф╣ИщАЙчеихПпшГ╜ф╝ЪшвлчУЬхИЖф╗ешЗ│ф║Оц▓бцЬЙ Candidate хПпф╗еш╡вх╛ЧхНКцХ░ф╗еф╕КчЪДцКХчеиуАВх╜Уш┐ЩчзНцГЕхЖ╡хПСчФЯчЪДцЧ╢хАЩя╝МцпПф╕Аф╕к Candidate щГ╜ф╝ЪчлЮщАЙш╢ЕцЧ╢я╝МчД╢хРОщАЪш┐ЗхвЮхКах╜УхЙН Term хП╖цЭех╝АхзЛф╕Аш╜оцЦ░чЪДщАЙф╕╛уАВчД╢шАМя╝Мц▓бцЬЙхЕ╢ф╗ЦцЬ║хИ╢чЪДшпЭя╝МщАЙчеихПпшГ╜ф╝ЪшвлцЧащЩРчЪДщЗНхдНчУЬхИЖуАВ</p> <p>Raft чоЧц│Хф╜┐чФищЪПцЬ║щАЙф╕╛ш╢ЕцЧ╢цЧ╢щЧ┤чЪДцЦ╣ц│ХцЭечбоф┐Эх╛Их░Сф╝ЪхПСчФЯщАЙчеичУЬхИЖчЪДцГЕхЖ╡я╝Мх░▒чоЧхПСчФЯф╣ЯшГ╜х╛Их┐лчЪДшзгхЖ│уАВф╕║ф║ЖщШ╗цнвщАЙчеиш╡╖хИЭх░▒швлчУЬхИЖя╝МчлЮщАЙш╢ЕцЧ╢цЧ╢щЧ┤цШпф╕Аф╕к<strong>щЪПцЬ║чЪДцЧ╢щЧ┤</strong>я╝МхЬиф╕Аф╕кхЫ║хоЪчЪДхМ║щЧ┤я╝Иф╛ЛхжВ 150-300 цплчзТя╝ЙщЪПцЬ║щАЙцЛйя╝Мш┐Щца╖хПпф╗ецККщАЙф╕╛щГ╜хИЖцХгх╝АуАВ</p> <ul><li>ф╗ешЗ│ф║ОхЬихдзхдЪцХ░цГЕхЖ╡ф╕Ля╝МхПкцЬЙф╕Аф╕кцЬНхКбхЩиф╝Ъш╢ЕцЧ╢я╝МчД╢хРОхоГш╡вх╛ЧщАЙф╕╛я╝МцИРф╕║ Leaderя╝Мх╣╢хЬихЕ╢ф╗ЦцЬНхКбхЩиш╢ЕцЧ╢ф╣ЛхЙНхПСщАБх┐Гш╖│хМЕуАВ</li> <li>хРМца╖чЪДцЬ║хИ╢ф╣ЯшвлчФихЬищАЙчеичУЬхИЖчЪДцГЕхЖ╡ф╕Ля╝ЪцпПф╕Аф╕к Candidate хЬих╝АхзЛф╕АцмбщАЙф╕╛чЪДцЧ╢хАЩф╝ЪщЗНч╜оф╕Аф╕кщЪПцЬ║чЪДщАЙф╕╛ш╢ЕцЧ╢цЧ╢щЧ┤я╝МчД╢хРОхЬиш╢ЕцЧ╢цЧ╢щЧ┤хЖЕчнЙх╛ЕцКХчеичЪДч╗УцЮЬя╝Ыш┐Щца╖хЗПх░Сф║ЖхЬицЦ░чЪДщАЙф╕╛ф╕нхПжхдЦчЪДщАЙчеичУЬхИЖчЪДхПпшГ╜цАзуАВ</li></ul> <hr> <p>чРЖшзгф║Жф╕КщЭвчЪДщАЙф╕╛шзДхИЩхРОя╝МцИСф╗мщАЪш┐ЗхКихЫ╛цЭехКац╖▒шодшпЖуАВ</p> <h3 id="хНХ-candidate-щАЙф╕╛"><a href="#хНХ-candidate-щАЙф╕╛" class="header-anchor">#</a> хНХ Candidate щАЙф╕╛</h3> <p>я╝И1я╝Йф╕ЛхЫ╛шбичд║ф╕Аф╕кхИЖх╕Гх╝Пч│╗ч╗ЯчЪДцЬАхИЭщШ╢цо╡я╝МцндцЧ╢хПкцЬЙ Followerя╝Мц▓бцЬЙ LeaderуАВFollower A чнЙх╛Еф╕Аф╕кщЪПцЬ║чЪДщАЙф╕╛ш╢ЕцЧ╢цЧ╢щЧ┤ф╣ЛхРОя╝Мц▓бцФ╢хИ░ Leader хПСцЭечЪДх┐Гш╖│ц╢ИцБпуАВхЫацндя╝Мх░Ж Term чФ▒ 0 хвЮхКаф╕║ 1я╝Мш╜мцНвф╕║ Candidateя╝Мш┐ЫхЕещАЙф╕╛чК╢цАБуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/architecture/raft-candidate-01.gif" alt="img"></p> <p>я╝И2я╝ЙцндцЧ╢я╝МA хРСцЙАцЬЙхЕ╢ф╗ЦшКВчВ╣хПСщАБцКХчеишп╖ц▒ВуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/architecture/raft-candidate-02.gif" alt="img"></p> <p>я╝И3я╝ЙхЕ╢хоГшКВчВ╣ф╝Ъхп╣цКХчеишп╖ц▒Вш┐ЫшбМхЫЮхдНя╝МхжВцЮЬш╢Еш┐ЗхНКцХ░ф╗еф╕КчЪДшКВчВ╣цКХчеиф║Жя╝МщВгф╣Ишпе Candidate х░▒ф╝ЪчлЛхН│хПШцИР Term ф╕║ 1 чЪД LeaderуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/architecture/raft-candidate-03.gif" alt="img"></p> <p>я╝И4я╝ЙLeader ф╝ЪхСицЬЯцАзхЬ░хПСщАБх┐Гш╖│ц╢ИцБпч╗ЩцЙАцЬЙ Followerя╝МFollower цОецФ╢хИ░х┐Гш╖│хМЕя╝Мф╝ЪщЗНцЦ░х╝АхзЛшобцЧ╢уАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/architecture/raft-candidate-04.gif" alt="img"></p> <h3 id="хдЪ-candidate-щАЙф╕╛"><a href="#хдЪ-candidate-щАЙф╕╛" class="header-anchor">#</a> хдЪ Candidate щАЙф╕╛</h3> <p>я╝И1я╝ЙхжВцЮЬцЬЙхдЪф╕к Follower цИРф╕║ Candidateя╝Мх╣╢ф╕ФцЙАшО╖х╛ЧчеицХ░чЫ╕хРМя╝МщВгф╣Их░▒щЬАшжБщЗНцЦ░х╝АхзЛцКХчеиуАВф╛ЛхжВф╕ЛхЫ╛ф╕н Candidate B хТМ Candidate D щГ╜хПСш╡╖ Term ф╕║ 4 чЪДщАЙф╕╛я╝Мф╕ФщГ╜шО╖х╛Чф╕дчеия╝МхЫацндщЬАшжБщЗНцЦ░х╝АхзЛцКХчеиуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/architecture/raft-multi-candidate-01.gif" alt="img"></p> <p>я╝И2я╝Йх╜УщЗНцЦ░х╝АхзЛцКХчеицЧ╢я╝МчФ▒ф║ОцпПф╕кшКВчВ╣шо╛ч╜очЪДщЪПцЬ║члЮщАЙш╢ЕцЧ╢цЧ╢щЧ┤ф╕НхРМя╝МхЫацндшГ╜ф╕Лф╕АцмбхЖНцмбхЗ║чО░хдЪф╕к Candidate х╣╢шО╖х╛ЧхРМца╖чеицХ░чЪДцжВчОЗх╛Иф╜ОуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/architecture/raft-multi-candidate-02.gif" alt="img"></p> <h2 id="хЫЫуАБцЧех┐ЧхдНхИ╢"><a href="#хЫЫуАБцЧех┐ЧхдНхИ╢" class="header-anchor">#</a> хЫЫуАБцЧех┐ЧхдНхИ╢</h2> <h3 id="цЧех┐Чца╝х╝П"><a href="#цЧех┐Чца╝х╝П" class="header-anchor">#</a> цЧех┐Чца╝х╝П</h3> <p><strong>цЧех┐ЧчФ▒хРлцЧех┐Чч┤вх╝Хя╝Иlog indexя╝ЙчЪДцЧех┐ЧцЭбчЫоя╝Иlog entryя╝Йч╗ДцИР</strong>уАВцпПф╕кцЧех┐ЧцЭбчЫохМЕхРлхоГшвлхИЫх╗║цЧ╢чЪД Term хП╖я╝Иф╕ЛхЫ╛ф╕нцЦ╣цбЖф╕нчЪДцХ░хнЧя╝Йя╝МхТМф╕Аф╕кхдНхИ╢чК╢цАБцЬ║щЬАшжБцЙзшбМчЪДцМЗф╗дуАВхжВцЮЬф╕Аф╕кцЧех┐ЧцЭбчЫошвлхдНхИ╢хИ░хНКцХ░ф╗еф╕КчЪДцЬНхКбхЩиф╕Кя╝Мх░▒швлшодф╕║хПпф╗ецПРф║дя╝ИCommitя╝Йф║ЖуАВ</p> <ul><li>цЧех┐ЧцЭбчЫоф╕нчЪД Term хП╖швлчФицЭецгАцЯецШпхРжхЗ║чО░ф╕Нф╕АшЗ┤чЪДцГЕхЖ╡уАВ</li> <li>цЧех┐ЧцЭбчЫоф╕нчЪДцЧех┐Чч┤вх╝Хя╝Иф╕Аф╕кцХ┤цХ░хА╝я╝ЙчФицЭешбицШОхоГхЬицЧех┐Чф╕нчЪДф╜Нч╜оуАВ</li></ul> <p><img src="https://pic3.zhimg.com/80/v2-ee29a89e4eb63468e142bb6103dbe4de_hd.jpg" alt="img"></p> <p>Raft цЧех┐ЧхРМцнеф┐ЭшпБхжВф╕Лф╕дчВ╣я╝Ъ</p> <ul><li>хжВцЮЬф╕НхРМцЧех┐Чф╕нчЪДф╕дф╕кцЧех┐ЧцЭбчЫоцЬЙчЭАчЫ╕хРМчЪДцЧех┐Чч┤вх╝ХхТМ Termя╝МхИЩ<strong>хоГф╗мцЙАхнШхВичЪДхС╜ф╗дцШпчЫ╕хРМчЪД</strong>уАВ
<ul><li>ш┐Щф╕кчЙ╣цАзхЯ║ф║Ош┐ЩцЭбхОЯхИЩя╝ЪLeader цЬАхдЪхЬиф╕Аф╕к Term хЖЕуАБхЬицМЗхоЪчЪДф╕Аф╕кцЧех┐Чч┤вх╝Хф╕КхИЫх╗║ф╕АцЭбцЧех┐ЧцЭбчЫоя╝МхРМцЧ╢цЧех┐ЧцЭбчЫохЬицЧех┐Чф╕нчЪДф╜Нч╜оф╣Яф╗ОцЭеф╕Нф╝ЪцФ╣хПШуАВ</li></ul></li> <li>хжВцЮЬф╕НхРМцЧех┐Чф╕нчЪДф╕дф╕кцЧех┐ЧцЭбчЫоцЬЙчЭАчЫ╕хРМчЪДцЧех┐Чч┤вх╝ХхТМ Termя╝МхИЩ<strong>хоГф╗мф╣ЛхЙНчЪДцЙАцЬЙцЭбчЫощГ╜цШпхоМхЕиф╕Аца╖чЪД</strong>уАВ
<ul><li>ш┐Щф╕кчЙ╣цАзчФ▒ <code>AppendEntries RPC</code> чЪДф╕Аф╕кчоАхНХчЪДф╕АшЗ┤цАзцгАцЯецЙАф┐ЭшпБуАВхЬихПСщАБ <code>AppendEntries RPC</code> цЧ╢я╝МLeader ф╝ЪцККцЦ░цЧех┐ЧцЭбчЫоф╣ЛхЙНчЪДцЧех┐ЧцЭбчЫочЪДцЧех┐Чч┤вх╝ХхТМ Term хП╖ф╕Аш╡╖хПСщАБуАВхжВцЮЬ Follower хЬихоГчЪДцЧех┐Чф╕нцЙ╛ф╕НхИ░хМЕхРлчЫ╕хРМцЧех┐Чч┤вх╝ХхТМ Term хП╖чЪДцЧех┐ЧцЭбчЫоя╝МхоГх░▒ф╝ЪцЛТч╗ЭцОецФ╢цЦ░чЪДцЧех┐ЧцЭбчЫоуАВ</li></ul></li></ul> <h3 id="цЧех┐ЧхдНхИ╢ц╡БчиЛ"><a href="#цЧех┐ЧхдНхИ╢ц╡БчиЛ" class="header-anchor">#</a> цЧех┐ЧхдНхИ╢ц╡БчиЛ</h3> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200201115848.png" alt="img"></p> <ol><li>Leader ш┤Яш┤гхдДчРЖцЙАцЬЙховцИ╖члпчЪДшп╖ц▒ВуАВ</li> <li>Leader цККшп╖ц▒Вф╜Ьф╕║цЧех┐ЧцЭбчЫохКахЕехИ░хоГчЪДцЧех┐Чф╕ня╝МчД╢хРОх╣╢шбМчЪДхРСхЕ╢ф╗ЦцЬНхКбхЩихПСщАБ <code>AppendEntries RPC</code> шп╖ц▒Вя╝МшжБц▒В Follower хдНхИ╢цЧех┐ЧцЭбчЫоуАВ</li> <li>Follower хдНхИ╢цИРхКЯхРОя╝Мш┐ФхЫЮчбошодц╢ИцБпуАВ</li> <li>х╜Уш┐Щф╕кцЧех┐ЧцЭбчЫошвлхНКцХ░ф╗еф╕КчЪДцЬНхКбхЩихдНхИ╢хРОя╝МLeader цПРф║дш┐Щф╕кцЧех┐ЧцЭбчЫохИ░хоГчЪДхдНхИ╢чК╢цАБцЬ║я╝Мх╣╢хРСховцИ╖члпш┐ФхЫЮцЙзшбМч╗УцЮЬуАВ</li></ol> <blockquote><p>ц│ицДПя╝ЪхжВцЮЬ Follower х┤йц║ГцИЦшАЕш┐РшбМч╝УцЕвя╝МхЖНцИЦшАЕч╜Сч╗Ьф╕вхМЕя╝МLeader ф╝Ъф╕НцЦнчЪДщЗНхдНх░ЭшпХхПСщАБ <code>AppendEntries RPC</code> шп╖ц▒В я╝Их░╜чобх╖▓ч╗ПхЫЮхдНф║ЖховцИ╖члпя╝Йя╝МчЫ┤хИ░цЙАцЬЙчЪДш╖ЯщЪПшАЕщГ╜цЬАч╗ИхдНхИ╢ф║ЖцЙАцЬЙчЪДцЧех┐ЧцЭбчЫоуАВ</p></blockquote> <p>ф╕ЛщЭвя╝МщАЪш┐Зф╕Ач╗ДхКихЫ╛цЭехКац╖▒шодшпЖя╝Ъ</p> <p>я╝И1я╝ЙцЭешЗкховцИ╖члпчЪДф┐оцФ╣щГ╜ф╝Ъшвлф╝ахЕе LeaderуАВц│ицДПшпеф┐оцФ╣ш┐ШцЬкшвлцПРф║дя╝МхПкцШпхЖЩхЕецЧех┐Чф╕нуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/architecture/raft-sync-log-01.gif" alt="img"></p> <p>я╝И2я╝ЙLeader ф╝ЪцККф┐оцФ╣хдНхИ╢хИ░цЙАцЬЙ FollowerуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/architecture/raft-sync-log-02.gif" alt="img"></p> <p>я╝И3я╝ЙLeader ф╝ЪчнЙх╛ЕхдзхдЪцХ░чЪД Follower ф╣Яш┐ЫшбМф║Жф┐оцФ╣я╝МчД╢хРОцЙНх░Жф┐оцФ╣цПРф║дуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/architecture/raft-sync-log-03.gif" alt="img"></p> <p>я╝И4я╝ЙцндцЧ╢ Leader ф╝ЪщАЪчЯечЪДцЙАцЬЙ Follower шойхоГф╗мф╣ЯцПРф║дф┐оцФ╣я╝МцндцЧ╢цЙАцЬЙшКВчВ╣чЪДхА╝ш╛╛цИРф╕АшЗ┤уАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/architecture/raft-sync-log-04.gif" alt="img"></p> <h3 id="цЧех┐Чф╕АшЗ┤цАз"><a href="#цЧех┐Чф╕АшЗ┤цАз" class="header-anchor">#</a> цЧех┐Чф╕АшЗ┤цАз</h3> <p>ф╕АшИмцГЕхЖ╡ф╕Ля╝МLeader хТМ Followers чЪДцЧех┐Чф┐ЭцМБф╕АшЗ┤я╝МхЫацндцЧех┐ЧцЭбчЫоф╕АшЗ┤цАзцгАцЯещАЪх╕╕ф╕Нф╝Ъхд▒ш┤еуАВчД╢шАМя╝МLeader х┤йц║ГхПпшГ╜ф╝Ъхп╝шЗ┤цЧех┐Чф╕Нф╕АшЗ┤я╝ЪцЧзчЪД Leader хПпшГ╜ц▓бцЬЙхоМхЕихдНхИ╢хоМцЧех┐Чф╕нчЪДцЙАцЬЙцЭбчЫоуАВ</p> <h4 id="leader-хТМ-follower-цЧех┐Чф╕Нф╕АшЗ┤чЪДхПпшГ╜"><a href="#leader-хТМ-follower-цЧех┐Чф╕Нф╕АшЗ┤чЪДхПпшГ╜" class="header-anchor">#</a> Leader хТМ Follower цЧех┐Чф╕Нф╕АшЗ┤чЪДхПпшГ╜</h4> <p>Leader хТМ Follower хПпшГ╜хнШхЬихдЪчзНцЧех┐Чф╕Нф╕АшЗ┤чЪДхПпшГ╜уАВ</p> <p><img src="https://pic4.zhimg.com/80/v2-d36c587901391cae50788061f568d24f_hd.jpg" alt="img"></p> <blockquote><p>ЁЯТб хЫ╛чд║шп┤цШОя╝Ъ</p> <p>ф╕КхЫ╛щШРш┐░ф║Ж Leader хТМ Follower хПпшГ╜хнШхЬихдЪчзНцЧех┐Чф╕Нф╕АшЗ┤чЪДхПпшГ╜я╝МцпПф╕Аф╕кцЦ╣цбЖшбичд║ф╕Аф╕кцЧех┐ЧцЭбчЫоя╝МщЗМщЭвчЪДцХ░хнЧшбичд║ф╗╗цЬЯхП╖ уАВ</p> <p>х╜Уф╕Аф╕к Leader цИРхКЯх╜УщАЙцЧ╢я╝МFollower хПпшГ╜хЗ║чО░ф╗еф╕ЛцГЕхЖ╡я╝Иa-fя╝Йя╝Ъ</p> <ul><li><strong>хнШхЬицЬкцЫ┤цЦ░цЧех┐ЧцЭбчЫо</strong>я╝МхжВя╝ИaуАБbя╝ЙуАВ</li> <li><strong>хнШхЬицЬкцПРф║дцЧех┐ЧцЭбчЫо</strong>я╝МхжВя╝ИcуАБdя╝ЙуАВ</li> <li>цИЦ<strong>ф╕дчзНцГЕхЖ╡щГ╜хнШхЬи</strong>я╝МхжВя╝ИeуАБfя╝ЙуАВ</li></ul> <p><em>ф╛ЛхжВя╝МхЬ║цЩп f хПпшГ╜ф╝Ъш┐Щца╖хПСчФЯя╝МцЯРцЬНхКбхЩихЬи Term2 чЪДцЧ╢хАЩцШп Leaderя╝Мх╖▓щЩДхКаф║Жф╕Аф║ЫцЧех┐ЧцЭбчЫохИ░шЗкх╖▒чЪДцЧех┐Чф╕ня╝Мф╜ЖхЬицПРф║дф╣ЛхЙНх░▒х┤йц║Гф║Жя╝Ых╛Их┐лш┐Щф╕кцЬ║хЩих░▒швлщЗНхРпф║Жя╝МхЬи Term3 щЗНцЦ░швлщАЙф╕║ Leaderя╝Мх╣╢ф╕ФхПИхвЮхКаф║Жф╕Аф║ЫцЧех┐ЧцЭбчЫохИ░шЗкх╖▒чЪДцЧех┐Чф╕ня╝ЫхЬи Term 2 хТМ Term 3 чЪДцЧех┐ЧшвлцПРф║дф╣ЛхЙНя╝Мш┐Щф╕кцЬНхКбхЩихПИхоХцЬ║ф║Жя╝Мх╣╢ф╕ФхЬицОеф╕ЛцЭечЪДхЗаф╕кф╗╗цЬЯщЗМф╕АчЫ┤хдДф║ОхоХцЬ║чК╢цАБ</em>уАВ</p></blockquote> <h4 id="leader-хТМ-follower-цЧех┐Чф╕АшЗ┤чЪДф┐ЭшпБ"><a href="#leader-хТМ-follower-цЧех┐Чф╕АшЗ┤чЪДф┐ЭшпБ" class="header-anchor">#</a> Leader хТМ Follower цЧех┐Чф╕АшЗ┤чЪДф┐ЭшпБ</h4> <p>Leader щАЪш┐Зх╝║хИ╢ Followers хдНхИ╢хоГчЪДцЧех┐ЧцЭехдДчРЖцЧех┐ЧчЪДф╕Нф╕АшЗ┤я╝М<strong>Followers ф╕КчЪДф╕Нф╕АшЗ┤чЪДцЧех┐Чф╝Ъшвл Leader чЪДцЧех┐ЧшжЖчЫЦ</strong>уАВ</p> <ul><li><p>Leader ф╕║ф║Жф╜┐ Followers чЪДцЧех┐ЧхРМшЗкх╖▒чЪДф╕АшЗ┤я╝МLeader щЬАшжБцЙ╛хИ░ Followers хРМхоГчЪДцЧех┐Чф╕АшЗ┤чЪДхЬ░цЦ╣я╝МчД╢хРОшжЖчЫЦ Followers хЬишпеф╜Нч╜оф╣ЛхРОчЪДцЭбчЫоуАВ</p></li> <li><p>Leader ф╝Ъф╗ОхРОх╛АхЙНшпХя╝МцпПцмбцЧех┐ЧцЭбчЫохд▒ш┤ехРОх░ЭшпХхЙНф╕Аф╕кцЧех┐ЧцЭбчЫоя╝МчЫ┤хИ░цИРхКЯцЙ╛хИ░цпПф╕к Follower чЪДцЧех┐Чф╕АшЗ┤ф╜НчВ╣я╝МчД╢хРОхРСхРОщАРцЭбшжЖчЫЦ Followers хЬишпеф╜Нч╜оф╣ЛхРОчЪДцЭбчЫоуАВ</p></li></ul> <h2 id="ф║ФуАБхоЙхЕицАз"><a href="#ф║ФуАБхоЙхЕицАз" class="header-anchor">#</a> ф║ФуАБхоЙхЕицАз</h2> <p>хЙНщЭвцППш┐░ф║Ж Raft чоЧц│ХцШпхжВф╜ХщАЙф╕╛ Leader хТМхдНхИ╢цЧех┐ЧчЪДуАВ</p> <p>Raft ш┐ШхвЮхКаф║Жф╕Аф║ЫщЩРхИ╢цЭехоМхЦД Raft чоЧц│Хя╝Мф╗еф┐ЭшпБхоЙхЕицАзя╝Ъф┐ЭшпБф║Жф╗╗цДП Leader хп╣ф║Оч╗ЩхоЪчЪД Termя╝МщГ╜цЛецЬЙф║Жф╣ЛхЙН Term чЪДцЙАцЬЙшвлцПРф║дчЪДцЧех┐ЧцЭбчЫоуАВ</p> <h3 id="щАЙф╕╛щЩРхИ╢"><a href="#щАЙф╕╛щЩРхИ╢" class="header-anchor">#</a> щАЙф╕╛щЩРхИ╢</h3> <p>цЛецЬЙцЬАцЦ░чЪДх╖▓цПРф║дчЪДцЧех┐ЧцЭбчЫочЪД Follower цЙНцЬЙш╡Дца╝цИРф╕║ LeaderуАВ</p> <p>Raft ф╜┐чФицКХчеичЪДцЦ╣х╝ПцЭещШ╗цнвф╕Аф╕к Candidate ш╡вх╛ЧщАЙф╕╛щЩдщЭЮш┐Щф╕к Candidate хМЕхРлф║ЖцЙАцЬЙх╖▓ч╗ПцПРф║дчЪДцЧех┐ЧцЭбчЫоуАВ Candidate ф╕║ф║Жш╡вх╛ЧщАЙф╕╛х┐Ещб╗шБФч│╗щЫЖч╛дф╕нчЪДхдзщГихИЖшКВчВ╣я╝Мш┐ЩцДПхС│чЭАцпПф╕Аф╕кх╖▓ч╗ПцПРф║дчЪДцЧех┐ЧцЭбчЫохЬиш┐Щф║ЫцЬНхКбхЩишКВчВ╣ф╕ншВпхоЪхнШхЬиф║ОшЗ│х░Сф╕Аф╕кшКВчВ╣ф╕КуАВхжВцЮЬ Candidate чЪДцЧех┐ЧшЗ│х░СхТМхдзхдЪцХ░чЪДцЬНхКбхЩишКВчВ╣ф╕Аца╖цЦ░я╝Иш┐Щф╕кцЦ░чЪДхоЪф╣Йф╝ЪхЬиф╕ЛщЭвшоишо║я╝Йя╝МщВгф╣Иф╗Цф╕АхоЪцМБцЬЙф║ЖцЙАцЬЙх╖▓ч╗ПцПРф║дчЪДцЧех┐ЧцЭбчЫоуАВ</p> <p><code>RequestVote RPC</code> хоЮчО░ф║Жш┐Щца╖чЪДщЩРхИ╢я╝Ъ<strong>RequestVote RPC ф╕нхМЕхРлф║Ж Candidate чЪДцЧех┐Чф┐бцБпя╝М Follower ф╝ЪцЛТч╗ЭцОЙщВгф║ЫцЧех┐Чц▓бцЬЙшЗкх╖▒цЦ░чЪДцКХчеишп╖ц▒В</strong>уАВ</p> <p>хжВф╜ХхИдцЦнхУкф╕кцЧех┐ЧцЭбчЫоцпФш╛ГцЦ░я╝Я</p> <p>Raft щАЪш┐ЗцпФш╛Гф╕дф╗╜цЧех┐Чф╕нцЬАхРОф╕АцЭбцЧех┐ЧцЭбчЫочЪДцЧех┐Чч┤вх╝ХхТМ Term цЭехИдцЦнхУкф╕кцЧех┐ЧцпФш╛ГцЦ░уАВ</p> <ul><li>хЕИхИдцЦн Termя╝МхУкф╕кцХ░хА╝хдзхН│ф╗гшбихУкф╕кцЧех┐ЧцпФш╛ГцЦ░уАВ</li> <li>хжВцЮЬ Term чЫ╕хРМя╝МхЖНцпФш╛Г цЧех┐Чч┤вх╝Хя╝МхУкф╕кцХ░хА╝хдзхН│ф╗гшбихУкф╕кцЧех┐ЧцпФш╛ГцЦ░уАВ</li></ul> <h3 id="цПРф║дцЧзф╗╗цЬЯчЪДцЧех┐ЧцЭбчЫо"><a href="#цПРф║дцЧзф╗╗цЬЯчЪДцЧех┐ЧцЭбчЫо" class="header-anchor">#</a> цПРф║дцЧзф╗╗цЬЯчЪДцЧех┐ЧцЭбчЫо</h3> <p>ф╕Аф╕кх╜УхЙН Term чЪДцЧех┐ЧцЭбчЫошвлхдНхИ╢хИ░ф║ЖхНКцХ░ф╗еф╕КчЪДцЬНхКбхЩиф╕Кя╝МLeader х░▒шодф╕║хоГцШпхПпф╗ешвлцПРф║дчЪДуАВхжВцЮЬш┐Щф╕к Leader хЬицПРф║дцЧех┐ЧцЭбчЫохЙНх░▒ф╕Лч║┐ф║Жя╝МхРОч╗нчЪД Leader хПпшГ╜ф╝ЪшжЖчЫЦцОЙш┐Щф╕кцЧех┐ЧцЭбчЫоуАВ</p> <p><img src="https://pic4.zhimg.com/80/v2-12a5ebab63781f9ec49e14e331775537_hd.jpg" alt="img"></p> <blockquote><p>ЁЯТб хЫ╛чд║шп┤цШОя╝Ъ</p> <p>ф╕КхЫ╛шзгщЗКф║Жф╕║ф╗Аф╣И Leader цЧац│Ххп╣цЧз Term чЪДцЧех┐ЧцЭбчЫош┐ЫшбМцПРф║дуАВ</p> <ul><li>щШ╢цо╡ (a) я╝МS1 цШп Leaderя╝Мф╕Ф S1 хЖЩхЕецЧех┐ЧцЭбчЫоф╕║ (Term 2я╝МцЧех┐Чч┤вх╝Х 2я╝Йя╝МхПкцЬЙ S2 хдНхИ╢ф║Жш┐Щф╕кцЧех┐ЧцЭбчЫоуАВ</li> <li>щШ╢цо╡ (b)я╝МS1 ф╕Лч║┐я╝МS5 швлщАЙф╕╛ф╕║ Term3 чЪД LeaderуАВS5 хЖЩхЕецЧех┐ЧцЭбчЫоф╕║ (Term 3я╝МцЧех┐Чч┤вх╝Х 2я╝ЙуАВ</li> <li>щШ╢цо╡ (c)я╝МS5 ф╕Лч║┐я╝МS1 щЗНцЦ░ф╕Кч║┐я╝Мх╣╢швлщАЙф╕╛ф╕║ Term4 чЪД LeaderуАВцндцЧ╢я╝МTerm 2 чЪДщВгцЭбцЧех┐ЧцЭбчЫох╖▓ч╗ПшвлхдНхИ╢хИ░ф║ЖщЫЖч╛дф╕нчЪДхдзхдЪцХ░шКВчВ╣ф╕Кя╝Мф╜ЖцШпш┐Шц▓бцЬЙшвлцПРф║дуАВ</li> <li>щШ╢цо╡ (d)я╝МS1 хЖНцмбф╕Лч║┐я╝МS5 щЗНцЦ░ф╕Кч║┐я╝Мх╣╢швлщЗНцЦ░щАЙф╕╛ф╕║ Term3 чЪД LeaderуАВчД╢хРО S5 шжЖчЫЦф║ЖцЧех┐Чч┤вх╝Х 2 хдДчЪДцЧех┐ЧуАВ</li> <li>щШ╢цо╡ (e)я╝МхжВцЮЬщШ╢цо╡ (d) ш┐ШцЬкхПСчФЯя╝МхН│ S1 хЖНцмбф╕Лч║┐ф╣ЛхЙНя╝МS1 цККшЗкх╖▒ф╕╗хп╝чЪДцЧех┐ЧцЭбчЫохдНхИ╢хИ░ф║ЖхдзхдЪцХ░шКВчВ╣ф╕Кя╝МщВгф╣ИхЬихРОч╗н Term щЗМщЭвш┐Щф║ЫцЦ░цЧех┐ЧцЭбчЫох░▒ф╝ЪшвлцПРф║дуАВш┐Щца╖хЬихРМф╕АцЧ╢хИ╗х░▒хРМцЧ╢ф┐ЭшпБф║Жя╝Мф╣ЛхЙНчЪДцЙАцЬЙцЧзцЧех┐ЧцЭбчЫох░▒ф╝ЪшвлцПРф║дуАВ</li></ul></blockquote> <p><strong>Raft ц░╕ш┐Ьф╕Нф╝ЪщАЪш┐ЗшобчоЧхЙпцЬмцХ░чЫочЪДцЦ╣х╝ПхО╗цПРф║дф╕Аф╕кф╣ЛхЙН Term хЖЕчЪДцЧех┐ЧцЭбчЫо</strong>уАВхПкцЬЙ Leader х╜УхЙН Term щЗМчЪДцЧех┐ЧцЭбчЫощАЪш┐ЗшобчоЧхЙпцЬмцХ░чЫохПпф╗ешвлцПРф║дя╝Ыф╕АцЧжх╜УхЙН Term чЪДцЧех┐ЧцЭбчЫоф╗еш┐ЩчзНцЦ╣х╝ПшвлцПРф║дя╝МщВгф╣ИчФ▒ф║ОцЧех┐ЧхМ╣щЕНчЙ╣цАзя╝Мф╣ЛхЙНчЪДцЧех┐ЧцЭбчЫоф╣ЯщГ╜ф╝ЪшвлщЧ┤цОечЪДцПРф║дуАВ</p> <p>х╜У Leader хдНхИ╢ф╣ЛхЙНф╗╗цЬЯщЗМчЪДцЧех┐ЧцЧ╢я╝МRaft ф╝Ъф╕║цЙАцЬЙцЧех┐Чф┐ЭчХЩхОЯхзЛчЪД Termя╝Мш┐ЩхЬицПРф║дшзДхИЩф╕Кф║зчФЯф║ЖщвЭхдЦчЪДхдНцЭВцАзуАВхЬихЕ╢ф╗ЦчЪДф╕АшЗ┤цАзчоЧц│Хф╕ня╝МхжВцЮЬф╕Аф╕кцЦ░чЪДщвЖхп╝ф║║шжБщЗНцЦ░хдНхИ╢ф╣ЛхЙНчЪДф╗╗цЬЯщЗМчЪДцЧех┐ЧцЧ╢я╝МхоГх┐Ещб╗ф╜┐чФих╜УхЙНцЦ░чЪДф╗╗цЬЯхП╖уАВRaft ф╜┐чФичЪДцЦ╣ц│ХцЫ┤хКахо╣цШУш╛ихИлхЗ║цЧех┐Чя╝МхЫаф╕║хоГхПпф╗ещЪПчЭАцЧ╢щЧ┤хТМцЧех┐ЧчЪДхПШхМЦхп╣цЧех┐Чч╗┤цКдчЭАхРМф╕Аф╕кф╗╗цЬЯч╝ЦхП╖уАВхПжхдЦя╝МхТМхЕ╢ф╗ЦчЪДчоЧц│ХчЫ╕цпФя╝МRaft ф╕нчЪДцЦ░щвЖхп╝ф║║хПкщЬАшжБхПСщАБцЫ┤х░СцЧех┐ЧцЭбчЫоя╝ИхЕ╢ф╗ЦчоЧц│Хф╕нх┐Ещб╗хЬиф╗Цф╗мшвлцПРф║дф╣ЛхЙНхПСщАБцЫ┤хдЪчЪДхЖЧф╜ЩцЧех┐ЧцЭбчЫоцЭеф╕║ф╗Цф╗мщЗНцЦ░ч╝ЦхП╖я╝ЙуАВ</p> <h2 id="хЕнуАБцЧех┐ЧхОЛч╝й"><a href="#хЕнуАБцЧех┐ЧхОЛч╝й" class="header-anchor">#</a> хЕнуАБцЧех┐ЧхОЛч╝й</h2> <p>хЬихоЮщЩЕчЪДч│╗ч╗Яф╕ня╝Мф╕НшГ╜шойцЧех┐ЧцЧащЩРшЖишГАя╝МхРжхИЩч│╗ч╗ЯщЗНхРпцЧ╢щЬАшжБшК▒х╛ИщХ┐чЪДцЧ╢щЧ┤ш┐ЫшбМцБвхдНя╝Мф╗ОшАМх╜▒хУНхПпчФицАзуАВRaft щЗЗчФихп╣цХ┤ф╕кч│╗ч╗Яш┐ЫшбМх┐лчЕзцЭешзгхЖ│я╝Мх┐лчЕзф╣ЛхЙНчЪДцЧех┐ЧщГ╜хПпф╗еф╕вх╝ГуАВ</p> <p>цпПф╕кхЙпцЬмчЛмчлЛчЪДхп╣шЗкх╖▒чЪДч│╗ч╗ЯчК╢цАБчФЯцИРх┐лчЕзя╝Мх╣╢ф╕ФхПкшГ╜хп╣х╖▓ч╗ПцПРф║дчЪДцЧех┐ЧцЭбчЫочФЯцИРх┐лчЕзуАВ</p> <p>х┐лчЕзхМЕхРлф╗еф╕ЛхЖЕхо╣я╝Ъ</p> <ul><li>цЧех┐ЧхЕГцХ░цНоуАВцЬАхРОф╕АцЭбх╖▓цПРф║дчЪДцЧех┐ЧцЭбчЫочЪДцЧех┐Чч┤вх╝ХхТМ TermуАВш┐Щф╕дф╕кхА╝хЬих┐лчЕзф╣ЛхРОчЪДчммф╕АцЭбцЧех┐ЧцЭбчЫочЪД <code>AppendEntries RPC</code> чЪДхоМцХ┤цАзцгАцЯечЪДцЧ╢хАЩф╝ЪшвлчФиф╕КуАВ</li> <li>ч│╗ч╗Ях╜УхЙНчК╢цАБуАВ</li></ul> <p>х╜У Leader шжБхПСщАБцЯРф╕кцЧех┐ЧцЭбчЫоя╝МшР╜хРОхдкхдЪчЪД Follower чЪДцЧех┐ЧцЭбчЫоф╝Ъшвлф╕вх╝Гя╝МLeader ф╝Ъх░Жх┐лчЕзхПСч╗Щ FollowerуАВцИЦшАЕцЦ░ф╕Кч║┐ф╕АхП░цЬ║хЩицЧ╢я╝Мф╣Яф╝ЪхПСщАБх┐лчЕзч╗ЩхоГуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200201220628.png" alt="img"></p> <p><strong>чФЯцИРх┐лчЕзчЪДщвСчОЗшжБщАВф╕н</strong>я╝МщвСчОЗш┐ЗщлШф╝Ъц╢ИшАЧхдзщЗП I/O х╕жхо╜я╝ЫщвСчОЗш┐Зф╜Оя╝Мф╕АцЧжщЬАшжБцЙзшбМцБвхдНцУНф╜Ья╝Мф╝Ъф╕вхд▒хдзщЗПцХ░цНоя╝Мх╜▒хУНхПпчФицАзуАВцОишНРх╜УцЧех┐Чш╛╛хИ░цЯРф╕кхЫ║хоЪчЪДхдзх░ПцЧ╢чФЯцИРх┐лчЕзуАВ</p> <p>чФЯцИРф╕Ацмбх┐лчЕзхПпшГ╜шАЧцЧ╢ш┐ЗщХ┐я╝Мх╜▒хУНцнгх╕╕цЧех┐ЧхРМцнеуАВхПпф╗ещАЪш┐Зф╜┐чФи copy-on-write цКАцЬпщБ┐хЕНх┐лчЕзш┐ЗчиЛх╜▒хУНцнгх╕╕цЧех┐ЧхРМцнеуАВ</p> <blockquote><p>шп┤цШОя╝ЪцЬмцЦЗф╗ЕщШРш┐░ Raft чоЧц│ХчЪДца╕х┐ГхЖЕхо╣я╝Мф╕НхМЕцЛмчоЧц│Хшо║шпБуАБшпДф╝░чнЙ</p></blockquote> <h2 id="хПВшАГш╡ДцЦЩ"><a href="#хПВшАГш╡ДцЦЩ" class="header-anchor">#</a> хПВшАГш╡ДцЦЩ</h2> <ul><li><a href="https://ramcloud.atlassian.net/wiki/download/attachments/6586375/raft.pdf" target="_blank" rel="noopener noreferrer">Raft ф╕АшЗ┤цАзчоЧц│Хшо║цЦЗхОЯцЦЗ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/maemual/raft-zh_cn/blob/master/raft-zh_cn.md" target="_blank" rel="noopener noreferrer">Raft ф╕АшЗ┤цАзчоЧц│Хшо║цЦЗшпСцЦЗ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.youtube.com/watch?v=YbZ3zDzDnrw&amp;feature=youtu.be" target="_blank" rel="noopener noreferrer">Raft ф╜ЬшАЕшо▓шзгшзЖщвС<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www2.cs.uh.edu/~paris/6360/PowerPoint/Raft.ppt" target="_blank" rel="noopener noreferrer">Raft ф╜ЬшАЕшо▓шзгшзЖщвСхп╣х║ФчЪД PPT<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.jdon.com/artichect/raft.html" target="_blank" rel="noopener noreferrer">хИЖх╕Гх╝Пч│╗ч╗ЯчЪД Raft чоЧц│Х<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://thesecretlivesofdata.com/raft" target="_blank" rel="noopener noreferrer">Raft: Understandable Distributed Consensus<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - ф╕Аф╕кхКичФ╗цХЩчиЛ</li> <li><a href="https://raft.github.io/" target="_blank" rel="noopener noreferrer">The Raft Consensus Algorithm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - ф╕Аф╕кф║дф║Тх╝ПхКичФ╗цХЩчиЛ</li> <li><a href="https://github.com/sofastack/sofa-jraft" target="_blank" rel="noopener noreferrer">sofa-jraft<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - шЪВшЪБщЗСцЬНчЪД Raft чоЧц│ХхоЮчО░х║Уя╝ИJava чЙИя╝Й</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/design/edit/master/docs/distributed/хИЖх╕Гх╝ПчоЧц│ХRaft.md" target="_blank" rel="noopener noreferrer">х╕охКйцИСф╗мцФ╣хЦДцндщб╡щЭвя╝Б</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">ф╕КцмбцЫ┤цЦ░:</span> <span class="time">2 months ago</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/design/assets/js/app.31535b90.js" defer></script><script src="/design/assets/js/4.843d76c1.js" defer></script><script src="/design/assets/js/31.e6497a3e.js" defer></script><script src="/design/assets/js/5.eb6f8f38.js" defer></script>
  </body>
</html>
