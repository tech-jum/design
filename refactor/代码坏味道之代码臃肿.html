<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ф╗гчаБхЭПхС│щБУф╣Лф╗гчаБшЗГшВ┐ | DESIGN</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/design/favicon.ico">
    <meta name="description" content="DESIGN">
    
    <link rel="preload" href="/design/assets/css/0.styles.3c2ef156.css" as="style"><link rel="preload" href="/design/assets/js/app.31535b90.js" as="script"><link rel="preload" href="/design/assets/js/4.843d76c1.js" as="script"><link rel="preload" href="/design/assets/js/72.f0a76070.js" as="script"><link rel="preload" href="/design/assets/js/5.eb6f8f38.js" as="script"><link rel="prefetch" href="/design/assets/js/10.07f2584d.js"><link rel="prefetch" href="/design/assets/js/11.df166aa0.js"><link rel="prefetch" href="/design/assets/js/12.b7ade635.js"><link rel="prefetch" href="/design/assets/js/13.151414b4.js"><link rel="prefetch" href="/design/assets/js/14.5dd04c5d.js"><link rel="prefetch" href="/design/assets/js/15.14e9a635.js"><link rel="prefetch" href="/design/assets/js/16.8728dd67.js"><link rel="prefetch" href="/design/assets/js/17.1686b754.js"><link rel="prefetch" href="/design/assets/js/18.d815545e.js"><link rel="prefetch" href="/design/assets/js/19.d846ce2f.js"><link rel="prefetch" href="/design/assets/js/20.1dd8edb9.js"><link rel="prefetch" href="/design/assets/js/21.38ae8c29.js"><link rel="prefetch" href="/design/assets/js/22.26dcb0f5.js"><link rel="prefetch" href="/design/assets/js/23.d996c1df.js"><link rel="prefetch" href="/design/assets/js/24.84573b57.js"><link rel="prefetch" href="/design/assets/js/25.362291b4.js"><link rel="prefetch" href="/design/assets/js/26.287f6746.js"><link rel="prefetch" href="/design/assets/js/27.665cd644.js"><link rel="prefetch" href="/design/assets/js/28.2d373aaa.js"><link rel="prefetch" href="/design/assets/js/29.18195cfe.js"><link rel="prefetch" href="/design/assets/js/30.b8a39bf2.js"><link rel="prefetch" href="/design/assets/js/31.e6497a3e.js"><link rel="prefetch" href="/design/assets/js/32.7c78886f.js"><link rel="prefetch" href="/design/assets/js/33.3a07575c.js"><link rel="prefetch" href="/design/assets/js/34.53801173.js"><link rel="prefetch" href="/design/assets/js/35.fe943393.js"><link rel="prefetch" href="/design/assets/js/36.e9ecc031.js"><link rel="prefetch" href="/design/assets/js/37.48dcf161.js"><link rel="prefetch" href="/design/assets/js/38.bc65c12c.js"><link rel="prefetch" href="/design/assets/js/39.76a7947c.js"><link rel="prefetch" href="/design/assets/js/40.57c60fe7.js"><link rel="prefetch" href="/design/assets/js/41.64d1acff.js"><link rel="prefetch" href="/design/assets/js/42.2b13267e.js"><link rel="prefetch" href="/design/assets/js/43.bc12e4a9.js"><link rel="prefetch" href="/design/assets/js/44.05348389.js"><link rel="prefetch" href="/design/assets/js/45.a821f14b.js"><link rel="prefetch" href="/design/assets/js/46.4f6121ee.js"><link rel="prefetch" href="/design/assets/js/47.2331491d.js"><link rel="prefetch" href="/design/assets/js/48.e99e2990.js"><link rel="prefetch" href="/design/assets/js/49.97ac4425.js"><link rel="prefetch" href="/design/assets/js/50.9561222b.js"><link rel="prefetch" href="/design/assets/js/51.5a3682fc.js"><link rel="prefetch" href="/design/assets/js/52.41f6da09.js"><link rel="prefetch" href="/design/assets/js/53.f3cbdb44.js"><link rel="prefetch" href="/design/assets/js/54.b64ed791.js"><link rel="prefetch" href="/design/assets/js/55.0b2515c6.js"><link rel="prefetch" href="/design/assets/js/56.f87ff124.js"><link rel="prefetch" href="/design/assets/js/57.c351d3a3.js"><link rel="prefetch" href="/design/assets/js/58.68c1d0ee.js"><link rel="prefetch" href="/design/assets/js/59.8cc7450d.js"><link rel="prefetch" href="/design/assets/js/6.cbcf7f30.js"><link rel="prefetch" href="/design/assets/js/60.f2f8871f.js"><link rel="prefetch" href="/design/assets/js/61.8922cbcd.js"><link rel="prefetch" href="/design/assets/js/62.ccb7c5ee.js"><link rel="prefetch" href="/design/assets/js/63.8191a330.js"><link rel="prefetch" href="/design/assets/js/64.1d881bbb.js"><link rel="prefetch" href="/design/assets/js/65.f4089278.js"><link rel="prefetch" href="/design/assets/js/66.66cf1b40.js"><link rel="prefetch" href="/design/assets/js/67.27e2cf6f.js"><link rel="prefetch" href="/design/assets/js/68.6a688bec.js"><link rel="prefetch" href="/design/assets/js/69.f59b5cd7.js"><link rel="prefetch" href="/design/assets/js/7.159ffade.js"><link rel="prefetch" href="/design/assets/js/70.aa52fe1c.js"><link rel="prefetch" href="/design/assets/js/71.f7f17e5c.js"><link rel="prefetch" href="/design/assets/js/73.b454f9b3.js"><link rel="prefetch" href="/design/assets/js/74.748903ca.js"><link rel="prefetch" href="/design/assets/js/75.1abb30fc.js"><link rel="prefetch" href="/design/assets/js/76.38081e86.js"><link rel="prefetch" href="/design/assets/js/77.631fd31e.js"><link rel="prefetch" href="/design/assets/js/78.b642c4ea.js"><link rel="prefetch" href="/design/assets/js/79.09f8c9ad.js"><link rel="prefetch" href="/design/assets/js/8.bbc07c86.js"><link rel="prefetch" href="/design/assets/js/80.15162b19.js"><link rel="prefetch" href="/design/assets/js/81.0a02424d.js"><link rel="prefetch" href="/design/assets/js/82.0a6de1bd.js"><link rel="prefetch" href="/design/assets/js/83.8bd118c7.js"><link rel="prefetch" href="/design/assets/js/84.c9db97ea.js"><link rel="prefetch" href="/design/assets/js/85.ea23932a.js"><link rel="prefetch" href="/design/assets/js/86.a70e5ac7.js"><link rel="prefetch" href="/design/assets/js/9.c3d97cd4.js"><link rel="prefetch" href="/design/assets/js/vendors~flowchart.5fa23d41.js"><link rel="prefetch" href="/design/assets/js/vendors~notification.4b668bb8.js">
    <link rel="stylesheet" href="/design/assets/css/0.styles.3c2ef156.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/design/" class="home-link router-link-active"><img src="https://raw.githubusercontent.com/dunwu/images/dev/common/dunwu-logo-200.png" alt="DESIGN" class="logo"> <span class="site-name can-hide">DESIGN</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/design/architecture/" class="nav-link">
  цЮ╢цЮД
</a></div><div class="nav-item"><a href="/design/distributed/" class="nav-link">
  хИЖх╕Гх╝П
</a></div><div class="nav-item"><a href="/design/pattern/" class="nav-link">
  шо╛шобцибх╝П
</a></div><div class="nav-item"><a href="/design/refactor/" class="nav-link router-link-active">
  щЗНцЮД
</a></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ЁЯОп хНЪхов
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/dunwu/design" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/design/architecture/" class="nav-link">
  цЮ╢цЮД
</a></div><div class="nav-item"><a href="/design/distributed/" class="nav-link">
  хИЖх╕Гх╝П
</a></div><div class="nav-item"><a href="/design/pattern/" class="nav-link">
  шо╛шобцибх╝П
</a></div><div class="nav-item"><a href="/design/refactor/" class="nav-link router-link-active">
  щЗНцЮД
</a></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ЁЯОп хНЪхов
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/dunwu/design" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ф╗гчаБхЭПхС│щБУф╣Лф╗гчаБшЗГшВ┐</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#хЯ║цЬмч▒╗хЮЛхБПцЙз" class="sidebar-link">хЯ║цЬмч▒╗хЮЛхБПцЙз</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#щЧощвШхОЯхЫа" class="sidebar-link">щЧощвШхОЯхЫа</a></li><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#шзгхЖ│цЦ╣ц│Х" class="sidebar-link">шзгхЖ│цЦ╣ц│Х</a></li><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#цФ╢чЫК" class="sidebar-link">цФ╢чЫК</a></li><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#щЗНцЮДцЦ╣ц│Хшп┤цШО" class="sidebar-link">щЗНцЮДцЦ╣ц│Хшп┤цШО</a></li></ul></li><li><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#цХ░цНоц│ехЫв" class="sidebar-link">цХ░цНоц│ехЫв</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#щЧощвШхОЯхЫа-2" class="sidebar-link">щЧощвШхОЯхЫа</a></li><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#шзгхЖ│цЦ╣ц│Х-2" class="sidebar-link">шзгхЖ│цЦ╣ц│Х</a></li><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#цФ╢чЫК-2" class="sidebar-link">цФ╢чЫК</a></li><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#ф╜ХцЧ╢х┐╜чХе" class="sidebar-link">ф╜ХцЧ╢х┐╜чХе</a></li><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#щЗНцЮДцЦ╣ц│Хшп┤цШО-2" class="sidebar-link">щЗНцЮДцЦ╣ц│Хшп┤цШО</a></li></ul></li><li><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#ш┐ЗхдзчЪДч▒╗" class="sidebar-link">ш┐ЗхдзчЪДч▒╗</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#щЧощвШхОЯхЫа-3" class="sidebar-link">щЧощвШхОЯхЫа</a></li><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#шзгхЖ│цЦ╣ц│Х-3" class="sidebar-link">шзгхЖ│цЦ╣ц│Х</a></li><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#цФ╢чЫК-3" class="sidebar-link">цФ╢чЫК</a></li><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#щЗНцЮДцЦ╣ц│Хшп┤цШО-3" class="sidebar-link">щЗНцЮДцЦ╣ц│Хшп┤цШО</a></li></ul></li><li><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#ш┐ЗщХ┐хЗ╜цХ░" class="sidebar-link">ш┐ЗщХ┐хЗ╜цХ░</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#щЧощвШчЪДхОЯхЫа" class="sidebar-link">щЧощвШчЪДхОЯхЫа</a></li><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#шзгхЖ│хЗ╜цХ░" class="sidebar-link">шзгхЖ│хЗ╜цХ░</a></li><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#цФ╢чЫК-4" class="sidebar-link">цФ╢чЫК</a></li><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#цАзшГ╜" class="sidebar-link">цАзшГ╜</a></li><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#щЗНцЮДцЦ╣ц│Хшп┤цШО-4" class="sidebar-link">щЗНцЮДцЦ╣ц│Хшп┤цШО</a></li></ul></li><li><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#ш┐ЗщХ┐хПВцХ░хИЧ" class="sidebar-link">ш┐ЗщХ┐хПВцХ░хИЧ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#щЧощвШхОЯхЫа-4" class="sidebar-link">щЧощвШхОЯхЫа</a></li><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#шзгхЖ│цЦ╣цбИ" class="sidebar-link">шзгхЖ│цЦ╣цбИ</a></li><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#цФ╢чЫК-5" class="sidebar-link">цФ╢чЫК</a></li><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#ф╜ХцЧ╢х┐╜чХе-2" class="sidebar-link">ф╜ХцЧ╢х┐╜чХе</a></li><li class="sidebar-sub-header"><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#щЗНцЮДцЦ╣ц│Хшп┤цШО-5" class="sidebar-link">щЗНцЮДцЦ╣ц│Хшп┤цШО</a></li></ul></li><li><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#цЙйх▒ХщШЕшп╗" class="sidebar-link">цЙйх▒ХщШЕшп╗</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/design/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.html#хПВшАГш╡ДцЦЩ" class="sidebar-link">хПВшАГш╡ДцЦЩ</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><p>ч┐╗шпСшЗкя╝Ъhttps://sourcemaking.com/refactoring/smells/bloaters</p> <p><strong>ф╗гчаБшЗГшВ┐(Bloated)ш┐Щч╗ДхЭПхС│щБУцДПхС│чЭАя╝Ъф╗гчаБф╕нчЪДч▒╗уАБхЗ╜цХ░уАБхнЧцо╡ц▓бцЬЙч╗Пш┐ЗхРИчРЖчЪДч╗Дч╗Зя╝МхПкцШпчоАхНХчЪДхаЖчаМш╡╖цЭеуАВш┐Щф╕Ач▒╗хЮЛчЪДщЧощвШщАЪх╕╕хЬиф╗гчаБчЪДхИЭцЬЯх╣╢ф╕НцШОцШ╛я╝Мф╜ЖцШпщЪПчЭАф╗гчаБшзДцибчЪДхвЮщХ┐шАМщАРц╕Рчзпч┤пя╝ИчЙ╣хИлцШпх╜Уц▓бцЬЙф║║хКкхКЫхО╗ца╣щЩдхоГф╗мцЧ╢я╝ЙуАВ</strong></p></blockquote> <ul><li><a href="#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%81%8F%E6%89%A7">хЯ║цЬмч▒╗хЮЛхБПцЙз</a> <ul><li><a href="#%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0">щЧощвШхОЯхЫа</a></li> <li><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95">шзгхЖ│цЦ╣ц│Х</a></li> <li><a href="#%E6%94%B6%E7%9B%8A">цФ╢чЫК</a></li> <li><a href="#%E9%87%8D%E6%9E%84%E6%96%B9%E6%B3%95%E8%AF%B4%E6%98%8E">щЗНцЮДцЦ╣ц│Хшп┤цШО</a></li></ul></li> <li><a href="#%E6%95%B0%E6%8D%AE%E6%B3%A5%E5%9B%A2">цХ░цНоц│ехЫв</a> <ul><li><a href="#%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0-1">щЧощвШхОЯхЫа</a></li> <li><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95-1">шзгхЖ│цЦ╣ц│Х</a></li> <li><a href="#%E6%94%B6%E7%9B%8A-1">цФ╢чЫК</a></li> <li><a href="#%E4%BD%95%E6%97%B6%E5%BF%BD%E7%95%A5">ф╜ХцЧ╢х┐╜чХе</a></li> <li><a href="#%E9%87%8D%E6%9E%84%E6%96%B9%E6%B3%95%E8%AF%B4%E6%98%8E-1">щЗНцЮДцЦ╣ц│Хшп┤цШО</a></li></ul></li> <li><a href="#%E8%BF%87%E5%A4%A7%E7%9A%84%E7%B1%BB">ш┐ЗхдзчЪДч▒╗</a> <ul><li><a href="#%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0-2">щЧощвШхОЯхЫа</a></li> <li><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95-2">шзгхЖ│цЦ╣ц│Х</a></li> <li><a href="#%E6%94%B6%E7%9B%8A-2">цФ╢чЫК</a></li> <li><a href="#%E9%87%8D%E6%9E%84%E6%96%B9%E6%B3%95%E8%AF%B4%E6%98%8E-2">щЗНцЮДцЦ╣ц│Хшп┤цШО</a></li></ul></li> <li><a href="#%E8%BF%87%E9%95%BF%E5%87%BD%E6%95%B0">ш┐ЗщХ┐хЗ╜цХ░</a> <ul><li><a href="#%E9%97%AE%E9%A2%98%E7%9A%84%E5%8E%9F%E5%9B%A0">щЧощвШчЪДхОЯхЫа</a></li> <li><a href="#%E8%A7%A3%E5%86%B3%E5%87%BD%E6%95%B0">шзгхЖ│хЗ╜цХ░</a></li> <li><a href="#%E6%94%B6%E7%9B%8A-3">цФ╢чЫК</a></li> <li><a href="#%E6%80%A7%E8%83%BD">цАзшГ╜</a></li> <li><a href="#%E9%87%8D%E6%9E%84%E6%96%B9%E6%B3%95%E8%AF%B4%E6%98%8E-3">щЗНцЮДцЦ╣ц│Хшп┤цШО</a></li></ul></li> <li><a href="#%E8%BF%87%E9%95%BF%E5%8F%82%E6%95%B0%E5%88%97">ш┐ЗщХ┐хПВцХ░хИЧ</a> <ul><li><a href="#%E9%97%AE%E9%A2%98%E5%8E%9F%E5%9B%A0-3">щЧощвШхОЯхЫа</a></li> <li><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">шзгхЖ│цЦ╣цбИ</a></li> <li><a href="#%E6%94%B6%E7%9B%8A-4">цФ╢чЫК</a></li> <li><a href="#%E4%BD%95%E6%97%B6%E5%BF%BD%E7%95%A5-1">ф╜ХцЧ╢х┐╜чХе</a></li> <li><a href="#%E9%87%8D%E6%9E%84%E6%96%B9%E6%B3%95%E8%AF%B4%E6%98%8E-4">щЗНцЮДцЦ╣ц│Хшп┤цШО</a></li></ul></li> <li><a href="#%E6%89%A9%E5%B1%95%E9%98%85%E8%AF%BB">цЙйх▒ХщШЕшп╗</a></li> <li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">хПВшАГш╡ДцЦЩ</a></li></ul> <h2 id="хЯ║цЬмч▒╗хЮЛхБПцЙз"><a href="#хЯ║цЬмч▒╗хЮЛхБПцЙз" class="header-anchor">#</a> хЯ║цЬмч▒╗хЮЛхБПцЙз</h2> <blockquote><p>хЯ║цЬмч▒╗хЮЛхБПцЙз(Primitive Obsession)</p> <ul><li>ф╜┐чФихЯ║цЬмч▒╗хЮЛшАМф╕НцШпх░Пхп╣ш▒бцЭехоЮчО░чоАхНХф╗╗хКбя╝Иф╛ЛхжВш┤зх╕БуАБшМГхЫ┤уАБчФ╡шпЭхП╖чаБхнЧчмжф╕▓чнЙя╝ЙуАВ</li> <li>ф╜┐чФих╕╕щЗПч╝ЦчаБф┐бцБпя╝Иф╛ЛхжВф╕Аф╕кчФиф║Ох╝ХчФичобчРЖхСШцЭГщЩРчЪДх╕╕щЗП<code>USER_ADMIN_ROLE = 1</code> я╝ЙуАВ</li> <li>ф╜┐чФихнЧчмжф╕▓х╕╕щЗПф╜Ьф╕║хнЧцо╡хРНхЬицХ░ч╗Дф╕нф╜┐чФиуАВ</li></ul></blockquote> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/primitive-obsession-1.png" alt=""></p> <h3 id="щЧощвШхОЯхЫа"><a href="#щЧощвШхОЯхЫа" class="header-anchor">#</a> щЧощвШхОЯхЫа</h3> <p>ч▒╗ф╝╝хЕ╢ф╗ЦхдзщГихИЖхЭПхС│щБУя╝МхЯ║цЬмч▒╗хЮЛхБПцЙзшпЮчФЯф║Оч▒╗хИЭх╗║чЪДцЧ╢хАЩуАВф╕Ах╝АхзЛя╝МхПпшГ╜хПкцШпф╕НхдЪчЪДхнЧцо╡я╝МщЪПчЭАшбичд║чЪДчЙ╣цАзш╢КцЭеш╢КхдЪя╝МхЯ║цЬмцХ░цНоч▒╗хЮЛхнЧцо╡ф╣Яш╢КцЭеш╢КхдЪуАВ</p> <p>хЯ║цЬмч▒╗хЮЛх╕╕х╕╕швлчФиф║Ошбичд║цибхЮЛчЪДч▒╗хЮЛуАВф╜ацЬЙф╕Ач╗ДцХ░хнЧцИЦхнЧчмжф╕▓чФицЭешбичд║цЯРф╕кхоЮф╜УуАВ</p> <p>ш┐ШцЬЙф╕Аф╕кхЬ║цЩпя╝ЪхЬицибцЛЯхЬ║цЩпя╝МхдзщЗПчЪДхнЧчмжф╕▓х╕╕щЗПшвлчФиф║ОцХ░ч╗ДчЪДч┤вх╝ХуАВ</p> <h3 id="шзгхЖ│цЦ╣ц│Х"><a href="#шзгхЖ│цЦ╣ц│Х" class="header-anchor">#</a> шзгхЖ│цЦ╣ц│Х</h3> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/primitive-obsession-2.png" alt=""></p> <p>хдзхдЪцХ░ч╝ЦчиЛшпншиАщГ╜цФпцМБхЯ║цЬмцХ░цНоч▒╗хЮЛхТМч╗УцЮДч▒╗хЮЛя╝Ич▒╗уАБч╗УцЮДф╜УчнЙя╝ЙуАВч╗УцЮДч▒╗хЮЛхЕБшо╕чиЛх║ПхСШх░ЖхЯ║цЬмцХ░цНоч▒╗хЮЛч╗Дч╗Зш╡╖цЭея╝Мф╗еф╗гшбицЯРф╕Аф║ЛчЙйчЪДцибхЮЛуАВ</p> <p>хЯ║цЬмцХ░цНоч▒╗хЮЛхПпф╗ечЬЛцИРцШпцЬ║цЮДч▒╗хЮЛчЪДчзпцЬихЭЧуАВх╜УхЯ║цЬмцХ░цНоч▒╗хЮЛцХ░щЗПцИРшзДцибхРОя╝Мх░ЖхоГф╗мцЬЙч╗Дч╗ЗхЬ░ч╗УхРИш╡╖цЭея╝МхПпф╗ецЫ┤цЦ╣ф╛┐чЪДчобчРЖш┐Щф║ЫцХ░цНоуАВ</p> <ul><li>хжВцЮЬф╜ацЬЙхдзщЗПчЪДхЯ║цЬмцХ░цНоч▒╗хЮЛхнЧцо╡я╝Мх░▒цЬЙхПпшГ╜х░ЖхЕ╢ф╕нщГихИЖхнШхЬищА╗ш╛СшБФч│╗чЪДхнЧцо╡ч╗Дч╗Зш╡╖цЭея╝Мх╜вцИРф╕Аф╕кч▒╗уАВцЫ┤ш┐Ыф╕АцнечЪДцШпя╝Мх░Жф╕Ош┐Щф║ЫцХ░цНоцЬЙхЕ│шБФчЪДцЦ╣ц│Хф╣Яф╕Ах╣╢чз╗хЕеч▒╗ф╕нуАВф╕║ф║ЖхоЮчО░ш┐Щф╕кчЫоцаЗя╝МхПпф╗ех░ЭшпХ <code>ф╗еч▒╗хПЦф╗гч▒╗хЮЛчаБ(Replace Type Code with Class)</code> уАВ</li> <li>хжВцЮЬхЯ║цЬмцХ░цНоч▒╗хЮЛхнЧцо╡чЪДхА╝цШпчФиф║ОцЦ╣ц│ХчЪДхПВцХ░я╝МхПпф╗еф╜┐чФи <code>х╝ХхЕехПВцХ░хп╣ш▒б(Introduce Parameter Object)</code> цИЦ <code>ф┐ЭцМБхп╣ш▒бхоМцХ┤(Preserve Whole Object)</code> уАВ</li> <li>хжВцЮЬцГ│шжБцЫ┐цНвчЪДцХ░цНохА╝цШпч▒╗хЮЛчаБя╝МшАМхоГх╣╢ф╕Нх╜▒хУНшбМф╕║я╝МхИЩхПпф╗еш┐РчФи <code>ф╗еч▒╗хПЦф╗гч▒╗хЮЛчаБ(Replace Type Code with Class)</code> х░ЖхоГцЫ┐цНвцОЙуАВхжВцЮЬф╜ацЬЙф╕Оч▒╗хЮЛчаБчЫ╕хЕ│чЪДцЭбф╗╢шбиш╛╛х╝Пя╝МхПпш┐РчФи <code>ф╗ехнРч▒╗хПЦф╗гч▒╗хЮЛчаБ(Replace Type Code with Subclass)</code> цИЦ <code>ф╗ечК╢цАБ/чнЦчХецибх╝ПхПЦф╗гч▒╗хЮЛчаБ(Replace Type Code with State/Strategy)</code> хКаф╗ехдДчРЖуАВ</li> <li>хжВцЮЬф╜ахПСчО░шЗкх╖▒цнгф╗ОцХ░ч╗Дф╕нцМСщАЙцХ░цНоя╝МхПпш┐РчФи <code>ф╗ехп╣ш▒бхПЦф╗гцХ░ч╗Д(Replace Array with Object)</code> уАВ</li></ul> <h3 id="цФ╢чЫК"><a href="#цФ╢чЫК" class="header-anchor">#</a> цФ╢чЫК</h3> <ul><li>хдЪф║Пф║Жф╜┐чФихп╣ш▒бцЫ┐ф╗гхЯ║цЬмцХ░цНоч▒╗хЮЛя╝Мф╜┐х╛Чф╗гчаБхПШх╛ЧцЫ┤хКачБ╡ц┤╗уАВ</li> <li>ф╗гчаБхПШх╛ЧцЫ┤хКацШУшп╗хТМцЫ┤хКацЬЙч╗Дч╗ЗуАВчЙ╣цоКцХ░цНохПпф╗ещЫЖф╕нш┐ЫшбМцУНф╜Ья╝МшАМф╕НхГПф╣ЛхЙНщВгца╖хИЖцХгуАВф╕НчФихЖНчМЬц╡Лш┐Щф║ЫщЩМчФЯчЪДх╕╕щЗПчЪДцДПф╣Йф╗ехПКхоГф╗мф╕║ф╗Аф╣ИхЬицХ░ч╗Дф╕нуАВ</li> <li>цЫ┤хо╣цШУхПСчО░щЗНхдНф╗гчаБуАВ</li></ul> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/primitive-obsession-3.png" alt=""></p> <h3 id="щЗНцЮДцЦ╣ц│Хшп┤цШО"><a href="#щЗНцЮДцЦ╣ц│Хшп┤цШО" class="header-anchor">#</a> щЗНцЮДцЦ╣ц│Хшп┤цШО</h3> <h4 id="ф╗еч▒╗хПЦф╗гч▒╗хЮЛчаБ-replace-type-code-with-class"><a href="#ф╗еч▒╗хПЦф╗гч▒╗хЮЛчаБ-replace-type-code-with-class" class="header-anchor">#</a> ф╗еч▒╗хПЦф╗гч▒╗хЮЛчаБ(Replace Type Code with Class)</h4> <p><strong>щЧощвШ</strong></p> <p>ч▒╗ф╣Лф╕нцЬЙф╕Аф╕кцХ░хА╝ч▒╗хЮЛчаБя╝Мф╜ЖхоГх╣╢ф╕Нх╜▒хУНч▒╗чЪДшбМф╕║уАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/replace-type-code-with-class-before.png" alt=""></p> <p><strong>шзгхЖ│</strong></p> <p>ф╗еф╕Аф╕кцЦ░чЪДч▒╗цЫ┐цНвшпецХ░хА╝ч▒╗хЮЛчаБуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/replace-type-code-with-class-after.png" alt=""></p> <h4 id="х╝ХхЕехПВцХ░хп╣ш▒б-introduce-parameter-object"><a href="#х╝ХхЕехПВцХ░хп╣ш▒б-introduce-parameter-object" class="header-anchor">#</a> х╝ХхЕехПВцХ░хп╣ш▒б(Introduce Parameter Object)</h4> <p><strong>щЧощвШ</strong></p> <p>цЯРф║ЫхПВцХ░цА╗цШпх╛ИшЗкчД╢хЬ░хРМцЧ╢хЗ║чО░уАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/introduce-parameter-object-before.png" alt=""></p> <p><strong>шзгхЖ│</strong></p> <p>ф╗еф╕Аф╕кхп╣ш▒бцЭехПЦф╗гш┐Щф║ЫхПВцХ░уАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/introduce-parameter-object-after.png" alt=""></p> <h4 id="ф┐ЭцМБхп╣ш▒бхоМцХ┤-preserve-whole-object"><a href="#ф┐ЭцМБхп╣ш▒бхоМцХ┤-preserve-whole-object" class="header-anchor">#</a> ф┐ЭцМБхп╣ш▒бхоМцХ┤(Preserve Whole Object)</h4> <p><strong>щЧощвШ</strong></p> <p>ф╜аф╗ОцЯРф╕кхп╣ш▒бф╕нхПЦхЗ║шЛех╣▓хА╝я╝Мх░ЖхоГф╗мф╜Ьф╕║цЯРф╕АцмбхЗ╜цХ░ш░ГчФицЧ╢чЪДхПВцХ░уАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span> low <span class="token operator">=</span> daysTempRange<span class="token punctuation">.</span><span class="token function">getLow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> high <span class="token operator">=</span> daysTempRange<span class="token punctuation">.</span><span class="token function">getHigh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> withinPlan <span class="token operator">=</span> plan<span class="token punctuation">.</span><span class="token function">withinRange</span><span class="token punctuation">(</span>low<span class="token punctuation">,</span> high<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>шзгхЖ│</strong></p> <p>цФ╣ф╕║ф╝ащАТцХ┤ф╕кхп╣ш▒буАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">boolean</span> withinPlan <span class="token operator">=</span> plan<span class="token punctuation">.</span><span class="token function">withinRange</span><span class="token punctuation">(</span>daysTempRange<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="ф╗ехнРч▒╗хПЦф╗гч▒╗хЮЛчаБ-replace-type-code-with-subclass"><a href="#ф╗ехнРч▒╗хПЦф╗гч▒╗хЮЛчаБ-replace-type-code-with-subclass" class="header-anchor">#</a> ф╗ехнРч▒╗хПЦф╗гч▒╗хЮЛчаБ(Replace Type Code with Subclass)</h4> <p><strong>щЧощвШ</strong></p> <p>ф╜ацЬЙф╕Аф╕кф╕НхПпхПШчЪДч▒╗хЮЛчаБя╝МхоГф╝Ъх╜▒хУНч▒╗чЪДшбМф╕║уАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/replace-type-code-with-subclasses-before.png" alt=""></p> <p><strong>шзгхЖ│</strong></p> <p>ф╗ехнРч▒╗хПЦф╗гш┐Щф╕кч▒╗хЮЛчаБуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/replace-type-code-with-subclasses-after.png" alt=""></p> <h4 id="ф╗ечК╢цАБ-чнЦчХецибх╝ПхПЦф╗гч▒╗хЮЛчаБ-replace-type-code-with-state-strategy"><a href="#ф╗ечК╢цАБ-чнЦчХецибх╝ПхПЦф╗гч▒╗хЮЛчаБ-replace-type-code-with-state-strategy" class="header-anchor">#</a> ф╗ечК╢цАБ/чнЦчХецибх╝ПхПЦф╗гч▒╗хЮЛчаБ(Replace Type Code with State/Strategy)</h4> <p><strong>щЧощвШ</strong></p> <p>ф╜ацЬЙф╕Аф╕кч▒╗хЮЛчаБя╝МхоГф╝Ъх╜▒хУНч▒╗чЪДшбМф╕║я╝Мф╜Жф╜ацЧац│ХщАЪш┐Зч╗зцЙ┐ц╢ИщЩдхоГуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/replace-type-code-with-state-strategy-before.png" alt=""></p> <p><strong>шзгхЖ│</strong></p> <p>ф╗ечК╢цАБхп╣ш▒бхПЦф╗гч▒╗хЮЛчаБуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/replace-type-code-with-state-strategy-after.png" alt=""></p> <h4 id="ф╗ехп╣ш▒бхПЦф╗гцХ░ч╗Д-replace-array-with-object"><a href="#ф╗ехп╣ш▒бхПЦф╗гцХ░ч╗Д-replace-array-with-object" class="header-anchor">#</a> ф╗ехп╣ш▒бхПЦф╗гцХ░ч╗Д(Replace Array with Object)</h4> <p><strong>щЧощвШ</strong></p> <p>ф╜ацЬЙф╕Аф╕кцХ░ч╗Дя╝МхЕ╢ф╕нчЪДхЕГч┤ахРДшЗкф╗гшбиф╕НхРМчЪДф╕Ьше┐уАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> row <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Liverpool&quot;</span><span class="token punctuation">;</span>
row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;15&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>шзгхЖ│</strong></p> <p>ф╗ехп╣ш▒бцЫ┐цНвцХ░ч╗ДуАВхп╣ф║ОцХ░ч╗Дф╕нчЪДцпПф╕кхЕГч┤ая╝Мф╗еф╕Аф╕кхнЧцо╡цЭешбичд║уАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Performance</span> row <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Performance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
row<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;Liverpool&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
row<span class="token punctuation">.</span><span class="token function">setWins</span><span class="token punctuation">(</span><span class="token string">&quot;15&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="цХ░цНоц│ехЫв"><a href="#цХ░цНоц│ехЫв" class="header-anchor">#</a> цХ░цНоц│ехЫв</h2> <blockquote><p>цХ░цНоц│ехЫв(Data Clumps)</p> <p>цЬЙцЧ╢я╝Мф╗гчаБчЪДф╕НхРМщГихИЖхМЕхРлчЫ╕хРМчЪДхПШщЗПч╗Дя╝Иф╛ЛхжВчФиф║Ош┐ЮцОехИ░цХ░цНох║УчЪДхПВцХ░я╝ЙуАВш┐Щф║Ыч╗СхЬиф╕Аш╡╖хЗ║чО░чЪДцХ░цНох║ФшпецЛецЬЙшЗкх╖▒чЪДхп╣ш▒буАВ</p></blockquote> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/data-clumps-1.png" alt=""></p> <h3 id="щЧощвШхОЯхЫа-2"><a href="#щЧощвШхОЯхЫа-2" class="header-anchor">#</a> щЧощвШхОЯхЫа</h3> <p>щАЪх╕╕я╝МцХ░цНоц│ехЫвчЪДхЗ║чО░цЧ╢хЫаф╕║ч│Яч│ХчЪДч╝ЦчиЛч╗УцЮДцИЦтАЬхдНхИ╢-ч▓Шш┤┤х╝Пч╝ЦчиЛтАЭуАВ</p> <p>цЬЙф╕Аф╕кхИдцЦнцШпхРжцШпцХ░цНоц│ехЫвчЪДхе╜хКЮц│Хя╝ЪхИацОЙф╝ЧхдЪцХ░цНоф╕нчЪДф╕Ащб╣уАВш┐Щф╣ИхБЪя╝МхЕ╢ф╗ЦцХ░цНоцЬЙц▓бцЬЙхЫашАМхд▒хО╗цДПф╣Йя╝ЯхжВцЮЬхоГф╗мф╕НхЖНцЬЙцДПф╣Йя╝Мш┐Щх░▒цШпф╕кцШОчбочЪДф┐бхП╖я╝Ъф╜ах║Фшпеф╕║хоГф╗мф║зчФЯф╕Аф╕кцЦ░чЪДхп╣ш▒буАВ</p> <h3 id="шзгхЖ│цЦ╣ц│Х-2"><a href="#шзгхЖ│цЦ╣ц│Х-2" class="header-anchor">#</a> шзгхЖ│цЦ╣ц│Х</h3> <ul><li>щжЦхЕИцЙ╛хЗ║ш┐Щф║ЫцХ░цНоф╗ехнЧцо╡х╜вх╝ПхЗ║чО░чЪДхЬ░цЦ╣я╝Мш┐РчФи <code>цПРчВ╝ч▒╗(Extract Class)</code> х░ЖхоГф╗мцПРчВ╝хИ░ф╕Аф╕кчЛмчлЛхп╣ш▒бф╕нуАВ</li> <li>хжВцЮЬцХ░цНоц│ехЫвхЬихЗ╜цХ░чЪДхПВцХ░хИЧф╕нхЗ║чО░я╝Мш┐РчФи <code>х╝ХхЕехПВцХ░хп╣ш▒б(Introduce Parameter Object)</code> х░ЖхоГф╗мч╗Дч╗ЗцИРф╕Аф╕кч▒╗уАВ</li> <li>хжВцЮЬцХ░цНоц│ехЫвчЪДщГихИЖцХ░цНохЗ║чО░хЬихЕ╢ф╗ЦхЗ╜цХ░ф╕ня╝МшАГшЩСш┐РчФи <code>ф┐ЭцМБхп╣ш▒бхоМцХ┤(Preserve Whole Object)</code> х░ЖцХ┤ф╕кцХ░цНохп╣ш▒бф╝ахЕехИ░хЗ╜цХ░ф╕нуАВ</li> <li>цгАшзЖф╕Аф╕Лф╜┐чФиш┐Щф║ЫхнЧцо╡чЪДф╗гчаБя╝Мф╣Яшо╕я╝Мх░ЖхоГф╗мчз╗хЕеф╕Аф╕кцХ░цНоч▒╗цШпф╕кф╕НщФЩчЪДф╕╗цДПуАВ</li></ul> <h3 id="цФ╢чЫК-2"><a href="#цФ╢чЫК-2" class="header-anchor">#</a> цФ╢чЫК</h3> <ul><li>цПРщлШф╗гчаБцШУшп╗цАзхТМч╗Дч╗ЗцАзуАВхп╣ф║ОчЙ╣цоКцХ░цНочЪДцУНф╜Ья╝МхПпф╗ещЫЖф╕нш┐ЫшбМхдДчРЖя╝МшАМф╕НхГПф╗ехЙНщВгца╖хИЖцХгуАВ</li> <li>хЗПх░Сф╗гчаБщЗПуАВ</li></ul> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/data-clumps-3.png" alt=""></p> <h3 id="ф╜ХцЧ╢х┐╜чХе"><a href="#ф╜ХцЧ╢х┐╜чХе" class="header-anchor">#</a> ф╜ХцЧ╢х┐╜чХе</h3> <ul><li>цЬЙцЧ╢ф╕║ф║Жхп╣ш▒бф╕нчЪДщГихИЖцХ░цНошАМх░ЖцХ┤ф╕кхп╣ш▒бф╜Ьф╕║хПВцХ░ф╝ащАТч╗ЩхЗ╜цХ░я╝МхПпшГ╜ф╝Ъф║зчФЯшойф╕дф╕кч▒╗ф╣ЛщЧ┤ф╕НцФ╢цмвш┐ОчЪДф╛Эш╡ЦхЕ│ч│╗я╝Мш┐Щф╕нцГЕхЖ╡ф╕ЛхПпф╗еф╕Нф╝ащАТцХ┤ф╕кхп╣ш▒буАВ</li></ul> <h3 id="щЗНцЮДцЦ╣ц│Хшп┤цШО-2"><a href="#щЗНцЮДцЦ╣ц│Хшп┤цШО-2" class="header-anchor">#</a> щЗНцЮДцЦ╣ц│Хшп┤цШО</h3> <h4 id="цПРчВ╝ч▒╗-extract-class"><a href="#цПРчВ╝ч▒╗-extract-class" class="header-anchor">#</a> цПРчВ╝ч▒╗(Extract Class)</h4> <p><strong>щЧощвШ</strong></p> <p>цЯРф╕кч▒╗хБЪф║Жф╕Нцнвф╕Аф╗╢ф║ЛуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/extract-class-before.png" alt=""></p> <p><strong>шзгхЖ│</strong></p> <p>х╗║члЛф╕Аф╕кцЦ░ч▒╗я╝Мх░ЖчЫ╕хЕ│чЪДхнЧцо╡хТМхЗ╜цХ░ф╗ОцЧзч▒╗цРмчз╗хИ░цЦ░ч▒╗уАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/extract-class-after.png" alt=""></p> <h4 id="х╝ХхЕехПВцХ░хп╣ш▒б-introduce-parameter-object-2"><a href="#х╝ХхЕехПВцХ░хп╣ш▒б-introduce-parameter-object-2" class="header-anchor">#</a> х╝ХхЕехПВцХ░хп╣ш▒б(Introduce Parameter Object)</h4> <p><strong>щЧощвШ</strong></p> <p>цЯРф║ЫхПВцХ░цА╗цШпх╛ИшЗкчД╢хЬ░хРМцЧ╢хЗ║чО░уАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/introduce-parameter-object-before.png" alt=""></p> <p><strong>шзгхЖ│</strong></p> <p>ф╗еф╕Аф╕кхп╣ш▒бцЭехПЦф╗гш┐Щф║ЫхПВцХ░уАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/introduce-parameter-object-after.png" alt=""></p> <h4 id="ф┐ЭцМБхп╣ш▒бхоМцХ┤-preserve-whole-object-2"><a href="#ф┐ЭцМБхп╣ш▒бхоМцХ┤-preserve-whole-object-2" class="header-anchor">#</a> ф┐ЭцМБхп╣ш▒бхоМцХ┤(Preserve Whole Object)</h4> <p><strong>щЧощвШ</strong></p> <p>ф╜аф╗ОцЯРф╕кхп╣ш▒бф╕нхПЦхЗ║шЛех╣▓хА╝я╝Мх░ЖхоГф╗мф╜Ьф╕║цЯРф╕АцмбхЗ╜цХ░ш░ГчФицЧ╢чЪДхПВцХ░уАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span> low <span class="token operator">=</span> daysTempRange<span class="token punctuation">.</span><span class="token function">getLow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> high <span class="token operator">=</span> daysTempRange<span class="token punctuation">.</span><span class="token function">getHigh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> withinPlan <span class="token operator">=</span> plan<span class="token punctuation">.</span><span class="token function">withinRange</span><span class="token punctuation">(</span>low<span class="token punctuation">,</span> high<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>шзгхЖ│</strong></p> <p>цФ╣ф╕║ф╝ащАТцХ┤ф╕кхп╣ш▒буАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">boolean</span> withinPlan <span class="token operator">=</span> plan<span class="token punctuation">.</span><span class="token function">withinRange</span><span class="token punctuation">(</span>daysTempRange<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ш┐ЗхдзчЪДч▒╗"><a href="#ш┐ЗхдзчЪДч▒╗" class="header-anchor">#</a> ш┐ЗхдзчЪДч▒╗</h2> <blockquote><p>ш┐ЗхдзчЪДч▒╗(Large Class)</p> <p>ф╕Аф╕кч▒╗хРлцЬЙш┐ЗхдЪхнЧцо╡уАБхЗ╜цХ░уАБф╗гчаБшбМуАВ</p></blockquote> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/large-class-1.png" alt=""></p> <h3 id="щЧощвШхОЯхЫа-3"><a href="#щЧощвШхОЯхЫа-3" class="header-anchor">#</a> щЧощвШхОЯхЫа</h3> <p>ч▒╗щАЪх╕╕ф╕Ах╝АхзЛх╛Их░Пя╝Мф╜ЖцШпщЪПчЭАчиЛх║ПчЪДхвЮщХ┐шАМщАРц╕РшЖишГАуАВ</p> <p>ч▒╗ф╝╝ф║Ош┐ЗщХ┐хЗ╜цХ░я╝МчиЛх║ПхСШщАЪх╕╕шзЙх╛ЧхЬиф╕Аф╕кчО░хнШч▒╗ф╕нц╖╗хКацЦ░чЙ╣цАзцпФхИЫх╗║ф╕Аф╕кцЦ░чЪДч▒╗шжБхо╣цШУуАВ</p> <h3 id="шзгхЖ│цЦ╣ц│Х-3"><a href="#шзгхЖ│цЦ╣ц│Х-3" class="header-anchor">#</a> шзгхЖ│цЦ╣ц│Х</h3> <p>шо╛шобцибх╝Пф╕нцЬЙф╕АцЭбщЗНшжБхОЯхИЩя╝ЪшБМш┤гхНХф╕АхОЯхИЩуАВф╕Аф╕кч▒╗х║ФшпехПкш╡Лф║ИхоГф╕Аф╕кшБМш┤гуАВхжВцЮЬхоГцЙАцЙ┐цЛЕчЪДшБМш┤гхдкхдЪя╝Мх░▒шпешАГшЩСф╕║хоГхЗПхЗПш┤ЯуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/large-class-2.png" alt=""></p> <ul><li>хжВцЮЬш┐Зхдзч▒╗ф╕нчЪДщГихИЖшбМф╕║хПпф╗ецПРчВ╝хИ░ф╕Аф╕кчЛмчлЛчЪДч╗Дф╗╢ф╕ня╝МхПпф╗еф╜┐чФи <code>цПРчВ╝ч▒╗(Extract Class)</code>уАВ</li> <li>хжВцЮЬш┐Зхдзч▒╗ф╕нчЪДщГихИЖшбМф╕║хПпф╗ечФиф╕НхРМцЦ╣х╝ПхоЮчО░цИЦф╜┐чФиф║ОчЙ╣цоКхЬ║цЩпя╝МхПпф╗еф╜┐чФи <code>цПРчВ╝хнРч▒╗(Extract Subclass)</code>уАВ</li> <li>хжВцЮЬцЬЙх┐ЕшжБф╕║ховцИ╖члпцПРф╛Ыф╕Ач╗ДцУНф╜ЬхТМшбМф╕║я╝МхПпф╗еф╜┐чФи <code>цПРчВ╝цОехПг(Extract Interface)</code>уАВ</li> <li>хжВцЮЬф╜ачЪДш┐Зхдзч▒╗цШпф╕к GUI ч▒╗я╝МхПпшГ╜щЬАшжБцККцХ░цНохТМшбМф╕║чз╗хИ░ф╕Аф╕кчЛмчлЛчЪДщвЖхЯЯхп╣ш▒бхО╗уАВф╜ахПпшГ╜щЬАшжБф╕дш╛╣хРДф┐ЭчХЩф╕Аф║ЫщЗНхдНцХ░цНоя╝Мх╣╢ф┐ЭцМБф╕дш╛╣хРМцнеуАВ <code>хдНхИ╢швлчЫСшзЖцХ░цНо(Duplicate Observed Data)</code> хПпф╗ехСКшпЙф╜ацАОф╣ИхБЪуАВ</li></ul> <h3 id="цФ╢чЫК-3"><a href="#цФ╢чЫК-3" class="header-anchor">#</a> цФ╢чЫК</h3> <ul><li>щЗНцЮДш┐ЗхдзчЪДч▒╗хПпф╗еф╜┐чиЛх║ПхСШф╕Нх┐Ешо░ф╜Пф╕Аф╕кч▒╗ф╕нхдзщЗПчЪДх▒ЮцАзуАВ</li> <li>хЬихдзхдЪцХ░цГЕхЖ╡ф╕Ля╝МхИЖхЙ▓ш┐ЗхдзчЪДч▒╗хПпф╗ещБ┐хЕНф╗гчаБхТМхКЯшГ╜чЪДщЗНхдНуАВ</li></ul> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/large-class-3.png" alt=""></p> <h3 id="щЗНцЮДцЦ╣ц│Хшп┤цШО-3"><a href="#щЗНцЮДцЦ╣ц│Хшп┤цШО-3" class="header-anchor">#</a> щЗНцЮДцЦ╣ц│Хшп┤цШО</h3> <h4 id="цПРчВ╝ч▒╗-extract-class-2"><a href="#цПРчВ╝ч▒╗-extract-class-2" class="header-anchor">#</a> цПРчВ╝ч▒╗(Extract Class)</h4> <p><strong>щЧощвШ</strong></p> <p>цЯРф╕кч▒╗хБЪф║Жф╕Нцнвф╕Аф╗╢ф║ЛуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/extract-class-before.png" alt=""></p> <p><strong>шзгхЖ│</strong></p> <p>х╗║члЛф╕Аф╕кцЦ░ч▒╗я╝Мх░ЖчЫ╕хЕ│чЪДхнЧцо╡хТМхЗ╜цХ░ф╗ОцЧзч▒╗цРмчз╗хИ░цЦ░ч▒╗уАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/extract-class-after.png" alt=""></p> <h4 id="цПРчВ╝хнРч▒╗-extract-subclass"><a href="#цПРчВ╝хнРч▒╗-extract-subclass" class="header-anchor">#</a> цПРчВ╝хнРч▒╗(Extract Subclass)</h4> <p><strong>щЧощвШ</strong></p> <p>ф╕Аф╕кч▒╗ф╕нцЬЙф║ЫчЙ╣цАзф╗ЕчФиф║ОчЙ╣хоЪхЬ║цЩпуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/extract-subclass-before.png" alt=""></p> <p><strong>шзгхЖ│</strong></p> <p>хИЫх╗║ф╕Аф╕кхнРч▒╗я╝Мх╣╢х░ЖчФиф║ОчЙ╣цоКхЬ║цЩпчЪДчЙ╣цАзч╜охЕехЕ╢ф╕нуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/extract-subclass-after.png" alt=""></p> <h4 id="цПРчВ╝цОехПг-extract-interface"><a href="#цПРчВ╝цОехПг-extract-interface" class="header-anchor">#</a> цПРчВ╝цОехПг(Extract Interface)</h4> <p><strong>щЧощвШ</strong></p> <p>хдЪф╕кховцИ╖члпф╜┐чФиф╕Аф╕кч▒╗щГихИЖчЫ╕хРМчЪДхЗ╜цХ░уАВхПжф╕Аф╕кхЬ║цЩпцШпф╕дф╕кч▒╗ф╕нчЪДщГихИЖхЗ╜цХ░чЫ╕хРМуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/extract-interface-before.png" alt=""></p> <p><strong>шзгхЖ│</strong></p> <p>чз╗хКичЫ╕хРМчЪДщГихИЖхЗ╜цХ░хИ░цОехПгф╕нуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/extract-interface-after.png" alt=""></p> <h4 id="хдНхИ╢швлчЫСшзЖцХ░цНо-duplicate-observed-data"><a href="#хдНхИ╢швлчЫСшзЖцХ░цНо-duplicate-observed-data" class="header-anchor">#</a> хдНхИ╢швлчЫСшзЖцХ░цНо(Duplicate Observed Data)</h4> <p><strong>щЧощвШ</strong></p> <p>хжВцЮЬхнШхВихЬич▒╗ф╕нчЪДцХ░цНоцШпш┤Яш┤г GUI чЪДуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/duplicate-observed-data-before.png" alt=""></p> <p><strong>шзгхЖ│</strong></p> <p>ф╕Аф╕кцпФш╛Гхе╜чЪДцЦ╣ц│ХцШпх░Жш┤Яш┤г GUI чЪДцХ░цНоцФ╛хЕеф╕Аф╕кчЛмчлЛчЪДч▒╗я╝Мф╗ечбоф┐Э GUI цХ░цНоф╕ОхЯЯч▒╗ф╣ЛщЧ┤чЪДш┐ЮцОехТМхРМцнеуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/duplicate-observed-data-after.png" alt=""></p> <h2 id="ш┐ЗщХ┐хЗ╜цХ░"><a href="#ш┐ЗщХ┐хЗ╜цХ░" class="header-anchor">#</a> ш┐ЗщХ┐хЗ╜цХ░</h2> <blockquote><p>ш┐ЗщХ┐хЗ╜цХ░(Long Method)</p> <p>ф╕Аф╕кхЗ╜цХ░хРлцЬЙхдкхдЪшбМф╗гчаБуАВф╕АшИмцЭешп┤я╝Мф╗╗ф╜ХхЗ╜цХ░ш╢Еш┐З 10 шбМцЧ╢я╝Мф╜ах░▒хПпф╗ешАГшЩСцШпф╕НцШпш┐ЗщХ┐ф║ЖуАВ
хЗ╜цХ░ф╕нчЪДф╗гчаБшбМцХ░хОЯхИЩф╕Кф╕НшжБш╢Еш┐З 100 шбМуАВ</p></blockquote> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/long-method-1.png" alt=""></p> <h3 id="щЧощвШчЪДхОЯхЫа"><a href="#щЧощвШчЪДхОЯхЫа" class="header-anchor">#</a> щЧощвШчЪДхОЯхЫа</h3> <p>щАЪх╕╕цГЕхЖ╡ф╕Ля╝МхИЫх╗║ф╕Аф╕кцЦ░хЗ╜цХ░чЪДщЪ╛х║жшжБхдзф║Оц╖╗хКахКЯшГ╜хИ░ф╕Аф╕кх╖▓хнШхЬичЪДхЗ╜цХ░уАВхдзщГихИЖф║║щГ╜шзЙх╛Чя╝ЪтАЬцИСх░▒ц╖╗хКаш┐Щф╣Иф╕дшбМф╗гчаБя╝Мф╕║цндцЦ░х╗║ф╕Аф╕кхЗ╜цХ░хоЮхЬицШпх░ПщвШхдзхБЪф║ЖуАВтАЭф║ОцШпя╝Мх╝аф╕ЙхКаф╕дшбМя╝МцЭОхЫЫхКаф╕дшбМя╝МчОЛф║ФхКаф╕дшбМуАВуАВуАВхЗ╜цХ░цЧечЫКх║Юхдзя╝МцЬАч╗ИчГВчЪДхГПф╕АщФЕц╡Жч│Кя╝МхЖНф╣Яц▓бф║║шГ╜хоМхЕичЬЛцЗВф║ЖуАВф║ОцШпхдзхо╢х░▒цЫ┤ф╕НцХвш╜╗цШУхКиш┐Щф╕кхЗ╜цХ░ф║Жя╝МхПкшГ╜цБ╢цАзх╛кчОпчЪДх╛АхЕ╢ф╕нц╖╗хКаф╗гчаБуАВцЙАф╗ея╝МхжВцЮЬф╜ачЬЛхИ░ф╕Аф╕кш╢Еш┐З 200 шбМчЪДхЗ╜цХ░я╝МщАЪх╕╕щГ╜цШпхдЪф╕кчиЛх║ПхСШф╕ЬцЛ╝ше┐хЗСхЗ║цЭечЪДуАВ</p> <h3 id="шзгхЖ│хЗ╜цХ░"><a href="#шзгхЖ│хЗ╜цХ░" class="header-anchor">#</a> шзгхЖ│хЗ╜цХ░</h3> <p>ф╕Аф╕кх╛Ихе╜чЪДцКАх╖зцШпя╝Ъ<strong>хп╗цЙ╛ц│ищЗК</strong>уАВц╖╗хКац│ищЗКя╝Мф╕АшИмцЬЙш┐Щф╣ИхЗаф╕кхОЯхЫая╝Ъф╗гчаБщА╗ш╛Сш╛Гф╕║цЩжц╢йцИЦхдНцЭВя╝Ыш┐Щцо╡ф╗гчаБхКЯшГ╜чЫ╕хп╣чЛмчлЛя╝ЫчЙ╣цоКхдДчРЖуАВ
хжВцЮЬф╗гчаБхЙНцЦ╣цЬЙф╕АшбМц│ищЗКя╝Мх░▒цШпхЬицПРщЖТф╜ая╝ЪхПпф╗ех░Жш┐Щцо╡ф╗гчаБцЫ┐цНвцИРф╕Аф╕кхЗ╜цХ░я╝МшАМф╕ФхПпф╗ехЬиц│ищЗКчЪДхЯ║чбАф╕Кч╗Щш┐Щф╕кхЗ╜цХ░хС╜хРНуАВхжВцЮЬхЗ╜цХ░цЬЙф╕Аф╕кцППш┐░цБ░х╜УчЪДхРНхнЧя╝Мх░▒ф╕НщЬАшжБхО╗чЬЛхЖЕщГиф╗гчаБчй╢члЯцШпхжВф╜ХхоЮчО░чЪДуАВх░▒чоЧхПкцЬЙф╕АшбМф╗гчаБя╝МхжВцЮЬхоГщЬАшжБф╗ец│ищЗКцЭешп┤цШОя╝МщВгф╣ЯхА╝х╛Чх░ЖхоГцПРчВ╝хИ░чЛмчлЛхЗ╜цХ░ф╕нуАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/long-method-2.png" alt=""></p> <ul><li>ф╕║ф║Жч╗Щф╕Аф╕кхЗ╜цХ░чШжш║ля╝МхПпф╗еф╜┐чФи <code>цПРчВ╝хЗ╜цХ░(Extract Method)</code>уАВ</li> <li>хжВцЮЬх▒АщГихПШщЗПхТМхПВцХ░х╣▓цЙ░цПРчВ╝хЗ╜цХ░я╝МхПпф╗еф╜┐чФи <code>ф╗ецЯешпвхПЦф╗гф╕┤цЧ╢хПШщЗП(Replace Temp with Query)</code>я╝М<code>х╝ХхЕехПВцХ░хп╣ш▒б(Introduce Parameter Object)</code> цИЦ <code>ф┐ЭцМБхп╣ш▒бхоМцХ┤(Preserve Whole Object)</code> уАВ</li> <li>хжВцЮЬхЙНщЭвф╕дцЭбц▓бцЬЙх╕охКйя╝МхПпф╗ещАЪш┐З <code>ф╗ехЗ╜цХ░хп╣ш▒бхПЦф╗гхЗ╜цХ░(Replace Method with Method Object)</code> х░ЭшпХчз╗хКицХ┤ф╕кхЗ╜цХ░хИ░ф╕Аф╕кчЛмчлЛчЪДхп╣ш▒бф╕нуАВ</li> <li>цЭбф╗╢шбиш╛╛х╝ПхТМх╛кчОпх╕╕х╕╕ф╣ЯцШпцПРчВ╝чЪДф┐бхП╖уАВхп╣ф║ОцЭбф╗╢шбиш╛╛х╝Пя╝МхПпф╗еф╜┐чФи <code>хИЖшзгцЭбф╗╢шбиш╛╛х╝П(Decompose Conditional)</code> уАВшЗ│ф║Ох╛кчОпя╝Мх║Фшпеф╜┐чФи <code>цПРчВ╝хЗ╜цХ░(Extract Method)</code> х░Жх╛кчОпхТМхЕ╢хЖЕчЪДф╗гчаБцПРчВ╝хИ░чЛмчлЛхЗ╜цХ░ф╕нуАВ</li></ul> <h3 id="цФ╢чЫК-4"><a href="#цФ╢чЫК-4" class="header-anchor">#</a> цФ╢чЫК</h3> <ul><li>хЬицЙАцЬЙч▒╗хЮЛчЪДщЭвхРСхп╣ш▒бф╗гчаБф╕ня╝МхЗ╜цХ░цпФш╛ГчЯнх░Пч▓╛цВНчЪДч▒╗х╛Ах╛АчФЯхС╜хСицЬЯш╛ГщХ┐уАВф╕Аф╕кхЗ╜цХ░ш╢КщХ┐я╝Мх░▒ш╢Кф╕Нхо╣цШУчРЖшзгхТМч╗┤цКдуАВ</li> <li>цндхдЦя╝Мш┐ЗщХ┐хЗ╜цХ░ф╕нх╛Ах╛АхРлцЬЙщЪ╛ф╗ехПСчО░чЪДщЗНхдНф╗гчаБуАВ</li></ul> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/long-method-3.png" alt=""></p> <h3 id="цАзшГ╜"><a href="#цАзшГ╜" class="header-anchor">#</a> цАзшГ╜</h3> <p>цШпхРжхГПшо╕хдЪф║║шп┤чЪДщВгца╖я╝МхвЮхКахЗ╜цХ░чЪДцХ░щЗПф╝Ъх╜▒хУНцАзшГ╜я╝ЯхЬихЗаф╣Оч╗ЭхдзхдЪцХ░цГЕхЖ╡ф╕Ля╝Мш┐ЩчзНх╜▒хУНцШпхПпф╗ех┐╜чХеф╕Ншобя╝МцЙАф╗еф╕НчФицЛЕх┐ГуАВ
цндхдЦя╝МчО░хЬицЬЙф║Жц╕ЕцЩ░хТМцШУшп╗чЪДф╗гчаБя╝МхЬищЬАшжБчЪДцЧ╢хАЩя╝Мф╜ах░ЖцЫ┤хо╣цШУцЙ╛хИ░чЬЯцнгцЬЙцХИчЪДхЗ╜цХ░цЭещЗНч╗Дф╗гчаБхТМцПРщлШцАзшГ╜уАВ</p> <h3 id="щЗНцЮДцЦ╣ц│Хшп┤цШО-4"><a href="#щЗНцЮДцЦ╣ц│Хшп┤цШО-4" class="header-anchor">#</a> щЗНцЮДцЦ╣ц│Хшп┤цШО</h3> <h4 id="цПРчВ╝хЗ╜цХ░-extract-method"><a href="#цПРчВ╝хЗ╜цХ░-extract-method" class="header-anchor">#</a> цПРчВ╝хЗ╜цХ░(Extract Method)</h4> <p><strong>щЧощвШ</strong></p> <p>ф╜ацЬЙф╕Ацо╡ф╗гчаБхПпф╗еч╗Дч╗ЗхЬиф╕Аш╡╖уАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">printOwing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">printBanner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//print details</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;name: &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;amount: &quot;</span> <span class="token operator">+</span> <span class="token function">getOutstanding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>шзгхЖ│</strong></p> <p>чз╗хКиш┐Щцо╡ф╗гчаБхИ░ф╕Аф╕кцЦ░чЪДхЗ╜цХ░ф╕ня╝Мф╜┐чФихЗ╜цХ░чЪДш░ГчФицЭецЫ┐ф╗гшАБф╗гчаБуАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">printOwing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">printBanner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">printDetails</span><span class="token punctuation">(</span><span class="token function">getOutstanding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">printDetails</span><span class="token punctuation">(</span><span class="token keyword">double</span> outstanding<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;name: &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;amount: &quot;</span> <span class="token operator">+</span> outstanding<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="ф╗ецЯешпвхПЦф╗гф╕┤цЧ╢хПШщЗП-replace-temp-with-query"><a href="#ф╗ецЯешпвхПЦф╗гф╕┤цЧ╢хПШщЗП-replace-temp-with-query" class="header-anchor">#</a> ф╗ецЯешпвхПЦф╗гф╕┤цЧ╢хПШщЗП(Replace Temp with Query)</h4> <p><strong>щЧощвШ</strong></p> <p>х░Жшбиш╛╛х╝ПчЪДч╗УцЮЬцФ╛хЬих▒АщГихПШщЗПф╕ня╝МчД╢хРОхЬиф╗гчаБф╕нф╜┐чФиуАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">double</span> <span class="token function">calculateTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">double</span> basePrice <span class="token operator">=</span> quantity <span class="token operator">*</span> itemPrice<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>basePrice <span class="token operator">&gt;</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> basePrice <span class="token operator">*</span> <span class="token number">0.95</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> basePrice <span class="token operator">*</span> <span class="token number">0.98</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>шзгхЖ│</strong></p> <p>х░ЖцХ┤ф╕кшбиш╛╛х╝Пчз╗хКихИ░ф╕Аф╕кчЛмчлЛчЪДхЗ╜цХ░ф╕нх╣╢ш┐ФхЫЮч╗УцЮЬуАВф╜┐чФицЯешпвхЗ╜цХ░цЭецЫ┐ф╗гф╜┐чФихПШщЗПуАВхжВцЮЬщЬАшжБя╝МхПпф╗ехЬихЕ╢ф╗ЦхЗ╜цХ░ф╕нхРИх╣╢цЦ░хЗ╜цХ░уАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">double</span> <span class="token function">calculateTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">basePrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">basePrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.95</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">basePrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.98</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">double</span> <span class="token function">basePrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> quantity <span class="token operator">*</span> itemPrice<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="х╝ХхЕехПВцХ░хп╣ш▒б-introduce-parameter-object-3"><a href="#х╝ХхЕехПВцХ░хп╣ш▒б-introduce-parameter-object-3" class="header-anchor">#</a> х╝ХхЕехПВцХ░хп╣ш▒б(Introduce Parameter Object)</h4> <p><strong>щЧощвШ</strong></p> <p>цЯРф║ЫхПВцХ░цА╗цШпх╛ИшЗкчД╢хЬ░хРМцЧ╢хЗ║чО░уАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/introduce-parameter-object-before.png" alt=""></p> <p><strong>шзгхЖ│</strong></p> <p>ф╗еф╕Аф╕кхп╣ш▒бцЭехПЦф╗гш┐Щф║ЫхПВцХ░уАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/introduce-parameter-object-after.png" alt=""></p> <h4 id="ф┐ЭцМБхп╣ш▒бхоМцХ┤-preserve-whole-object-3"><a href="#ф┐ЭцМБхп╣ш▒бхоМцХ┤-preserve-whole-object-3" class="header-anchor">#</a> ф┐ЭцМБхп╣ш▒бхоМцХ┤(Preserve Whole Object)</h4> <p><strong>щЧощвШ</strong></p> <p>ф╜аф╗ОцЯРф╕кхп╣ш▒бф╕нхПЦхЗ║шЛех╣▓хА╝я╝Мх░ЖхоГф╗мф╜Ьф╕║цЯРф╕АцмбхЗ╜цХ░ш░ГчФицЧ╢чЪДхПВцХ░уАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span> low <span class="token operator">=</span> daysTempRange<span class="token punctuation">.</span><span class="token function">getLow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> high <span class="token operator">=</span> daysTempRange<span class="token punctuation">.</span><span class="token function">getHigh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> withinPlan <span class="token operator">=</span> plan<span class="token punctuation">.</span><span class="token function">withinRange</span><span class="token punctuation">(</span>low<span class="token punctuation">,</span> high<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>шзгхЖ│</strong></p> <p>цФ╣ф╕║ф╝ащАТцХ┤ф╕кхп╣ш▒буАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">boolean</span> withinPlan <span class="token operator">=</span> plan<span class="token punctuation">.</span><span class="token function">withinRange</span><span class="token punctuation">(</span>daysTempRange<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="ф╗ехЗ╜цХ░хп╣ш▒бхПЦф╗гхЗ╜цХ░-replace-method-with-method-object"><a href="#ф╗ехЗ╜цХ░хп╣ш▒бхПЦф╗гхЗ╜цХ░-replace-method-with-method-object" class="header-anchor">#</a> ф╗ехЗ╜цХ░хп╣ш▒бхПЦф╗гхЗ╜цХ░(Replace Method with Method Object)</h4> <p><strong>щЧощвШ</strong></p> <p>ф╜ацЬЙф╕Аф╕кш┐ЗщХ┐хЗ╜цХ░я╝МхоГчЪДх▒АщГихПШщЗПф║дч╗ЗхЬиф╕Аш╡╖я╝Мф╗ешЗ┤ф║Оф╜ацЧац│Хх║ФчФицПРчВ╝хЗ╜цХ░(Extract Method) уАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">price</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">double</span> primaryBasePrice<span class="token punctuation">;</span>
    <span class="token keyword">double</span> secondaryBasePrice<span class="token punctuation">;</span>
    <span class="token keyword">double</span> tertiaryBasePrice<span class="token punctuation">;</span>
    <span class="token comment">// long computation.</span>
    <span class="token comment">//...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>шзгхЖ│</strong></p> <p>х░ЖхЗ╜цХ░чз╗хИ░ф╕Аф╕кчЛмчлЛчЪДч▒╗ф╕ня╝Мф╜┐х╛Чх▒АщГихПШщЗПцИРф║Жш┐Щф╕кч▒╗чЪДхнЧцо╡уАВчД╢хРОя╝Мф╜ахПпф╗ех░ЖхЗ╜цХ░хИЖхЙ▓цИРш┐Щф╕кч▒╗ф╕нчЪДхдЪф╕кхЗ╜цХ░уАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">price</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PriceCalculator</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">PriceCalculator</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">double</span> primaryBasePrice<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">double</span> secondaryBasePrice<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">double</span> tertiaryBasePrice<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">PriceCalculator</span><span class="token punctuation">(</span><span class="token class-name">Order</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// copy relevant information from order object.</span>
    <span class="token comment">//...</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// long computation.</span>
    <span class="token comment">//...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="хИЖшзгцЭбф╗╢шбиш╛╛х╝П-decompose-conditional"><a href="#хИЖшзгцЭбф╗╢шбиш╛╛х╝П-decompose-conditional" class="header-anchor">#</a> хИЖшзгцЭбф╗╢шбиш╛╛х╝П(Decompose Conditional)</h4> <p><strong>щЧощвШ</strong></p> <p>ф╜ацЬЙхдНцЭВчЪДцЭбф╗╢шбиш╛╛х╝ПуАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span>SUMMER_START<span class="token punctuation">)</span> <span class="token operator">||</span> date<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span>SUMMER_END<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  charge <span class="token operator">=</span> quantity <span class="token operator">*</span> winterRate <span class="token operator">+</span> winterServiceCharge<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
  charge <span class="token operator">=</span> quantity <span class="token operator">*</span> summerRate<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>шзгхЖ│</strong></p> <p>ца╣цНоцЭбф╗╢хИЖцФпх░ЖцХ┤ф╕кцЭбф╗╢шбиш╛╛х╝ПхИЖшзгцИРхЗаф╕кхЗ╜цХ░уАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">notSummer</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  charge <span class="token operator">=</span> <span class="token function">winterCharge</span><span class="token punctuation">(</span>quantity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
  charge <span class="token operator">=</span> <span class="token function">summerCharge</span><span class="token punctuation">(</span>quantity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="ш┐ЗщХ┐хПВцХ░хИЧ"><a href="#ш┐ЗщХ┐хПВцХ░хИЧ" class="header-anchor">#</a> ш┐ЗщХ┐хПВцХ░хИЧ</h2> <blockquote><p>ш┐ЗщХ┐хПВцХ░хИЧ(Long Parameter List)</p> <p>ф╕Аф╕кхЗ╜цХ░цЬЙш╢Еш┐З 3уАБ4 ф╕кхЕехПВуАВ</p></blockquote> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/long-parameter-list-1.png" alt=""></p> <h3 id="щЧощвШхОЯхЫа-4"><a href="#щЧощвШхОЯхЫа-4" class="header-anchor">#</a> щЧощвШхОЯхЫа</h3> <p>ш┐ЗщХ┐хПВцХ░хИЧхПпшГ╜цШпх░ЖхдЪф╕кчоЧц│Хх╣╢хИ░ф╕Аф╕кхЗ╜цХ░ф╕нцЧ╢хПСчФЯчЪДуАВхЗ╜цХ░ф╕нчЪДхЕехПВхПпф╗ечФицЭецОзхИ╢цЬАч╗ИщАЙчФихУкф╕кчоЧц│ХхО╗цЙзшбМуАВ</p> <p>ш┐ЗщХ┐хПВцХ░хИЧф╣ЯхПпшГ╜цШпшзгшАжч▒╗ф╣ЛщЧ┤ф╛Эш╡ЦхЕ│ч│╗цЧ╢чЪДхЙпф║зхУБуАВф╛ЛхжВя╝МчФиф║ОхИЫх╗║хЗ╜цХ░ф╕нцЙАщЬАчЪДчЙ╣хоЪхп╣ш▒бчЪДф╗гчаБх╖▓ф╗ОхЗ╜цХ░чз╗хКихИ░ш░ГчФихЗ╜цХ░чЪДф╗гчаБхдДя╝Мф╜ЖхИЫх╗║чЪДхп╣ш▒бцШпф╜Ьф╕║хПВцХ░ф╝ащАТхИ░хЗ╜цХ░ф╕нуАВхЫацндя╝МхОЯхзЛч▒╗ф╕НхЖНчЯещБУхп╣ш▒бф╣ЛщЧ┤чЪДхЕ│ч│╗я╝Мх╣╢ф╕Фф╛Эш╡ЦцАзф╣Ях╖▓ч╗ПхЗПх░СуАВф╜ЖцШпхжВцЮЬхИЫх╗║чЪДш┐Щф║Ыхп╣ш▒бя╝МцпПф╕Аф╕кщГ╜х░ЖщЬАшжБхоГшЗкх╖▒чЪДхПВцХ░я╝Мш┐ЩцДПхС│чЭАш┐ЗщХ┐хПВцХ░хИЧуАВ</p> <p>хдкщХ┐чЪДхПВцХ░хИЧщЪ╛ф╗ечРЖшзгя╝МхдкхдЪхПВцХ░ф╝ЪщАацИРхЙНхРОф╕Нф╕АшЗ┤уАБф╕НцШУф╜┐чФия╝МшАМф╕Фф╕АцЧжщЬАшжБцЫ┤хдЪцХ░цНоя╝Мх░▒ф╕Нх╛Чф╕Нф┐оцФ╣хоГуАВ</p> <h3 id="шзгхЖ│цЦ╣цбИ"><a href="#шзгхЖ│цЦ╣цбИ" class="header-anchor">#</a> шзгхЖ│цЦ╣цбИ</h3> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/long-parameter-list-2.png" alt=""></p> <ul><li>хжВцЮЬхРСх╖▓цЬЙчЪДхп╣ш▒бхПСхЗ║ф╕АцЭбшп╖ц▒Вх░▒хПпф╗ехПЦф╗гф╕Аф╕кхПВцХ░я╝МщВгф╣Иф╜ах║Фшпеф╜┐чФи <code>ф╗ехЗ╜цХ░хПЦф╗гхПВцХ░(Replace Parameter with Methods)</code> уАВхЬиш┐ЩщЗМя╝Мя╝МтАЬх╖▓цЬЙчЪДхп╣ш▒бтАЭхПпшГ╜цШпхЗ╜цХ░цЙАх▒Юч▒╗щЗМчЪДф╕Аф╕кхнЧцо╡я╝Мф╣ЯхПпшГ╜цШпхПжф╕Аф╕кхПВцХ░уАВ</li> <li>ф╜аш┐ШхПпф╗еш┐РчФи <code>ф┐ЭцМБхп╣ш▒бхоМцХ┤(Preserve Whole Object)</code> х░ЖцЭешЗкхРМф╕Ахп╣ш▒бчЪДф╕АхаЖцХ░цНоцФ╢щЫЖш╡╖цЭея╝Мх╣╢ф╗ешпехп╣ш▒бцЫ┐цНвхоГф╗муАВ</li> <li>хжВцЮЬцЯРф║ЫцХ░цНоч╝║ф╣ПхРИчРЖчЪДхп╣ш▒бх╜Тх▒Юя╝МхПпф╜┐чФи <code>х╝ХхЕехПВцХ░хп╣ш▒б(Introduce Parameter Object)</code> ф╕║хоГф╗мхИ╢щАахЗ║ф╕Аф╕ктАЬхПВцХ░хп╣ш▒бтАЭуАВ</li></ul> <h3 id="цФ╢чЫК-5"><a href="#цФ╢чЫК-5" class="header-anchor">#</a> цФ╢чЫК</h3> <ul><li>цЫ┤цШУшп╗я╝МцЫ┤чоАчЯнчЪДф╗гчаБуАВ</li> <li>щЗНцЮДхПпшГ╜ф╝ЪцЪ┤щЬ▓хЗ║ф╣ЛхЙНцЬкц│ицДПхИ░чЪДщЗНхдНф╗гчаБуАВ</li></ul> <h3 id="ф╜ХцЧ╢х┐╜чХе-2"><a href="#ф╜ХцЧ╢х┐╜чХе-2" class="header-anchor">#</a> ф╜ХцЧ╢х┐╜чХе</h3> <ul><li>ш┐ЩщЗМцЬЙф╕Аф╕кщЗНшжБчЪДф╛ЛхдЦя╝ЪцЬЙцЧ╢хАЩф╜ацШОцШ╛ф╕НцГ│щАацИР&quot;швлш░ГчФихп╣ш▒б&quot;ф╕О&quot;ш╛Гхдзхп╣ш▒б&quot;щЧ┤чЪДцЯРчзНф╛Эш╡ЦхЕ│ч│╗уАВш┐ЩцЧ╢хАЩх░ЖцХ░цНоф╗Охп╣ш▒бф╕нцЛЖшзгхЗ║цЭехНХчЛмф╜Ьф╕║хПВцХ░я╝Мф╣Ях╛ИхРИцГЕчРЖуАВф╜ЖцШпшп╖ц│ицДПхЕ╢цЙАх╝ХхПСчЪДф╗гф╗╖уАВхжВцЮЬхПВцХ░хИЧхдкщХ┐цИЦхПШхМЦхдкщвСч╣Бя╝Мх░▒щЬАшжБщЗНцЦ░шАГшЩСшЗкх╖▒чЪДф╛Эш╡Цч╗УцЮДф║ЖуАВ</li></ul> <h3 id="щЗНцЮДцЦ╣ц│Хшп┤цШО-5"><a href="#щЗНцЮДцЦ╣ц│Хшп┤цШО-5" class="header-anchor">#</a> щЗНцЮДцЦ╣ц│Хшп┤цШО</h3> <h4 id="ф╗ехЗ╜цХ░хПЦф╗гхПВцХ░-replace-parameter-with-methods"><a href="#ф╗ехЗ╜цХ░хПЦф╗гхПВцХ░-replace-parameter-with-methods" class="header-anchor">#</a> ф╗ехЗ╜цХ░хПЦф╗гхПВцХ░(Replace Parameter with Methods)</h4> <p><strong>щЧощвШ</strong></p> <p>хп╣ш▒бш░ГчФицЯРф╕кхЗ╜цХ░я╝Мх╣╢х░ЖцЙАх╛Чч╗УцЮЬф╜Ьф╕║хПВцХ░я╝Мф╝ащАТч╗ЩхПжф╕Аф╕кхЗ╜цХ░уАВшАМцОехПЧшпехПВцХ░чЪДхЗ╜цХ░цЬмш║лф╣ЯшГ╜хдЯш░ГчФихЙНф╕Аф╕кхЗ╜цХ░уАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span> basePrice <span class="token operator">=</span> quantity <span class="token operator">*</span> itemPrice<span class="token punctuation">;</span>
<span class="token keyword">double</span> seasonDiscount <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSeasonalDiscount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">double</span> fees <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFees</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">double</span> finalPrice <span class="token operator">=</span> <span class="token function">discountedPrice</span><span class="token punctuation">(</span>basePrice<span class="token punctuation">,</span> seasonDiscount<span class="token punctuation">,</span> fees<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>шзгхЖ│</strong></p> <p>шойхПВцХ░цОехПЧшАЕхО╗щЩдшпещб╣хПВцХ░я╝Мх╣╢чЫ┤цОеш░ГчФихЙНф╕Аф╕кхЗ╜цХ░уАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span> basePrice <span class="token operator">=</span> quantity <span class="token operator">*</span> itemPrice<span class="token punctuation">;</span>
<span class="token keyword">double</span> finalPrice <span class="token operator">=</span> <span class="token function">discountedPrice</span><span class="token punctuation">(</span>basePrice<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="ф┐ЭцМБхп╣ш▒бхоМцХ┤-preserve-whole-object-4"><a href="#ф┐ЭцМБхп╣ш▒бхоМцХ┤-preserve-whole-object-4" class="header-anchor">#</a> ф┐ЭцМБхп╣ш▒бхоМцХ┤(Preserve Whole Object)</h4> <p><strong>щЧощвШ</strong></p> <p>ф╜аф╗ОцЯРф╕кхп╣ш▒бф╕нхПЦхЗ║шЛех╣▓хА╝я╝Мх░ЖхоГф╗мф╜Ьф╕║цЯРф╕АцмбхЗ╜цХ░ш░ГчФицЧ╢чЪДхПВцХ░уАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span> low <span class="token operator">=</span> daysTempRange<span class="token punctuation">.</span><span class="token function">getLow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> high <span class="token operator">=</span> daysTempRange<span class="token punctuation">.</span><span class="token function">getHigh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> withinPlan <span class="token operator">=</span> plan<span class="token punctuation">.</span><span class="token function">withinRange</span><span class="token punctuation">(</span>low<span class="token punctuation">,</span> high<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>шзгхЖ│</strong></p> <p>цФ╣ф╕║ф╝ащАТцХ┤ф╕кхп╣ш▒буАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">boolean</span> withinPlan <span class="token operator">=</span> plan<span class="token punctuation">.</span><span class="token function">withinRange</span><span class="token punctuation">(</span>daysTempRange<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="х╝ХхЕехПВцХ░хп╣ш▒б-introduce-parameter-object-4"><a href="#х╝ХхЕехПВцХ░хп╣ш▒б-introduce-parameter-object-4" class="header-anchor">#</a> х╝ХхЕехПВцХ░хп╣ш▒б(Introduce Parameter Object)</h4> <p><strong>щЧощвШ</strong></p> <p>цЯРф║ЫхПВцХ░цА╗цШпх╛ИшЗкчД╢хЬ░хРМцЧ╢хЗ║чО░уАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/introduce-parameter-object-before.png" alt=""></p> <p><strong>шзгхЖ│</strong></p> <p>ф╗еф╕Аф╕кхп╣ш▒бцЭехПЦф╗гш┐Щф║ЫхПВцХ░уАВ</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/design/refactor/introduce-parameter-object-after.png" alt=""></p> <h2 id="цЙйх▒ХщШЕшп╗"><a href="#цЙйх▒ХщШЕшп╗" class="header-anchor">#</a> цЙйх▒ХщШЕшп╗</h2> <ul><li><a href="https://github.com/dunwu/design/blob/master/docs/refactor/%E4%BB%A3%E7%A0%81%E7%9A%84%E5%9D%8F%E5%91%B3%E9%81%93%E5%92%8C%E9%87%8D%E6%9E%84.md" target="_blank" rel="noopener noreferrer">ф╗гчаБчЪДхЭПхС│щБУхТМщЗНцЮД<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/dunwu/design/blob/master/docs/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E4%BB%A3%E7%A0%81%E8%87%83%E8%82%BF.md" target="_blank" rel="noopener noreferrer">ф╗гчаБхЭПхС│щБУф╣Лф╗гчаБшЗГшВ┐<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/dunwu/design/blob/master/docs/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E6%BB%A5%E7%94%A8%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1.md" target="_blank" rel="noopener noreferrer">ф╗гчаБхЭПхС│щБУф╣Лц╗ечФищЭвхРСхп╣ш▒б<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/dunwu/design/blob/master/docs/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E5%8F%98%E9%9D%A9%E7%9A%84%E9%9A%9C%E7%A2%8D.md" target="_blank" rel="noopener noreferrer">ф╗гчаБхЭПхС│щБУф╣ЛхПШщЭйчЪДщЪЬчвН<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/dunwu/design/blob/master/docs/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E9%9D%9E%E5%BF%85%E8%A6%81%E7%9A%84.md" target="_blank" rel="noopener noreferrer">ф╗гчаБхЭПхС│щБУф╣ЛщЭЮх┐ЕшжБчЪД<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/dunwu/design/blob/master/docs/refactor/%E4%BB%A3%E7%A0%81%E5%9D%8F%E5%91%B3%E9%81%93%E4%B9%8B%E8%80%A6%E5%90%88.md" target="_blank" rel="noopener noreferrer">ф╗гчаБхЭПхС│щБУф╣ЛшАжхРИ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="хПВшАГш╡ДцЦЩ"><a href="#хПВшАГш╡ДцЦЩ" class="header-anchor">#</a> хПВшАГш╡ДцЦЩ</h2> <ul><li><a href="https://book.douban.com/subject/4199741/" target="_blank" rel="noopener noreferrer">уАКф╗гчаБцХ┤ц┤Бф╣ЛщБУуАЛ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://book.douban.com/subject/4262627/" target="_blank" rel="noopener noreferrer">уАКщЗНцЮД - цФ╣хЦДцЧвцЬЙф╗гчаБчЪДшо╛шобуАЛ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://book.douban.com/subject/1477390/" target="_blank" rel="noopener noreferrer">уАКф╗гчаБхдзхЕиуАЛ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>https://sourcemaking.com/refactoring</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/design/edit/master/docs/refactor/ф╗гчаБхЭПхС│щБУф╣Лф╗гчаБшЗГшВ┐.md" target="_blank" rel="noopener noreferrer">х╕охКйцИСф╗мцФ╣хЦДцндщб╡щЭвя╝Б</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">ф╕КцмбцЫ┤цЦ░:</span> <span class="time">4 months ago</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/design/assets/js/app.31535b90.js" defer></script><script src="/design/assets/js/4.843d76c1.js" defer></script><script src="/design/assets/js/72.f0a76070.js" defer></script><script src="/design/assets/js/5.eb6f8f38.js" defer></script>
  </body>
</html>
