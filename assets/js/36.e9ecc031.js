(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{433:function(v,_,t){"use strict";t.r(_);var r=t(15),a=Object(r.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"æ¶ˆæ¯é˜Ÿåˆ—åŸºæœ¬åŸç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ¶ˆæ¯é˜Ÿåˆ—åŸºæœ¬åŸç†"}},[v._v("#")]),v._v(" æ¶ˆæ¯é˜Ÿåˆ—åŸºæœ¬åŸç†")]),v._v(" "),t("blockquote",[t("p",[v._v("ğŸ“¦ æœ¬æ–‡å·²å½’æ¡£åˆ°ï¼šã€Œ"),t("a",{attrs:{href:"https://github.com/dunwu/blog",target:"_blank",rel:"noopener noreferrer"}},[v._v("blog"),t("OutboundLink")],1),v._v("ã€")]),v._v(" "),t("p",[v._v("æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessage Queueï¼Œç®€ç§° MQï¼‰æŠ€æœ¯æ˜¯"),t("strong",[v._v("åº”ç”¨é—´äº¤æ¢ä¿¡æ¯")]),v._v("çš„ä¸€ç§æŠ€æœ¯ã€‚")]),v._v(" "),t("p",[v._v("æ¶ˆæ¯é˜Ÿåˆ—ä¸»è¦è§£å†³å¼‚æ­¥å¤„ç†ã€åº”ç”¨é—´è€¦åˆï¼Œæµé‡å‰Šé”‹ç­‰é—®é¢˜ï¼Œå®ç°é«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨ï¼Œå¯ä¼¸ç¼©å’Œæœ€ç»ˆä¸€è‡´æ€§æ¶æ„ã€‚æ˜¯å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯ç¼ºå°‘çš„ä¸­é—´ä»¶ã€‚")]),v._v(" "),t("p",[v._v("ç›®å‰ä¸»æµçš„ MQ æœ‰ï¼šKafkaã€RabbitMQã€RocketMQã€ActiveMQï¼Œè€Œéƒ¨åˆ†æ•°æ®åº“å¦‚ Redisã€MySQL ä»¥åŠ phxsql ä¹Ÿå¯å®ç°æ¶ˆæ¯é˜Ÿåˆ—çš„åŠŸèƒ½ã€‚")]),v._v(" "),t("p",[v._v("æ³¨æ„ï¼š"),t("em",[v._v("ä¸ºäº†ç®€ä¾¿ï¼Œä¸‹æ–‡ä¸­é™¤äº†æ–‡ç« æ ‡é¢˜ï¼Œä¸€å¾‹ä½¿ç”¨ MQ ç®€ç§°")]),v._v("ã€‚")])]),v._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#1-mq-%E7%9A%84%E7%AE%80%E4%BB%8B"}},[v._v("1. MQ çš„ç®€ä»‹")]),v._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#11-%E4%BB%80%E4%B9%88%E6%98%AF-mq"}},[v._v("1.1. ä»€ä¹ˆæ˜¯ MQ")])]),v._v(" "),t("li",[t("a",{attrs:{href:"#12-mq-%E9%80%9A%E4%BF%A1%E6%A8%A1%E5%9E%8B"}},[v._v("1.2. MQ é€šä¿¡æ¨¡å‹")])])])]),v._v(" "),t("li",[t("a",{attrs:{href:"#2-mq-%E7%9A%84%E5%BA%94%E7%94%A8"}},[v._v("2. MQ çš„åº”ç”¨")]),v._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#21-%E5%BC%82%E6%AD%A5%E5%A4%84%E7%90%86"}},[v._v("2.1. å¼‚æ­¥å¤„ç†")])]),v._v(" "),t("li",[t("a",{attrs:{href:"#22-%E7%B3%BB%E7%BB%9F%E8%A7%A3%E8%80%A6"}},[v._v("2.2. ç³»ç»Ÿè§£è€¦")])]),v._v(" "),t("li",[t("a",{attrs:{href:"#23-%E6%B5%81%E9%87%8F%E5%89%8A%E5%B3%B0"}},[v._v("2.3. æµé‡å‰Šå³°")])]),v._v(" "),t("li",[t("a",{attrs:{href:"#24-%E4%BC%A0%E8%BE%93%E7%BC%93%E5%86%B2"}},[v._v("2.4. ä¼ è¾“ç¼“å†²")])]),v._v(" "),t("li",[t("a",{attrs:{href:"#25-%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7"}},[v._v("2.5. æœ€ç»ˆä¸€è‡´æ€§")])]),v._v(" "),t("li",[t("a",{attrs:{href:"#26-%E7%B3%BB%E7%BB%9F%E9%97%B4%E9%80%9A%E4%BF%A1"}},[v._v("2.6. ç³»ç»Ÿé—´é€šä¿¡")])])])]),v._v(" "),t("li",[t("a",{attrs:{href:"#3-mq-%E7%9A%84%E9%97%AE%E9%A2%98"}},[v._v("3. MQ çš„é—®é¢˜")]),v._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#31-%E9%87%8D%E5%A4%8D%E6%B6%88%E8%B4%B9"}},[v._v("3.1. é‡å¤æ¶ˆè´¹")])]),v._v(" "),t("li",[t("a",{attrs:{href:"#32-%E6%B6%88%E6%81%AF%E4%B8%A2%E5%A4%B1"}},[v._v("3.2. æ¶ˆæ¯ä¸¢å¤±")])]),v._v(" "),t("li",[t("a",{attrs:{href:"#33-%E6%B6%88%E6%81%AF%E7%9A%84%E9%A1%BA%E5%BA%8F%E6%80%A7"}},[v._v("3.3. æ¶ˆæ¯çš„é¡ºåºæ€§")])]),v._v(" "),t("li",[t("a",{attrs:{href:"#34-%E6%B6%88%E6%81%AF%E7%A7%AF%E5%8E%8B"}},[v._v("3.4. æ¶ˆæ¯ç§¯å‹")])])])]),v._v(" "),t("li",[t("a",{attrs:{href:"#4-mq-%E7%9A%84%E9%AB%98%E5%8F%AF%E7%94%A8"}},[v._v("4. MQ çš„é«˜å¯ç”¨")]),v._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#41-kafka-%E7%9A%84%E9%AB%98%E5%8F%AF%E7%94%A8"}},[v._v("4.1. Kafka çš„é«˜å¯ç”¨")])])])]),v._v(" "),t("li",[t("a",{attrs:{href:"#5-%E4%B8%BB%E6%B5%81-mq"}},[v._v("5. ä¸»æµ MQ")]),v._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#51-activemq"}},[v._v("5.1. ActiveMQ")])]),v._v(" "),t("li",[t("a",{attrs:{href:"#52-rabbitmq"}},[v._v("5.2. RabbitMQ")])]),v._v(" "),t("li",[t("a",{attrs:{href:"#53-rocketmq"}},[v._v("5.3. RocketMQ")])]),v._v(" "),t("li",[t("a",{attrs:{href:"#54-kafka"}},[v._v("5.4. Kafka")])]),v._v(" "),t("li",[t("a",{attrs:{href:"#55-mq-%E7%9A%84%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B"}},[v._v("5.5. MQ çš„æŠ€æœ¯é€‰å‹")])])])]),v._v(" "),t("li",[t("a",{attrs:{href:"#6-jms"}},[v._v("6. JMS")]),v._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#61-%E6%B6%88%E6%81%AF%E6%A8%A1%E5%9E%8B"}},[v._v("6.1. æ¶ˆæ¯æ¨¡å‹")])]),v._v(" "),t("li",[t("a",{attrs:{href:"#62-%E6%B6%88%E6%81%AF%E6%B6%88%E8%B4%B9"}},[v._v("6.2. æ¶ˆæ¯æ¶ˆè´¹")])]),v._v(" "),t("li",[t("a",{attrs:{href:"#63-jms-%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%9E%8B"}},[v._v("6.3. JMS ç¼–ç¨‹æ¨¡å‹")])])])]),v._v(" "),t("li",[t("a",{attrs:{href:"#7-%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"}},[v._v("7. å‚è€ƒèµ„æ–™")])])]),v._v(" "),t("h2",{attrs:{id:"_1-mq-çš„ç®€ä»‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-mq-çš„ç®€ä»‹"}},[v._v("#")]),v._v(" 1. MQ çš„ç®€ä»‹")]),v._v(" "),t("h3",{attrs:{id:"_1-1-ä»€ä¹ˆæ˜¯-mq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-ä»€ä¹ˆæ˜¯-mq"}},[v._v("#")]),v._v(" 1.1. ä»€ä¹ˆæ˜¯ MQ")]),v._v(" "),t("p",[v._v("æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessage Queueï¼Œç®€ç§° MQï¼‰æŠ€æœ¯æ˜¯åº”ç”¨é—´äº¤æ¢ä¿¡æ¯çš„ä¸€ç§æŠ€æœ¯ã€‚")]),v._v(" "),t("p",[v._v("æ¶ˆæ¯é˜Ÿåˆ—ä¸»è¦è§£å†³åº”ç”¨è€¦åˆï¼Œå¼‚æ­¥æ¶ˆæ¯ï¼Œæµé‡å‰Šé”‹ç­‰é—®é¢˜ï¼Œå®ç°é«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨ï¼Œå¯ä¼¸ç¼©å’Œæœ€ç»ˆä¸€è‡´æ€§æ¶æ„ã€‚æ˜¯å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯ç¼ºå°‘çš„ä¸­é—´ä»¶ã€‚")]),v._v(" "),t("p",[v._v("MQ æ˜¯æ¶ˆè´¹-ç”Ÿäº§è€…æ¨¡å‹çš„ä¸€ä¸ªå…¸å‹çš„ä»£è¡¨ï¼Œä¸€ç«¯å¾€æ¶ˆæ¯é˜Ÿåˆ—ä¸­ä¸æ–­å†™å…¥æ¶ˆæ¯ï¼Œè€Œå¦ä¸€ç«¯åˆ™å¯ä»¥è¯»å–é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ã€‚æ¶ˆæ¯å‘å¸ƒè€…åªç®¡æŠŠæ¶ˆæ¯å‘å¸ƒåˆ° MQ ä¸­è€Œä¸ç”¨ç®¡è°æ¥å–ï¼Œæ¶ˆæ¯ä½¿ç”¨è€…åªç®¡ä» MQ ä¸­å–æ¶ˆæ¯è€Œä¸ç®¡æ˜¯è°å‘å¸ƒçš„ã€‚è¿™æ ·å‘å¸ƒè€…å’Œä½¿ç”¨è€…éƒ½ä¸ç”¨çŸ¥é“å¯¹æ–¹çš„å­˜åœ¨ã€‚")]),v._v(" "),t("p",[v._v("MQ çš„æ•°æ®å¯é©»ç•™åœ¨å†…å­˜æˆ–ç£ç›˜ä¸Šï¼Œç›´åˆ°å®ƒä»¬è¢«åº”ç”¨ç¨‹åºè¯»å–ã€‚é€šè¿‡ MQï¼Œåº”ç”¨ç¨‹åºå¯ç‹¬ç«‹åœ°æ‰§è¡Œï¼Œå®ƒä»¬ä¸éœ€è¦çŸ¥é“å½¼æ­¤çš„ä½ç½®ï¼Œä¸éœ€è¦ç­‰å¾…æ¥æ”¶ç¨‹åºæ¥æ”¶æ­¤æ¶ˆæ¯ã€‚åœ¨åˆ†å¸ƒå¼è®¡ç®—ç¯å¢ƒä¸­ï¼Œä¸ºäº†é›†æˆåˆ†å¸ƒå¼åº”ç”¨ï¼Œå¼€å‘è€…éœ€è¦å¯¹å¼‚æ„ç½‘ç»œç¯å¢ƒä¸‹çš„åˆ†å¸ƒå¼åº”ç”¨æä¾›æœ‰æ•ˆçš„é€šä¿¡æ‰‹æ®µã€‚ä¸ºäº†ç®¡ç†éœ€è¦å…±äº«çš„ä¿¡æ¯ï¼Œå¯¹åº”ç”¨æä¾›å…¬å…±çš„ä¿¡æ¯äº¤æ¢æœºåˆ¶æ˜¯é‡è¦çš„ã€‚")]),v._v(" "),t("p",[v._v("ç›®å‰ä¸»æµçš„ MQ æœ‰ï¼šKafkaã€RabbitMQã€RocketMQã€ActiveMQã€‚")]),v._v(" "),t("h3",{attrs:{id:"_1-2-mq-é€šä¿¡æ¨¡å‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-mq-é€šä¿¡æ¨¡å‹"}},[v._v("#")]),v._v(" 1.2. MQ é€šä¿¡æ¨¡å‹")]),v._v(" "),t("p",[v._v("MQ é€šä¿¡æ¨¡å‹å¤§è‡´æœ‰ä»¥ä¸‹ç±»å‹ï¼š")]),v._v(" "),t("ul",[t("li",[t("strong",[v._v("ç‚¹å¯¹ç‚¹")]),v._v(" - ç‚¹å¯¹ç‚¹æ–¹å¼æ˜¯æœ€ä¸ºä¼ ç»Ÿå’Œå¸¸è§çš„é€šè®¯æ–¹å¼ï¼Œå®ƒæ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤šã€å¤šå¯¹ä¸€ç­‰å¤šç§é…ç½®æ–¹å¼ï¼Œæ”¯æŒæ ‘çŠ¶ã€ç½‘çŠ¶ç­‰å¤šç§æ‹“æ‰‘ç»“æ„ã€‚")]),v._v(" "),t("li",[t("strong",[v._v("å¤šç‚¹å¹¿æ’­")]),v._v(' - MQ é€‚ç”¨äºä¸åŒç±»å‹çš„åº”ç”¨ã€‚å…¶ä¸­é‡è¦çš„ï¼Œä¹Ÿæ˜¯æ­£åœ¨å‘å±•ä¸­çš„æ˜¯"å¤šç‚¹å¹¿æ’­"åº”ç”¨ï¼Œå³èƒ½å¤Ÿå°†æ¶ˆæ¯å‘é€åˆ°å¤šä¸ªç›®æ ‡ç«™ç‚¹ (Destination List)ã€‚å¯ä»¥ä½¿ç”¨ä¸€æ¡ MQ æŒ‡ä»¤å°†å•ä¸€æ¶ˆæ¯å‘é€åˆ°å¤šä¸ªç›®æ ‡ç«™ç‚¹ï¼Œå¹¶ç¡®ä¿ä¸ºæ¯ä¸€ç«™ç‚¹å¯é åœ°æä¾›ä¿¡æ¯ã€‚MQ ä¸ä»…æä¾›äº†å¤šç‚¹å¹¿æ’­çš„åŠŸèƒ½ï¼Œè€Œä¸”è¿˜æ‹¥æœ‰æ™ºèƒ½æ¶ˆæ¯åˆ†å‘åŠŸèƒ½ï¼Œåœ¨å°†ä¸€æ¡æ¶ˆæ¯å‘é€åˆ°åŒä¸€ç³»ç»Ÿä¸Šçš„å¤šä¸ªç”¨æˆ·æ—¶ï¼ŒMQ å°†æ¶ˆæ¯çš„ä¸€ä¸ªå¤åˆ¶ç‰ˆæœ¬å’Œè¯¥ç³»ç»Ÿä¸Šæ¥æ”¶è€…çš„åå•å‘é€åˆ°ç›®æ ‡ MQ ç³»ç»Ÿã€‚ç›®æ ‡ MQ ç³»ç»Ÿåœ¨æœ¬åœ°å¤åˆ¶è¿™äº›æ¶ˆæ¯ï¼Œå¹¶å°†å®ƒä»¬å‘é€åˆ°åå•ä¸Šçš„é˜Ÿåˆ—ï¼Œä»è€Œå°½å¯èƒ½å‡å°‘ç½‘ç»œçš„ä¼ è¾“é‡ã€‚')]),v._v(" "),t("li",[t("strong",[v._v("å‘å¸ƒ/è®¢é˜… (Publish/Subscribe)")]),v._v(" - å‘å¸ƒ/è®¢é˜…æ¨¡å¼ä½¿æ¶ˆæ¯çš„åˆ†å‘å¯ä»¥çªç ´ç›®çš„é˜Ÿåˆ—åœ°ç†ä½ç½®çš„é™åˆ¶ï¼Œä½¿æ¶ˆæ¯æŒ‰ç…§ç‰¹å®šçš„ä¸»é¢˜ç”šè‡³å†…å®¹è¿›è¡Œåˆ†å‘ï¼Œç”¨æˆ·æˆ–åº”ç”¨ç¨‹åºå¯ä»¥æ ¹æ®ä¸»é¢˜æˆ–å†…å®¹æ¥æ”¶åˆ°æ‰€éœ€è¦çš„æ¶ˆæ¯ã€‚å‘å¸ƒ/è®¢é˜…æ¨¡å¼ä½¿å¾—å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»å˜å¾—æ›´ä¸ºæ¾æ•£ï¼Œå‘é€è€…ä¸å¿…å…³å¿ƒæ¥æ”¶è€…çš„ç›®çš„åœ°å€ï¼Œè€Œæ¥æ”¶è€…ä¹Ÿä¸å¿…å…³å¿ƒæ¶ˆæ¯çš„å‘é€åœ°å€ï¼Œè€Œåªæ˜¯æ ¹æ®æ¶ˆæ¯çš„ä¸»é¢˜è¿›è¡Œæ¶ˆæ¯çš„æ”¶å‘ã€‚")]),v._v(" "),t("li",[t("strong",[v._v("é›†ç¾¤ (Cluster)")]),v._v(" - ä¸ºäº†ç®€åŒ–ç‚¹å¯¹ç‚¹é€šè®¯æ¨¡å¼ä¸­çš„ç³»ç»Ÿé…ç½®ï¼ŒMQ æä¾› Cluster(é›†ç¾¤) çš„è§£å†³æ–¹æ¡ˆã€‚é›†ç¾¤ç±»ä¼¼äºä¸€ä¸ªåŸŸ (Domain)ï¼Œé›†ç¾¤å†…éƒ¨çš„é˜Ÿåˆ—ç®¡ç†å™¨ä¹‹é—´é€šè®¯æ—¶ï¼Œä¸éœ€è¦ä¸¤ä¸¤ä¹‹é—´å»ºç«‹æ¶ˆæ¯é€šé“ï¼Œè€Œæ˜¯é‡‡ç”¨é›†ç¾¤ (Cluster) é€šé“ä¸å…¶å®ƒæˆå‘˜é€šè®¯ï¼Œä»è€Œå¤§å¤§ç®€åŒ–äº†ç³»ç»Ÿé…ç½®ã€‚æ­¤å¤–ï¼Œé›†ç¾¤ä¸­çš„é˜Ÿåˆ—ç®¡ç†å™¨ä¹‹é—´èƒ½å¤Ÿè‡ªåŠ¨è¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œå½“æŸä¸€é˜Ÿåˆ—ç®¡ç†å™¨å‡ºç°æ•…éšœæ—¶ï¼Œå…¶å®ƒé˜Ÿåˆ—ç®¡ç†å™¨å¯ä»¥æ¥ç®¡å®ƒçš„å·¥ä½œï¼Œä»è€Œå¤§å¤§æé«˜ç³»ç»Ÿçš„é«˜å¯é æ€§ã€‚")])]),v._v(" "),t("h2",{attrs:{id:"_2-mq-çš„åº”ç”¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-mq-çš„åº”ç”¨"}},[v._v("#")]),v._v(" 2. MQ çš„åº”ç”¨")]),v._v(" "),t("h3",{attrs:{id:"_2-1-å¼‚æ­¥å¤„ç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-å¼‚æ­¥å¤„ç†"}},[v._v("#")]),v._v(" 2.1. å¼‚æ­¥å¤„ç†")]),v._v(" "),t("blockquote",[t("p",[v._v("MQ å¯ä»¥å°†ç³»ç»Ÿé—´çš„å¤„ç†æµç¨‹å¼‚æ­¥åŒ–ï¼Œå‡å°‘ç­‰å¾…å“åº”çš„æ—¶é—´ï¼Œä»è€Œæé«˜æ•´ä½“å¹¶å‘ååé‡ã€‚")]),v._v(" "),t("p",[v._v("ä¸€èˆ¬ï¼ŒMQ å¼‚æ­¥å¤„ç†åº”ç”¨äºéæ ¸å¿ƒæµç¨‹ï¼Œä¾‹å¦‚ï¼šçŸ­ä¿¡/é‚®ä»¶é€šçŸ¥ã€æ•°æ®æ¨é€ã€ä¸ŠæŠ¥æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒ/æ—¥å¿—ä¸­å¿ƒç­‰ã€‚")])]),v._v(" "),t("p",[v._v("å‡è®¾è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œç”¨æˆ·å‘ç³»ç»Ÿ A å‘èµ·è¯·æ±‚ï¼Œç³»ç»Ÿ A å¤„ç†è®¡ç®—åªéœ€è¦ 10 msï¼Œç„¶åé€šçŸ¥ç³»ç»Ÿ BCD å†™åº“ï¼Œç³»ç»Ÿ BCD å†™åº“è€—æ—¶åˆ†åˆ«ä¸ºï¼š100msã€200msã€300msã€‚æœ€ç»ˆæ€»è€—æ—¶ä¸ºï¼š 10+100ms+200ms+300ms=610msã€‚æ­¤å¤–ï¼ŒåŠ ä¸Šè¯·æ±‚å’Œå“åº”çš„ç½‘ç»œä¼ è¾“æ—¶é—´ï¼Œä»ç”¨æˆ·è§’åº¦çœ‹ï¼Œå¯èƒ½è¦ç­‰å¾…å°†è¿‘ 1s æ‰èƒ½å¾—åˆ°ç»“æœã€‚")]),v._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/cs/design/theory/mq/mq_3.png",alt:"img"}})]),v._v(" "),t("p",[v._v("å¦‚æœä½¿ç”¨ MQï¼Œç³»ç»Ÿ A æ¥åˆ°è¯·æ±‚åï¼Œè€—æ—¶ 10ms å¤„ç†è®¡ç®—ï¼Œç„¶åå‘ç³»ç»Ÿ BCD è¿ç»­å‘é€æ¶ˆæ¯ï¼Œå‡è®¾è€—æ—¶ 5msã€‚é‚£ä¹ˆ è¿™ä¸€è¿‡ç¨‹çš„æ€»è€—æ—¶ä¸º 3ms + 5ms = 8msï¼Œè¿™ç›¸æ¯”äº 610 msï¼Œå¤§å¤§ç¼©çŸ­äº†å“åº”æ—¶é—´ã€‚è‡³äºç³»ç»Ÿ BCD çš„å†™åº“æ“ä½œï¼Œåªè¦è‡ªè¡Œæ¶ˆè´¹ MQ åå¤„ç†å³å¯ï¼Œç”¨æˆ·æ— éœ€å…³æ³¨ã€‚")]),v._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/cs/design/theory/mq/mq_4.png",alt:"img"}})]),v._v(" "),t("h3",{attrs:{id:"_2-2-ç³»ç»Ÿè§£è€¦"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-ç³»ç»Ÿè§£è€¦"}},[v._v("#")]),v._v(" 2.2. ç³»ç»Ÿè§£è€¦")]),v._v(" "),t("blockquote",[t("p",[v._v("é€šè¿‡ MQï¼Œå¯ä»¥æ¶ˆé™¤ç³»ç»Ÿé—´çš„å¼ºè€¦åˆã€‚å®ƒçš„å¥½å¤„åœ¨äºï¼š")]),v._v(" "),t("ul",[t("li",[v._v("æ¶ˆæ¯çš„æ¶ˆè´¹è€…ç³»ç»Ÿå¯ä»¥éšæ„å¢åŠ ï¼Œæ— éœ€ä¿®æ”¹ç”Ÿäº§è€…ç³»ç»Ÿçš„ä»£ç ã€‚")]),v._v(" "),t("li",[v._v("ç”Ÿäº§è€…ç³»ç»Ÿã€æ¶ˆè´¹è€…ç³»ç»Ÿå½¼æ­¤ä¸ä¼šå½±å“å¯¹æ–¹çš„æµç¨‹ã€‚\n"),t("ul",[t("li",[v._v("å¦‚æœç”Ÿäº§è€…ç³»ç»Ÿå®•æœºï¼Œæ¶ˆè´¹è€…ç³»ç»Ÿæ”¶ä¸åˆ°æ¶ˆæ¯ï¼Œå°±ä¸ä¼šæœ‰ä¸‹ä¸€æ­¥çš„åŠ¨ä½œã€‚")]),v._v(" "),t("li",[v._v("å¦‚æœæ¶ˆè´¹è€…ç³»ç»Ÿå®•æœºï¼Œç”Ÿäº§è€…ç³»ç»Ÿè®©ç„¶å¯ä»¥æ­£å¸¸å‘é€æ¶ˆæ¯ï¼Œä¸å½±å“æµç¨‹ã€‚")])])])])]),v._v(" "),t("p",[v._v("ä¸åŒç³»ç»Ÿå¦‚æœè¦å»ºç«‹é€šä¿¡ï¼Œä¼ ç»Ÿçš„åšæ³•æ˜¯ï¼šè°ƒç”¨æ¥å£ã€‚")]),v._v(" "),t("p",[v._v("å¦‚æœéœ€è¦å’Œæ–°çš„ç³»ç»Ÿå»ºç«‹é€šä¿¡æˆ–åˆ é™¤å·²å»ºç«‹çš„é€šä¿¡ï¼Œéƒ½éœ€è¦ä¿®æ”¹ä»£ç ï¼Œè¿™ç§æ–¹æ¡ˆæ˜¾ç„¶è€¦åˆåº¦å¾ˆé«˜ã€‚")]),v._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/cs/design/theory/mq/mq_1.png",alt:"img"}})]),v._v(" "),t("p",[v._v("å¦‚æœä½¿ç”¨ MQï¼Œç³»ç»Ÿé—´çš„é€šä¿¡åªéœ€è¦é€šè¿‡å‘å¸ƒ/è®¢é˜…ï¼ˆPub/Subï¼‰æ¨¡å‹å³å¯ï¼Œå½¼æ­¤æ²¡æœ‰ç›´æ¥è”ç³»ï¼Œä¹Ÿå°±ä¸éœ€è¦ç›¸äº’æ„ŸçŸ¥ï¼Œä»è€Œè¾¾åˆ° "),t("strong",[v._v("è§£è€¦")]),v._v("ã€‚")]),v._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/cs/design/theory/mq/mq_2.png",alt:"img"}})]),v._v(" "),t("h3",{attrs:{id:"_2-3-æµé‡å‰Šå³°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-æµé‡å‰Šå³°"}},[v._v("#")]),v._v(" 2.3. æµé‡å‰Šå³°")]),v._v(" "),t("blockquote",[t("p",[v._v("å½“ "),t("strong",[v._v("ä¸Šä¸‹æ¸¸ç³»ç»Ÿ")]),v._v(" å¤„ç†èƒ½åŠ›å­˜åœ¨å·®è·çš„æ—¶å€™ï¼Œåˆ©ç”¨ MQ åšä¸€ä¸ª â€œ"),t("strong",[v._v("æ¼æ–—")]),v._v("â€ æ¨¡å‹ï¼Œè¿›è¡Œ "),t("strong",[v._v("æµæ§")]),v._v("ã€‚æŠŠ MQ å½“æˆå¯é çš„ "),t("strong",[v._v("æ¶ˆæ¯æš‚å­˜åœ°")]),v._v("ï¼Œè¿›è¡Œä¸€å®šç¨‹åº¦çš„ "),t("strong",[v._v("æ¶ˆæ¯å †ç§¯")]),v._v("ï¼›åœ¨ä¸‹æ¸¸æœ‰èƒ½åŠ›å¤„ç†çš„æ—¶å€™ï¼Œå†å‘é€æ¶ˆæ¯ã€‚")]),v._v(" "),t("p",[v._v("MQ çš„æµé‡å‰Šå³°å¸¸ç”¨äºé«˜å¹¶å‘åœºæ™¯ï¼ˆä¾‹å¦‚ï¼šç§’æ€ã€å›¢æŠ¢ç­‰ä¸šåŠ¡åœºæ™¯ï¼‰ï¼Œå®ƒæ˜¯ç¼“è§£ç¬æ—¶æš´å¢æµé‡çš„æ ¸å¿ƒæ‰‹æ®µä¹‹ä¸€ã€‚")]),v._v(" "),t("p",[v._v("å¦‚æœæ²¡æœ‰ MQï¼Œä¸¤ä¸ªç³»ç»Ÿä¹‹é—´é€šè¿‡ "),t("strong",[v._v("åå•†")]),v._v("ã€"),t("strong",[v._v("æ»‘åŠ¨çª—å£")]),v._v("ã€"),t("strong",[v._v("é™æµ")]),v._v("/"),t("strong",[v._v("é™çº§")]),v._v("/"),t("strong",[v._v("ç†”æ–­")]),v._v(" ç­‰å¤æ‚çš„æ–¹æ¡ˆä¹Ÿèƒ½å®ç° "),t("strong",[v._v("æµæ§")]),v._v("ã€‚ä½† "),t("strong",[v._v("ç³»ç»Ÿå¤æ‚æ€§")]),v._v(" æŒ‡æ•°çº§å¢é•¿ï¼ŒåŠ¿å¿…åœ¨ä¸Šæ¸¸æˆ–è€…ä¸‹æ¸¸åšå­˜å‚¨ï¼Œå¹¶ä¸”è¦å¤„ç† "),t("strong",[v._v("å®šæ—¶")]),v._v("ã€"),t("strong",[v._v("æ‹¥å¡")]),v._v(" ç­‰ä¸€ç³»åˆ—é—®é¢˜ã€‚è€Œä¸”æ¯å½“æœ‰ "),t("strong",[v._v("å¤„ç†èƒ½åŠ›æœ‰å·®è·")]),v._v(" çš„æ—¶å€™ï¼Œéƒ½éœ€è¦ "),t("strong",[v._v("å•ç‹¬")]),v._v(" å¼€å‘ä¸€å¥—é€»è¾‘æ¥ç»´æŠ¤è¿™å¥—é€»è¾‘ã€‚")])]),v._v(" "),t("p",[v._v("å‡è®¾æŸä¸ªç³»ç»Ÿè¯»å†™æ•°æ®åº“çš„ç¨³å®šæ€§èƒ½ä¸ºæ¯ç§’å¤„ç† 1000 æ¡æ•°æ®ã€‚å¹³å¸¸æƒ…å†µä¸‹ï¼Œè¿œè¿œè¾¾ä¸åˆ°è¿™ä¹ˆå¤§çš„å¤„ç†é‡ã€‚å‡è®¾ï¼Œå› ä¸ºå› ä¸ºåšæ´»åŠ¨ï¼Œç³»ç»Ÿçš„ç¬æ—¶è¯·æ±‚é‡å‰§å¢ï¼Œè¾¾åˆ°æ¯ç§’ 10000 ä¸ªå¹¶å‘è¯·æ±‚ï¼Œæ•°æ®åº“æ ¹æœ¬æ‰¿å—ä¸äº†ï¼Œå¯èƒ½ç›´æ¥å°±æŠŠæ•°æ®åº“ç»™æ•´å´©æºƒäº†ï¼Œè¿™æ ·ç³»ç»ŸæœåŠ¡å°±ä¸å¯ç”¨äº†ã€‚")]),v._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/cs/design/theory/mq/mq_5.png",alt:"img"}})]),v._v(" "),t("p",[v._v("å¦‚æœä½¿ç”¨ MQï¼Œæ¯ç§’å†™å…¥ 10000 æ¡è¯·æ±‚ï¼Œä½†æ˜¯ç³»ç»Ÿ A æ¯ç§’åªä» MQ ä¸­æ¶ˆè´¹ 1000 æ¡è¯·æ±‚ï¼Œç„¶åå†™å…¥æ•°æ®åº“ã€‚è¿™æ ·ï¼Œå°±ä¸ä¼šè¶…è¿‡æ•°æ®åº“çš„æ‰¿å—èƒ½åŠ›ï¼Œè€Œæ˜¯æŠŠè¯·æ±‚ç§¯å‹åœ¨ MQ ä¸­ã€‚åªè¦é«˜å³°æœŸä¸€è¿‡ï¼Œç³»ç»Ÿ A å°±ä¼šå¾ˆå¿«æŠŠç§¯å‹çš„æ¶ˆæ¯ç»™å¤„ç†æ‰ã€‚")]),v._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/cs/design/theory/mq/mq_6.png",alt:"img"}})]),v._v(" "),t("h3",{attrs:{id:"_2-4-ä¼ è¾“ç¼“å†²"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-ä¼ è¾“ç¼“å†²"}},[v._v("#")]),v._v(" 2.4. ä¼ è¾“ç¼“å†²")]),v._v(" "),t("p",[v._v("ï¼ˆ1ï¼‰MQ å¸¸è¢«ç”¨äºåšæµ·é‡æ•°æ®çš„ä¼ è¾“ç¼“å†²ã€‚")]),v._v(" "),t("p",[v._v("ä¾‹å¦‚ï¼ŒKafka å¸¸è¢«ç”¨äºåšä¸ºå„ç§æ—¥å¿—æ•°æ®ã€é‡‡é›†æ•°æ®çš„æ•°æ®ä¸­è½¬ã€‚ç„¶åï¼ŒKafka å°†æ•°æ®è½¬å‘ç»™ Logstashã€Elasticsearch ä¸­ï¼Œç„¶ååŸºäº Elasticsearch æ¥åšæ—¥å¿—ä¸­å¿ƒï¼Œæä¾›æ£€ç´¢ã€èšåˆã€åˆ†ææ—¥å¿—çš„èƒ½åŠ›ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡ Kibana é›†æˆ Elasticsearch æ•°æ®è¿›è¡Œå¯è§†åŒ–å±•ç¤ºï¼Œæˆ–è‡ªè¡Œè¿›è¡Œå®šåˆ¶åŒ–å¼€å‘ã€‚")]),v._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/snap/20200930164342.png",alt:"img"}})]),v._v(" "),t("p",[v._v("ï¼ˆ2ï¼‰MQ ä¹Ÿå¯ä»¥è¢«ç”¨äºæµå¼å¤„ç†ã€‚")]),v._v(" "),t("p",[v._v("ä¾‹å¦‚ï¼ŒKafka å‡ ä¹å·²ç»æ˜¯æµè®¡ç®—çš„æ•°æ®é‡‡é›†ç«¯çš„æ ‡å‡†ç»„ä»¶ã€‚è€Œæµè®¡ç®—é€šè¿‡å®æ—¶æ•°æ®å¤„ç†èƒ½åŠ›ï¼Œæä¾›äº†æ›´ä¸ºå¿«æ·çš„èšåˆè®¡ç®—èƒ½åŠ›ï¼Œè¢«å¤§é‡åº”ç”¨äºé“¾è·¯ç›‘æ§ã€å®æ—¶ç›‘æ§ã€å®æ—¶æ•°ä»“ã€å®æ—¶å¤§å±ã€é£æ§ã€æ¨èç­‰åº”ç”¨é¢†åŸŸã€‚")]),v._v(" "),t("h3",{attrs:{id:"_2-5-æœ€ç»ˆä¸€è‡´æ€§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-æœ€ç»ˆä¸€è‡´æ€§"}},[v._v("#")]),v._v(" 2.5. æœ€ç»ˆä¸€è‡´æ€§")]),v._v(" "),t("p",[t("strong",[v._v("æœ€ç»ˆä¸€è‡´æ€§")]),v._v(" ä¸æ˜¯ "),t("strong",[v._v("æ¶ˆæ¯é˜Ÿåˆ—")]),v._v(" çš„å¿…å¤‡ç‰¹æ€§ï¼Œä½†ç¡®å®å¯ä»¥ä¾é  "),t("strong",[v._v("æ¶ˆæ¯é˜Ÿåˆ—")]),v._v(" æ¥åš "),t("strong",[v._v("æœ€ç»ˆä¸€è‡´æ€§")]),v._v(" çš„äº‹æƒ…ã€‚")]),v._v(" "),t("ul",[t("li",[t("strong",[v._v("å…ˆå†™æ¶ˆæ¯å†æ“ä½œ")]),v._v("ï¼Œç¡®ä¿æ“ä½œå®Œæˆåå†ä¿®æ”¹æ¶ˆæ¯çŠ¶æ€ã€‚"),t("strong",[v._v("å®šæ—¶ä»»åŠ¡è¡¥å¿æœºåˆ¶")]),v._v(" å®ç°æ¶ˆæ¯ "),t("strong",[v._v("å¯é å‘é€æ¥æ”¶")]),v._v("ã€ä¸šåŠ¡æ“ä½œçš„å¯é æ‰§è¡Œï¼Œè¦æ³¨æ„ "),t("strong",[v._v("æ¶ˆæ¯é‡å¤")]),v._v(" ä¸ "),t("strong",[v._v("å¹‚ç­‰è®¾è®¡")]),v._v("ã€‚")]),v._v(" "),t("li",[v._v("æ‰€æœ‰ä¸ä¿è¯ "),t("code",[v._v("100%")]),v._v(" "),t("strong",[v._v("ä¸ä¸¢æ¶ˆæ¯")]),v._v(" çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç†è®ºä¸Šæ— æ³•å®ç° "),t("strong",[v._v("æœ€ç»ˆä¸€è‡´æ€§")]),v._v("ã€‚")])]),v._v(" "),t("blockquote",[t("p",[v._v("åƒ "),t("code",[v._v("Kafka")]),v._v(" ä¸€ç±»çš„è®¾è®¡ï¼Œåœ¨è®¾è®¡å±‚é¢ä¸Šå°±æœ‰ "),t("strong",[v._v("ä¸¢æ¶ˆæ¯")]),v._v(" çš„å¯èƒ½ï¼ˆæ¯”å¦‚ "),t("strong",[v._v("å®šæ—¶åˆ·ç›˜")]),v._v("ï¼Œå¦‚æœæ‰ç”µå°±ä¼šä¸¢æ¶ˆæ¯ï¼‰ã€‚å“ªæ€•åªä¸¢åƒåˆ†ä¹‹ä¸€çš„æ¶ˆæ¯ï¼Œä¸šåŠ¡ä¹Ÿå¿…é¡»ç”¨å…¶ä»–çš„æ‰‹æ®µæ¥ä¿è¯ç»“æœæ­£ç¡®ã€‚")])]),v._v(" "),t("h3",{attrs:{id:"_2-6-ç³»ç»Ÿé—´é€šä¿¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-ç³»ç»Ÿé—´é€šä¿¡"}},[v._v("#")]),v._v(" 2.6. ç³»ç»Ÿé—´é€šä¿¡")]),v._v(" "),t("p",[v._v("æ¶ˆæ¯é˜Ÿåˆ—ä¸€èˆ¬éƒ½å†…ç½®äº† "),t("strong",[v._v("é«˜æ•ˆçš„é€šä¿¡æœºåˆ¶")]),v._v("ï¼Œå› æ­¤ä¹Ÿå¯ä»¥ç”¨äºå•çº¯çš„ "),t("strong",[v._v("æ¶ˆæ¯é€šè®¯")]),v._v("ï¼Œæ¯”å¦‚å®ç° "),t("strong",[v._v("ç‚¹å¯¹ç‚¹æ¶ˆæ¯é˜Ÿåˆ—")]),v._v(" æˆ–è€… "),t("strong",[v._v("èŠå¤©å®¤")]),v._v(" ç­‰ã€‚")]),v._v(" "),t("p",[t("strong",[v._v("ç”Ÿäº§è€…/æ¶ˆè´¹è€…")]),v._v(" æ¨¡å¼ï¼Œåªéœ€è¦å…³å¿ƒæ¶ˆæ¯æ˜¯å¦ "),t("strong",[v._v("é€è¾¾é˜Ÿåˆ—")]),v._v("ï¼Œè‡³äºè°å¸Œæœ›è®¢é˜…å’Œéœ€è¦æ¶ˆè´¹ï¼Œæ˜¯ "),t("strong",[v._v("ä¸‹æ¸¸")]),v._v(" çš„äº‹æƒ…ï¼Œæ— ç–‘æå¤§åœ°å‡å°‘äº†å¼€å‘å’Œè”è°ƒçš„å·¥ä½œé‡ã€‚")]),v._v(" "),t("h2",{attrs:{id:"_3-mq-çš„é—®é¢˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-mq-çš„é—®é¢˜"}},[v._v("#")]),v._v(" 3. MQ çš„é—®é¢˜")]),v._v(" "),t("p",[v._v("ä»»ä½•æŠ€æœ¯éƒ½ä¼šæœ‰åˆ©æœ‰å¼Šï¼ŒMQ ç»™æ•´ä½“ç³»ç»Ÿæ¶æ„å¸¦æ¥å¾ˆå¤šå¥½å¤„ï¼Œä½†ä¹Ÿä¼šä»˜å‡ºä¸€å®šçš„ä»£ä»·ã€‚")]),v._v(" "),t("p",[v._v("MQ ä¸»è¦å¼•å…¥äº†ä»¥ä¸‹é—®é¢˜ï¼š")]),v._v(" "),t("ul",[t("li",[t("strong",[v._v("ç³»ç»Ÿå¯ç”¨æ€§é™ä½")]),v._v("ï¼šå¼•å…¥äº† MQ åï¼Œé€šä¿¡éœ€è¦åŸºäº MQ å®Œæˆï¼Œå¦‚æœ MQ å®•æœºï¼Œåˆ™æœåŠ¡ä¸å¯ç”¨ã€‚å› æ­¤ï¼ŒMQ è¦ä¿è¯æ˜¯é«˜å¯ç”¨çš„ï¼Œè¯¦æƒ…å‚è€ƒï¼š"),t("a",{attrs:{href:"#MQ-%E7%9A%84%E9%AB%98%E5%8F%AF%E7%94%A8"}},[v._v("MQ çš„é«˜å¯ç”¨")])]),v._v(" "),t("li",[t("strong",[v._v("ç³»ç»Ÿå¤æ‚åº¦æé«˜")]),v._v("ï¼šä½¿ç”¨ MQï¼Œéœ€è¦å…³æ³¨ä¸€äº›æ–°çš„é—®é¢˜ï¼š\n"),t("ul",[t("li",[v._v("å¦‚ä½•ä¿è¯æ¶ˆæ¯æ²¡æœ‰ "),t("strong",[v._v("é‡å¤æ¶ˆè´¹")]),v._v("ï¼Ÿ")]),v._v(" "),t("li",[v._v("å¦‚ä½•å¤„ç† "),t("strong",[v._v("æ¶ˆæ¯ä¸¢å¤±")]),v._v(" çš„é—®é¢˜ï¼Ÿ")]),v._v(" "),t("li",[v._v("å¦‚ä½•ä¿è¯ä¼ é€’ "),t("strong",[v._v("æ¶ˆæ¯çš„é¡ºåºæ€§")]),v._v("ï¼Ÿ")]),v._v(" "),t("li",[v._v("å¦‚ä½•å¤„ç†å¤§é‡ "),t("strong",[v._v("æ¶ˆæ¯ç§¯å‹")]),v._v(" çš„é—®é¢˜ï¼Ÿ")])])]),v._v(" "),t("li",[t("strong",[v._v("ä¸€è‡´æ€§é—®é¢˜")]),v._v("ï¼šå‡è®¾ç³»ç»Ÿ A å¤„ç†å®Œç›´æ¥è¿”å›æˆåŠŸçš„ç»“æœç»™ç”¨æˆ·ï¼Œç”¨æˆ·è®¤ä¸ºè¯·æ±‚æˆåŠŸã€‚ä½†å¦‚æœæ­¤æ—¶ï¼Œç³»ç»Ÿ BCD ä¸­åªè¦æœ‰ä»»æ„ä¸€ä¸ªå†™åº“å¤±è´¥ï¼Œé‚£ä¹ˆæ•°æ®å°±ä¸ä¸€è‡´äº†ã€‚è¿™ç§æƒ…å†µå¦‚ä½•å¤„ç†ï¼Ÿ")])]),v._v(" "),t("p",[v._v("ä¸‹é¢ï¼Œæˆ‘ä»¬é’ˆå¯¹ä»¥ä¸Šé—®é¢˜æ¥ä¸€ä¸€åˆ†æã€‚")]),v._v(" "),t("h3",{attrs:{id:"_3-1-é‡å¤æ¶ˆè´¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-é‡å¤æ¶ˆè´¹"}},[v._v("#")]),v._v(" 3.1. é‡å¤æ¶ˆè´¹")]),v._v(" "),t("p",[t("strong",[v._v("å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸è¢«é‡å¤æ¶ˆè´¹")]),v._v(" å’Œ "),t("strong",[v._v("å¦‚ä½•ä¿è¯æ¶ˆæ¯æ¶ˆè´¹çš„å¹‚ç­‰æ€§")]),v._v(" æ˜¯åŒä¸€ä¸ªé—®é¢˜ã€‚")]),v._v(" "),t("p",[v._v("å¿…é¡»å…ˆæ˜ç¡®äº§ç”Ÿé‡å¤æ¶ˆè´¹çš„åŸå› ï¼Œæ‰èƒ½å¯¹ç—‡ä¸‹è¯ã€‚")]),v._v(" "),t("h4",{attrs:{id:"é‡å¤æ¶ˆè´¹é—®é¢˜åŸå› "}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é‡å¤æ¶ˆè´¹é—®é¢˜åŸå› "}},[v._v("#")]),v._v(" é‡å¤æ¶ˆè´¹é—®é¢˜åŸå› ")]),v._v(" "),t("p",[v._v("é‡å¤æ¶ˆè´¹é—®é¢˜é€šå¸¸ä¸æ˜¯ MQ æ¥å¤„ç†ï¼Œè€Œæ˜¯ç”±å¼€å‘æ¥å¤„ç†çš„ã€‚")]),v._v(" "),t("p",[v._v("ä»¥ Kafka ä¸¾ä¾‹ï¼ŒKafka æ¯ä¸ª Partition éƒ½æ˜¯ä¸€ä¸ªæœ‰åºçš„ã€ä¸å¯å˜çš„è®°å½•åºåˆ—ï¼Œä¸æ–­è¿½åŠ åˆ°ç»“æ„åŒ–çš„æäº¤æ—¥å¿—ä¸­ã€‚Partition ä¸­ä¸ºæ¯æ¡è®°å½•åˆ†é…ä¸€ä¸ªè¿ç»­çš„ id å·ï¼Œç§°ä¸ºåç§»é‡ï¼ˆOffsetï¼‰ï¼Œç”¨äºå”¯ä¸€æ ‡è¯† Partition å†…çš„è®°å½•ã€‚")]),v._v(" "),t("p",[v._v("Kafka çš„å®¢æˆ·ç«¯å’Œ Broker éƒ½ä¼šä¿å­˜ Offsetã€‚å®¢æˆ·ç«¯æ¶ˆè´¹æ¶ˆæ¯åï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ï¼Œå°±æŠŠå·²æ¶ˆè´¹çš„ Offset æäº¤ç»™ Kafka Brokerï¼Œè¡¨ç¤ºå·²æ¶ˆè´¹ã€‚")]),v._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/snap/20210427194009.png",alt:""}})]),v._v(" "),t("p",[v._v("åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¦‚æœå®¢æˆ·ç«¯åº”ç”¨æ¶ˆè´¹æ¶ˆæ¯åï¼Œå› ä¸ºå®•æœºã€é‡å¯ç­‰æƒ…å†µè€Œæ²¡æœ‰æäº¤å·²æ¶ˆè´¹çš„ Offset ã€‚å½“ç³»ç»Ÿæ¢å¤åï¼Œä¼šç»§ç»­æ¶ˆè´¹æ¶ˆæ¯ï¼Œç”±äº Offset æœªæäº¤ï¼Œå°±ä¼šå‡ºç°é‡å¤æ¶ˆè´¹çš„é—®é¢˜ã€‚")]),v._v(" "),t("h4",{attrs:{id:"é‡å¤æ¶ˆè´¹è§£å†³æ–¹æ¡ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é‡å¤æ¶ˆè´¹è§£å†³æ–¹æ¡ˆ"}},[v._v("#")]),v._v(" é‡å¤æ¶ˆè´¹è§£å†³æ–¹æ¡ˆ")]),v._v(" "),t("p",[v._v("åº”å¯¹é‡å¤æ¶ˆè´¹é—®é¢˜ï¼Œéœ€è¦åœ¨ä¸šåŠ¡å±‚é¢ï¼Œé€šè¿‡ "),t("strong",[v._v("å¹‚ç­‰æ€§è®¾è®¡")]),v._v(" æ¥è§£å†³ã€‚")]),v._v(" "),t("p",[v._v("MQ é‡å¤æ¶ˆè´¹ä¸å¯æ€•ï¼Œå¯æ€•çš„æ˜¯æ²¡æœ‰åº”å¯¹æœºåˆ¶ï¼Œå¯ä»¥å€Ÿé‰´çš„æ€è·¯æœ‰ï¼š")]),v._v(" "),t("ul",[t("li",[v._v("å¦‚æœæ˜¯å†™å…³ç³»å‹æ•°æ®åº“ï¼Œå¯ä»¥å…ˆæ ¹æ®ä¸»é”®æŸ¥è¯¢ï¼Œåˆ¤æ–­æ•°æ®æ˜¯å¦å·²å­˜åœ¨ï¼Œå­˜åœ¨åˆ™æ›´æ–°ï¼Œä¸å­˜åœ¨åˆ™æ’å…¥ï¼›")]),v._v(" "),t("li",[v._v("å¦‚æœæ˜¯å†™ Redisï¼Œç”±äº set æ“ä½œå¤©ç„¶å…·æœ‰å¹‚ç­‰æ€§ï¼Œæ‰€ä»¥ä»€ä¹ˆéƒ½ä¸ç”¨åšï¼›")]),v._v(" "),t("li",[v._v("å¦‚æœæ˜¯æ ¹æ®æ¶ˆæ¯åšè¾ƒå¤æ‚çš„é€»è¾‘å¤„ç†ï¼Œå¯ä»¥åœ¨æ¶ˆæ¯ä¸­åŠ å…¥å…¨å±€å”¯ä¸€ IDï¼Œä¾‹å¦‚ï¼šè®¢å• ID ç­‰ã€‚åœ¨å®¢æˆ·ç«¯å­˜å‚¨ä¸­ï¼ˆMysqlã€Redis ç­‰ï¼‰ä¿å­˜å·²æ¶ˆè´¹æ¶ˆæ¯çš„ IDã€‚ä¸€æ—¦æ¥å—åˆ°æ–°æ¶ˆæ¯ï¼Œå…ˆåˆ¤æ–­æ¶ˆæ¯ä¸­çš„ ID æ˜¯å¦åœ¨å·²æ¶ˆè´¹æ¶ˆæ¯ ID è¡¨ä¸­å­˜åœ¨ï¼Œå­˜åœ¨åˆ™ä¸å†å¤„ç†ï¼Œä¸å­˜åœ¨åˆ™å¤„ç†ã€‚")])]),v._v(" "),t("p",[v._v("åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯ä»¥å‚è€ƒä¸Šé¢çš„ä¾‹å­ï¼Œç»“åˆç°å®åœºæ™¯ï¼Œè®¾è®¡åˆç†çš„å¹‚ç­‰æ€§æ–¹æ¡ˆã€‚")]),v._v(" "),t("h3",{attrs:{id:"_3-2-æ¶ˆæ¯ä¸¢å¤±"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-æ¶ˆæ¯ä¸¢å¤±"}},[v._v("#")]),v._v(" 3.2. æ¶ˆæ¯ä¸¢å¤±")]),v._v(" "),t("p",[t("strong",[v._v("å¦‚ä½•å¤„ç†æ¶ˆæ¯ä¸¢å¤±çš„é—®é¢˜")]),v._v(" å’Œ "),t("strong",[v._v("å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸è¢«é‡å¤æ¶ˆè´¹")]),v._v(" æ˜¯åŒä¸€ä¸ªé—®é¢˜ã€‚å…³æ³¨ç‚¹æœ‰ï¼š")]),v._v(" "),t("ul",[t("li",[v._v("MQ Server ä¸¢å¤±æ•°æ®")]),v._v(" "),t("li",[v._v("æ¶ˆè´¹æ–¹ä¸¢å¤±æ•°æ®")]),v._v(" "),t("li",[v._v("ç”Ÿäº§æ–¹ä¸¢å¤±æ•°æ®")])]),v._v(" "),t("h4",{attrs:{id:"æ¶ˆè´¹æ–¹ä¸¢å¤±æ•°æ®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ¶ˆè´¹æ–¹ä¸¢å¤±æ•°æ®"}},[v._v("#")]),v._v(" æ¶ˆè´¹æ–¹ä¸¢å¤±æ•°æ®")]),v._v(" "),t("p",[v._v("å”¯ä¸€å¯èƒ½å¯¼è‡´æ¶ˆè´¹æ–¹ä¸¢å¤±æ•°æ®çš„æƒ…å†µæ˜¯ï¼šæ¶ˆè´¹æ–¹è®¾ç½®äº†"),t("strong",[v._v("è‡ªåŠ¨æäº¤ Offset")]),v._v("ã€‚ä¸€æ—¦è®¾ç½®äº†è‡ªåŠ¨æäº¤ Offsetï¼Œæ¥å—åˆ°æ¶ˆæ¯åå°±ä¼šè‡ªåŠ¨æäº¤ Offset ç»™ Kafka ï¼ŒKafka å°±è®¤ä¸ºæ¶ˆæ¯å·²è¢«æ¶ˆè´¹ã€‚å¦‚æœæ­¤æ—¶ï¼Œæ¶ˆè´¹æ–¹å°šæœªæ¥å¾—åŠå¤„ç†æ¶ˆæ¯å°±æŒ‚äº†ï¼Œé‚£ä¹ˆæ¶ˆæ¯å°±ä¸¢äº†ã€‚")]),v._v(" "),t("p",[v._v("è§£å†³æ–¹æ³•å°±æ˜¯ï¼šæ¶ˆè´¹æ–¹å…³é—­è‡ªåŠ¨æäº¤ Offsetï¼Œå¤„ç†å®Œæ¶ˆæ¯å"),t("strong",[v._v("æ‰‹åŠ¨æäº¤ Offset")]),v._v("ã€‚ä½†è¿™ç§æƒ…å†µä¸‹å¯èƒ½ä¼šå‡ºç°é‡å¤æ¶ˆè´¹çš„æƒ…å½¢ï¼Œéœ€è¦è‡ªè¡Œä¿è¯å¹‚ç­‰æ€§ã€‚")]),v._v(" "),t("h4",{attrs:{id:"kafka-server-ä¸¢å¤±æ•°æ®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka-server-ä¸¢å¤±æ•°æ®"}},[v._v("#")]),v._v(" Kafka Server ä¸¢å¤±æ•°æ®")]),v._v(" "),t("p",[v._v("å½“ Kafka æŸä¸ª Broker å®•æœºï¼Œéœ€è¦é‡æ–°é€‰ä¸¾ Partition çš„ Leaderã€‚è‹¥æ­¤æ—¶å…¶ä»–çš„ Follower å°šæœªåŒæ­¥ Leader çš„æ•°æ®ï¼Œé‚£ä¹ˆæ–°é€‰æŸä¸ª Follower ä¸º Leader åï¼Œå°±ä¸¢å¤±äº†éƒ¨åˆ†æ•°æ®ã€‚")]),v._v(" "),t("p",[v._v("ä¸ºæ­¤ï¼Œä¸€èˆ¬è¦æ±‚è‡³å°‘è®¾ç½® 4 ä¸ªå‚æ•°ï¼š")]),v._v(" "),t("ul",[t("li",[v._v("ç»™ Topic è®¾ç½® "),t("code",[v._v("replication.factor")]),v._v(" å‚æ•° - è¿™ä¸ªå€¼å¿…é¡»å¤§äº 1ï¼Œè¦æ±‚æ¯ä¸ª Partition å¿…é¡»æœ‰è‡³å°‘ 2 ä¸ªå‰¯æœ¬ã€‚")]),v._v(" "),t("li",[v._v("åœ¨ Kafka æœåŠ¡ç«¯è®¾ç½® "),t("code",[v._v("min.insync.replicas")]),v._v(" å‚æ•° - è¿™ä¸ªå€¼å¿…é¡»å¤§äº 1ï¼Œè¿™æ˜¯è¦æ±‚ä¸€ä¸ª Leader éœ€è¦å’Œè‡³å°‘ä¸€ä¸ª Follower ä¿æŒé€šä¿¡ï¼Œè¿™æ ·æ‰èƒ½ç¡®ä¿ Leader æŒ‚äº†è¿˜æœ‰æ›¿è¡¥ã€‚")]),v._v(" "),t("li",[v._v("åœ¨ Producer ç«¯è®¾ç½® "),t("code",[v._v("acks=all")]),v._v(" - è¿™æ„å‘³ç€ï¼šè¦æ±‚æ¯æ¡æ•°æ®ï¼Œå¿…é¡»æ˜¯"),t("strong",[v._v("å†™å…¥æ‰€æœ‰ replica ä¹‹åï¼Œæ‰èƒ½è®¤ä¸ºå†™å…¥æˆåŠŸäº†")]),v._v("ã€‚")]),v._v(" "),t("li",[v._v("åœ¨ Producer ç«¯è®¾ç½® "),t("code",[v._v("retries=MAX")]),v._v("ï¼ˆå¾ˆå¤§å¾ˆå¤§å¾ˆå¤§çš„ä¸€ä¸ªå€¼ï¼Œæ— é™æ¬¡é‡è¯•çš„æ„æ€ï¼‰ - è¿™æ„å‘³ç€"),t("strong",[v._v("è¦æ±‚ä¸€æ—¦å†™å…¥å¤±è´¥ï¼Œå°±æ— é™é‡è¯•")]),v._v("ï¼Œå¡åœ¨è¿™é‡Œäº†ã€‚")])]),v._v(" "),t("h4",{attrs:{id:"ç”Ÿäº§æ–¹ä¸¢å¤±æ•°æ®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç”Ÿäº§æ–¹ä¸¢å¤±æ•°æ®"}},[v._v("#")]),v._v(" ç”Ÿäº§æ–¹ä¸¢å¤±æ•°æ®")]),v._v(" "),t("p",[v._v("å¦‚æœæŒ‰ç…§ä¸Šè¿°çš„æ€è·¯è®¾ç½®äº† "),t("code",[v._v("acks=all")]),v._v("ï¼Œç”Ÿäº§æ–¹ä¸€å®šä¸ä¼šä¸¢æ•°æ®ã€‚")]),v._v(" "),t("p",[v._v("è¦æ±‚æ˜¯ï¼Œä½ çš„ Leader æ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œæ‰€æœ‰çš„ Follower éƒ½åŒæ­¥åˆ°äº†æ¶ˆæ¯ä¹‹åï¼Œæ‰è®¤ä¸ºæœ¬ç”Ÿäº§æ¶ˆæ¯æˆåŠŸäº†ã€‚å¦‚æœæœªæ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œç”Ÿäº§è€…ä¼šè‡ªåŠ¨ä¸æ–­çš„é‡è¯•ï¼Œé‡è¯•æ— é™æ¬¡ã€‚")]),v._v(" "),t("h3",{attrs:{id:"_3-3-æ¶ˆæ¯çš„é¡ºåºæ€§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-æ¶ˆæ¯çš„é¡ºåºæ€§"}},[v._v("#")]),v._v(" 3.3. æ¶ˆæ¯çš„é¡ºåºæ€§")]),v._v(" "),t("p",[v._v("è¦ä¿è¯ MQ çš„é¡ºåºæ€§ï¼ŒåŠ¿å¿…è¦ä»˜å‡ºä¸€å®šçš„ä»£ä»·ï¼Œæ‰€ä»¥å®æ–½æ–¹æ¡ˆå‰ï¼Œè¦å…ˆæ˜ç¡®ä¸šåŠ¡åœºæ™¯æ˜¯ä¸æ˜¯æœ‰å¿…è¦ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§ã€‚åªæœ‰é‚£äº›æ˜ç¡®å¯¹æ¶ˆæ¯å¤„ç†é¡ºåºæœ‰è¦æ±‚çš„ä¸šåŠ¡åœºæ™¯æ‰å€¼å¾—å»ä¿è¯æ¶ˆæ¯é¡ºåºæ€§ã€‚")]),v._v(" "),t("p",[v._v("æ–¹æ¡ˆä¸€")]),v._v(" "),t("p",[v._v("ä¸€ä¸ª Topicï¼Œä¸€ä¸ª Partitionï¼Œä¸€ä¸ª Consumerï¼Œå†…éƒ¨å•çº¿ç¨‹æ¶ˆè´¹ï¼Œå•çº¿ç¨‹ååé‡å¤ªä½ï¼Œä¸€èˆ¬ä¸ä¼šç”¨è¿™ä¸ªã€‚")]),v._v(" "),t("p",[v._v("æ–¹æ¡ˆäºŒ")]),v._v(" "),t("ul",[t("li",[v._v("å†™å…¥æ•°æ®åˆ° Partition æ—¶æŒ‡å®šä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ IDï¼Œä¾‹å¦‚è®¢å• IDã€‚å‘é€æ–¹ä¿è¯ç›¸åŒ ID çš„æ¶ˆæ¯æœ‰åºçš„å‘é€åˆ°åŒä¸€ä¸ª Partitionã€‚")]),v._v(" "),t("li",[v._v("åŸºäºä¸Šä¸€ç‚¹ï¼Œæ¶ˆè´¹æ–¹ä» Kafka Partition ä¸­æ¶ˆè´¹æ¶ˆæ¯æ—¶ï¼Œæ­¤åˆ»ä¸€å®šæ˜¯é¡ºåºçš„ã€‚ä½†å¦‚æœæ¶ˆè´¹æ–¹å¼ä»¥å¹¶å‘æ–¹å¼æ¶ˆè´¹æ¶ˆæ¯ï¼Œé¡ºåºå°±å¯èƒ½ä¼šè¢«æ‰“ä¹±ã€‚ä¸ºæ­¤ï¼Œè¿˜æœ‰åšåˆ°ä»¥ä¸‹å‡ ç‚¹ï¼š\n"),t("ul",[t("li",[v._v("æ¶ˆè´¹æ–¹ç»´æŠ¤ N ä¸ªç¼“å­˜é˜Ÿåˆ—ï¼Œå…·æœ‰ç›¸åŒ ID çš„æ•°æ®éƒ½å†™å…¥åŒä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼›")]),v._v(" "),t("li",[v._v("åˆ›å»º N ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹åªè´Ÿè´£ä»æŒ‡å®šçš„ä¸€ä¸ªé˜Ÿåˆ—ä¸­å–æ•°æ®ã€‚")])])])]),v._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/snap/20210427194215.png",alt:""}})]),v._v(" "),t("h3",{attrs:{id:"_3-4-æ¶ˆæ¯ç§¯å‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-æ¶ˆæ¯ç§¯å‹"}},[v._v("#")]),v._v(" 3.4. æ¶ˆæ¯ç§¯å‹")]),v._v(" "),t("p",[v._v("å‡è®¾ä¸€ä¸ª MQ æ¶ˆè´¹è€…å¯ä»¥ä¸€ç§’å¤„ç† 1000 æ¡æ¶ˆæ¯ï¼Œä¸‰ä¸ª MQ æ¶ˆè´¹è€…å¯ä»¥ä¸€ç§’å¤„ç† 3000 æ¡æ¶ˆæ¯ï¼Œé‚£ä¹ˆä¸€åˆ†é’Ÿçš„å¤„ç†é‡æ˜¯ 18 ä¸‡æ¡ã€‚å¦‚æœ MQ ä¸­ç§¯å‹äº†å‡ ç™¾ä¸‡åˆ°ä¸Šåƒä¸‡çš„æ•°æ®ï¼Œå³ä½¿æ¶ˆè´¹è€…æ¢å¤äº†ï¼Œä¹Ÿéœ€è¦å¤§æ¦‚å¾ˆé•¿çš„æ—¶é—´æ‰èƒ½æ¢å¤è¿‡æ¥ã€‚")]),v._v(" "),t("p",[v._v("å¯¹äºäº§çº¿ç¯å¢ƒæ¥è¯´ï¼Œæ¼«é•¿çš„ç­‰å¾…æ˜¯ä¸å¯æ¥å—çš„ï¼Œæ‰€ä»¥é¢ä¸´è¿™ç§çª˜å¢ƒæ—¶ï¼Œåªèƒ½ä¸´æ—¶ç´§æ€¥æ‰©å®¹ä»¥åº”å¯¹äº†ï¼Œå…·ä½“æ“ä½œæ­¥éª¤å’Œæ€è·¯å¦‚ä¸‹ï¼š")]),v._v(" "),t("ul",[t("li",[v._v("å…ˆä¿®å¤ Consumer çš„é—®é¢˜ï¼Œç¡®ä¿å…¶æ¢å¤æ¶ˆè´¹é€Ÿåº¦ï¼Œç„¶åå°†ç°æœ‰ Consumer éƒ½åœæ‰ã€‚")]),v._v(" "),t("li",[v._v("æ–°å»ºä¸€ä¸ª Topicï¼ŒPartition æ˜¯åŸæ¥çš„ 10 å€ï¼Œä¸´æ—¶å»ºç«‹å¥½åŸå…ˆ 10 å€çš„ Queue æ•°é‡ã€‚")]),v._v(" "),t("li",[v._v("ç„¶åå†™ä¸€ä¸ªä¸´æ—¶çš„åˆ†å‘æ•°æ®çš„ Consumer ç¨‹åºï¼Œè¿™ä¸ªç¨‹åºéƒ¨ç½²ä¸Šå»æ¶ˆè´¹ç§¯å‹çš„æ•°æ®ï¼Œ"),t("strong",[v._v("æ¶ˆè´¹ä¹‹åä¸åšè€—æ—¶çš„å¤„ç†")]),v._v("ï¼Œç›´æ¥å‡åŒ€è½®è¯¢å†™å…¥ä¸´æ—¶å»ºç«‹å¥½çš„ 10 å€æ•°é‡çš„ Queueã€‚")]),v._v(" "),t("li",[v._v("æ¥ç€ä¸´æ—¶å¾ç”¨ 10 å€çš„æœºå™¨æ¥éƒ¨ç½² Consumer ï¼Œæ¯ä¸€æ‰¹ Consumer æ¶ˆè´¹ä¸€ä¸ªä¸´æ—¶ Queue çš„æ•°æ®ã€‚è¿™ç§åšæ³•ç›¸å½“äºæ˜¯ä¸´æ—¶å°† Queue èµ„æºå’Œ Consumer èµ„æºæ‰©å¤§ 10 å€ï¼Œä»¥æ­£å¸¸çš„ 10 å€é€Ÿåº¦æ¥æ¶ˆè´¹æ•°æ®ã€‚")]),v._v(" "),t("li",[v._v("ç­‰å¿«é€Ÿæ¶ˆè´¹å®Œç§¯å‹æ•°æ®ä¹‹åï¼Œ"),t("strong",[v._v("å¾—æ¢å¤åŸå…ˆéƒ¨ç½²çš„æ¶æ„")]),v._v("ï¼Œ"),t("strong",[v._v("é‡æ–°")]),v._v("ç”¨åŸå…ˆçš„ consumer æœºå™¨æ¥æ¶ˆè´¹æ¶ˆæ¯ã€‚")])]),v._v(" "),t("h2",{attrs:{id:"_4-mq-çš„é«˜å¯ç”¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-mq-çš„é«˜å¯ç”¨"}},[v._v("#")]),v._v(" 4. MQ çš„é«˜å¯ç”¨")]),v._v(" "),t("p",[v._v("ä¸åŒ MQ å®ç°é«˜å¯ç”¨çš„åŸç†å„ä¸ç›¸åŒã€‚å› ä¸º Kafka æ¯”è¾ƒå…·æœ‰ä»£è¡¨æ€§ï¼Œæ‰€ä»¥è¿™é‡Œä»¥ Kafka ä¸ºä¾‹ã€‚")]),v._v(" "),t("h3",{attrs:{id:"_4-1-kafka-çš„é«˜å¯ç”¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-kafka-çš„é«˜å¯ç”¨"}},[v._v("#")]),v._v(" 4.1. Kafka çš„é«˜å¯ç”¨")]),v._v(" "),t("h4",{attrs:{id:"kafka-çš„æ ¸å¿ƒæ¦‚å¿µ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka-çš„æ ¸å¿ƒæ¦‚å¿µ"}},[v._v("#")]),v._v(" Kafka çš„æ ¸å¿ƒæ¦‚å¿µ")]),v._v(" "),t("p",[v._v("äº†è§£ Kafkaï¼Œå¿…é¡»å…ˆäº†è§£ Kafka çš„æ ¸å¿ƒæ¦‚å¿µï¼š")]),v._v(" "),t("ul",[t("li",[t("p",[t("strong",[v._v("Broker")]),v._v(" - Kafka é›†ç¾¤åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹ï¼Œè¿™ç§èŠ‚ç‚¹è¢«ç§°ä¸º Brokerã€‚")])]),v._v(" "),t("li",[t("p",[t("strong",[v._v("Topic")]),v._v(" - æ¯æ¡å‘å¸ƒåˆ° Kafka é›†ç¾¤çš„æ¶ˆæ¯éƒ½æœ‰ä¸€ä¸ªç±»åˆ«ï¼Œè¿™ä¸ªç±»åˆ«è¢«ç§°ä¸º Topicã€‚ï¼ˆä¸åŒ Topic çš„æ¶ˆæ¯æ˜¯ç‰©ç†éš”ç¦»çš„ï¼›åŒä¸€ä¸ª Topic çš„æ¶ˆæ¯ä¿å­˜åœ¨ä¸€ä¸ªæˆ–å¤šä¸ª Broker ä¸Šï¼Œä½†ç”¨æˆ·åªéœ€æŒ‡å®šæ¶ˆæ¯çš„ Topic å³å¯ç”Ÿäº§æˆ–æ¶ˆè´¹æ•°æ®è€Œä¸å¿…å…³å¿ƒæ•°æ®å­˜äºä½•å¤„ï¼‰ã€‚å¯¹äºæ¯ä¸€ä¸ª Topicï¼Œ Kafka é›†ç¾¤éƒ½ä¼šç»´æŒä¸€ä¸ªåˆ†åŒºæ—¥å¿—ã€‚")])]),v._v(" "),t("li",[t("p",[t("strong",[v._v("Partition")]),v._v(" - äº†æé«˜ Kafka çš„ååç‡ï¼Œæ¯ä¸ª Topic åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª Partitionï¼Œæ¯ä¸ª Partition åœ¨ç‰©ç†ä¸Šå¯¹åº”ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹ä¸‹å­˜å‚¨è¿™ä¸ª Partition çš„æ‰€æœ‰æ¶ˆæ¯å’Œç´¢å¼•æ–‡ä»¶ã€‚")]),v._v(" "),t("ul",[t("li",[v._v("Kafka æ—¥å¿—çš„åˆ†åŒºï¼ˆPartitionï¼‰åˆ†å¸ƒåœ¨ Kafka é›†ç¾¤çš„èŠ‚ç‚¹ä¸Šã€‚æ¯ä¸ªèŠ‚ç‚¹åœ¨å¤„ç†æ•°æ®å’Œè¯·æ±‚æ—¶ï¼Œå…±äº«è¿™äº›åˆ†åŒºã€‚æ¯ä¸€ä¸ªåˆ†åŒºéƒ½ä¼šåœ¨å·²é…ç½®çš„èŠ‚ç‚¹ä¸Šè¿›è¡Œå¤‡ä»½ï¼Œç¡®ä¿å®¹é”™æ€§ã€‚")])])])]),v._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javaweb/distributed/mq/kafka/kafka-cluster-roles.png",alt:"img"}})]),v._v(" "),t("h4",{attrs:{id:"kafka-çš„å‰¯æœ¬æœºåˆ¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka-çš„å‰¯æœ¬æœºåˆ¶"}},[v._v("#")]),v._v(" Kafka çš„å‰¯æœ¬æœºåˆ¶")]),v._v(" "),t("p",[v._v("Kafka æ˜¯å¦‚ä½•å®ç°é«˜å¯ç”¨çš„å‘¢ï¼Ÿ")]),v._v(" "),t("p",[v._v("Kafka åœ¨ 0.8 ä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼Œå¦‚æœä¸€ä¸ª Broker å®•æœºäº†ï¼Œå…¶ä¸Šé¢çš„ Partition éƒ½ä¸èƒ½ç”¨äº†ï¼Œè¿™è‡ªç„¶ä¸æ˜¯é«˜å¯ç”¨çš„ã€‚")]),v._v(" "),t("p",[v._v("ä¸ºäº†å®ç°é«˜å¯ç”¨ï¼ŒKafka å¼•å…¥äº†å¤åˆ¶åŠŸèƒ½ã€‚")]),v._v(" "),t("p",[v._v("ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å‰¯æœ¬æœºåˆ¶ï¼ˆ Replicate ï¼‰ã€‚")]),v._v(" "),t("p",[t("strong",[v._v("æ¯ä¸ª Partition éƒ½æœ‰ä¸€ä¸ª Leaderï¼Œé›¶ä¸ªæˆ–å¤šä¸ª Follower")]),v._v("ã€‚Leader å’Œ Follower éƒ½æ˜¯ Brokerï¼Œæ¯ä¸ª Broker éƒ½ä¼šæˆä¸ºæŸäº›åˆ†åŒºçš„ Leader å’ŒæŸäº›åˆ†åŒºçš„ Followerï¼Œå› æ­¤é›†ç¾¤çš„è´Ÿè½½æ˜¯å¹³è¡¡çš„ã€‚")]),v._v(" "),t("ul",[t("li",[t("strong",[v._v("Leader å¤„ç†ä¸€åˆ‡å¯¹ Partition ï¼ˆåˆ†åŒºï¼‰çš„è¯»å†™è¯·æ±‚")]),v._v("ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("è€Œ Follower åªéœ€è¢«åŠ¨çš„åŒæ­¥ Leader ä¸Šçš„æ•°æ®")]),v._v("ã€‚")])]),v._v(" "),t("p",[t("strong",[v._v("åŒä¸€ä¸ª Topic çš„ä¸åŒ Partition ä¼šåˆ†å¸ƒåœ¨å¤šä¸ª Broker ä¸Šï¼Œè€Œä¸”ä¸€ä¸ª Partition è¿˜ä¼šåœ¨å…¶ä»–çš„ Broker ä¸Šé¢è¿›è¡Œå¤‡ä»½")]),v._v("ï¼ŒProducer åœ¨å‘å¸ƒæ¶ˆæ¯åˆ°æŸä¸ª Partition æ—¶ï¼Œå…ˆæ‰¾åˆ°è¯¥ Partition çš„ Leaderï¼Œç„¶åå‘è¿™ä¸ª Leader æ¨é€æ¶ˆæ¯ï¼›æ¯ä¸ª Follower éƒ½ä» Leader æ‹‰å–æ¶ˆæ¯ï¼Œæ‹‰å–æ¶ˆæ¯æˆåŠŸä¹‹åï¼Œå‘ Leader å‘é€ä¸€ä¸ª ACK ç¡®è®¤ã€‚")]),v._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/dunwu/images/dev/cs/java/javaweb/distributed/mq/kafka/kafka-replication.png",alt:"img"}})]),v._v(" "),t("blockquote",[t("p",[v._v("FAQ")]),v._v(" "),t("p",[v._v("é—®ï¼šä¸ºä»€ä¹ˆè®© Leader å¤„ç†ä¸€åˆ‡å¯¹å¯¹ Partition ï¼ˆåˆ†åŒºï¼‰çš„è¯»å†™è¯·æ±‚ï¼Ÿ")]),v._v(" "),t("p",[v._v("ç­”ï¼šå› ä¸ºå¦‚æœå…è®¸æ‰€æœ‰ Broker éƒ½å¯ä»¥å¤„ç†è¯»å†™è¯·æ±‚ï¼Œå°±å¯èƒ½äº§ç”Ÿæ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚")])]),v._v(" "),t("h4",{attrs:{id:"kafka-é€‰ä¸¾-leader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka-é€‰ä¸¾-leader"}},[v._v("#")]),v._v(" Kafka é€‰ä¸¾ Leader")]),v._v(" "),t("p",[v._v("ç”±ä¸Šæ–‡å¯çŸ¥ï¼ŒPartition åœ¨å¤šä¸ª Broker ä¸Šå­˜åœ¨å‰¯æœ¬ã€‚")]),v._v(" "),t("p",[v._v("å¦‚æœæŸä¸ª Follower å®•æœºï¼Œå•¥äº‹å„¿æ²¡æœ‰ï¼Œæ­£å¸¸å·¥ä½œã€‚")]),v._v(" "),t("p",[v._v("å¦‚æœ Leader å®•æœºäº†ï¼Œä¼šä» Follower ä¸­"),t("strong",[v._v("é‡æ–°é€‰ä¸¾")]),v._v("ä¸€ä¸ªæ–°çš„ Leaderã€‚")]),v._v(" "),t("h2",{attrs:{id:"_5-ä¸»æµ-mq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-ä¸»æµ-mq"}},[v._v("#")]),v._v(" 5. ä¸»æµ MQ")]),v._v(" "),t("h3",{attrs:{id:"_5-1-activemq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-activemq"}},[v._v("#")]),v._v(" 5.1. ActiveMQ")]),v._v(" "),t("p",[t("code",[v._v("ActiveMQ")]),v._v(" æ˜¯ç”± "),t("code",[v._v("Apache")]),v._v(" å‡ºå“ï¼Œ"),t("code",[v._v("ActiveMQ")]),v._v(" æ˜¯ä¸€ä¸ªå®Œå…¨æ”¯æŒ"),t("code",[v._v("JMS1.1")]),v._v(" å’Œ "),t("code",[v._v("J2EE 1.4")]),v._v(" è§„èŒƒçš„ "),t("code",[v._v("JMS Provider")]),v._v(" å®ç°ã€‚å®ƒéå¸¸å¿«é€Ÿï¼Œæ”¯æŒ "),t("strong",[v._v("å¤šç§è¯­è¨€çš„å®¢æˆ·ç«¯")]),v._v(" å’Œ "),t("strong",[v._v("åè®®")]),v._v("ï¼Œè€Œä¸”å¯ä»¥éå¸¸å®¹æ˜“çš„åµŒå…¥åˆ°ä¼ä¸šçš„åº”ç”¨ç¯å¢ƒä¸­ï¼Œå¹¶æœ‰è®¸å¤šé«˜çº§åŠŸèƒ½ã€‚")]),v._v(" "),t("p",[t("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/7/8/16479c8ea7cdc2c0?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"img"}})]),v._v(" "),t("h4",{attrs:{id:"a-ä¸»è¦ç‰¹æ€§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#a-ä¸»è¦ç‰¹æ€§"}},[v._v("#")]),v._v(" (a) ä¸»è¦ç‰¹æ€§")]),v._v(" "),t("ol",[t("li",[t("strong",[v._v("æœä» JMS è§„èŒƒ")]),v._v("ï¼š"),t("code",[v._v("JMS")]),v._v(" è§„èŒƒæä¾›äº†è‰¯å¥½çš„æ ‡å‡†å’Œä¿è¯ï¼ŒåŒ…æ‹¬ï¼š"),t("strong",[v._v("åŒæ­¥")]),v._v(" æˆ– "),t("strong",[v._v("å¼‚æ­¥")]),v._v(" çš„æ¶ˆæ¯åˆ†å‘ï¼Œä¸€æ¬¡å’Œä»…ä¸€æ¬¡çš„æ¶ˆæ¯åˆ†å‘ï¼Œ"),t("strong",[v._v("æ¶ˆæ¯æ¥æ”¶")]),v._v(" å’Œ "),t("strong",[v._v("è®¢é˜…")]),v._v(" ç­‰ç­‰ã€‚éµä» "),t("code",[v._v("JMS")]),v._v(" è§„èŒƒçš„å¥½å¤„åœ¨äºï¼Œä¸è®ºä½¿ç”¨ä»€ä¹ˆ "),t("code",[v._v("JMS")]),v._v(" å®ç°æä¾›è€…ï¼Œè¿™äº›åŸºç¡€ç‰¹æ€§éƒ½æ˜¯å¯ç”¨çš„ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("è¿æ¥çµæ´»æ€§")]),v._v("ï¼š"),t("code",[v._v("ActiveMQ")]),v._v(" æä¾›äº†å¹¿æ³›çš„ "),t("strong",[v._v("è¿æ¥åè®®")]),v._v("ï¼Œæ”¯æŒçš„åè®®æœ‰ï¼š"),t("code",[v._v("HTTP/S")]),v._v("ï¼Œ"),t("code",[v._v("IP")]),v._v(" "),t("strong",[v._v("å¤šæ’­")]),v._v("ï¼Œ"),t("code",[v._v("SSL")]),v._v("ï¼Œ"),t("code",[v._v("TCP")]),v._v("ï¼Œ"),t("code",[v._v("UDP")]),v._v(" ç­‰ç­‰ã€‚å¯¹ä¼—å¤šåè®®çš„æ”¯æŒè®© "),t("code",[v._v("ActiveMQ")]),v._v(" æ‹¥æœ‰äº†å¾ˆå¥½çš„çµæ´»æ€§ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("æ”¯æŒçš„åè®®ç§ç±»å¤š")]),v._v("ï¼š"),t("code",[v._v("OpenWire")]),v._v("ã€"),t("code",[v._v("STOMP")]),v._v("ã€"),t("code",[v._v("REST")]),v._v("ã€"),t("code",[v._v("XMPP")]),v._v("ã€"),t("code",[v._v("AMQP")]),v._v("ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("æŒä¹…åŒ–æ’ä»¶å’Œå®‰å…¨æ’ä»¶")]),v._v("ï¼š"),t("code",[v._v("ActiveMQ")]),v._v(" æä¾›äº† "),t("strong",[v._v("å¤šç§æŒä¹…åŒ–")]),v._v(" é€‰æ‹©ã€‚è€Œä¸”ï¼Œ"),t("code",[v._v("ActiveMQ")]),v._v(" çš„å®‰å…¨æ€§ä¹Ÿå¯ä»¥å®Œå…¨ä¾æ®ç”¨æˆ·éœ€æ±‚è¿›è¡Œ "),t("strong",[v._v("è‡ªå®šä¹‰é‰´æƒ")]),v._v(" å’Œ "),t("strong",[v._v("æˆæƒ")]),v._v("ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("æ”¯æŒçš„å®¢æˆ·ç«¯è¯­è¨€ç§ç±»å¤š")]),v._v("ï¼šé™¤äº† "),t("code",[v._v("Java")]),v._v(" ä¹‹å¤–ï¼Œè¿˜æœ‰ï¼š"),t("code",[v._v("C/C++")]),v._v("ï¼Œ"),t("code",[v._v(".NET")]),v._v("ï¼Œ"),t("code",[v._v("Perl")]),v._v("ï¼Œ"),t("code",[v._v("PHP")]),v._v("ï¼Œ"),t("code",[v._v("Python")]),v._v("ï¼Œ"),t("code",[v._v("Ruby")]),v._v("ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("ä»£ç†é›†ç¾¤")]),v._v("ï¼šå¤šä¸ª "),t("code",[v._v("ActiveMQ")]),v._v(" "),t("strong",[v._v("ä»£ç†")]),v._v(" å¯ä»¥ç»„æˆä¸€ä¸ª "),t("strong",[v._v("é›†ç¾¤")]),v._v(" æ¥æä¾›æœåŠ¡ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("å¼‚å¸¸ç®€å•çš„ç®¡ç†")]),v._v("ï¼š"),t("code",[v._v("ActiveMQ")]),v._v(" æ˜¯ä»¥å¼€å‘è€…æ€ç»´è¢«è®¾è®¡çš„ã€‚æ‰€ä»¥ï¼Œå®ƒå¹¶ä¸éœ€è¦ä¸“é—¨çš„ç®¡ç†å‘˜ï¼Œå› ä¸ºå®ƒæä¾›äº†ç®€å•åˆä½¿ç”¨çš„ç®¡ç†ç‰¹æ€§ã€‚æœ‰å¾ˆå¤šä¸­æ–¹æ³•å¯ä»¥ "),t("strong",[v._v("ç›‘æ§")]),v._v(" "),t("code",[v._v("ActiveMQ")]),v._v(" ä¸åŒå±‚é¢çš„æ•°æ®ï¼ŒåŒ…æ‹¬ä½¿ç”¨åœ¨ "),t("code",[v._v("JConsole")]),v._v(" æˆ–è€…åœ¨ "),t("code",[v._v("ActiveMQ")]),v._v(" çš„ "),t("code",[v._v("Web Console")]),v._v(" ä¸­ä½¿ç”¨ "),t("code",[v._v("JMX")]),v._v("ã€‚é€šè¿‡å¤„ç† "),t("code",[v._v("JMX")]),v._v(" çš„å‘Šè­¦æ¶ˆæ¯ï¼Œé€šè¿‡ä½¿ç”¨ "),t("strong",[v._v("å‘½ä»¤è¡Œè„šæœ¬")]),v._v("ï¼Œç”šè‡³å¯ä»¥é€šè¿‡ç›‘æ§å„ç§ç±»å‹çš„ "),t("strong",[v._v("æ—¥å¿—")]),v._v("ã€‚")])]),v._v(" "),t("h4",{attrs:{id:"b-éƒ¨ç½²ç¯å¢ƒ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#b-éƒ¨ç½²ç¯å¢ƒ"}},[v._v("#")]),v._v(" (b) éƒ¨ç½²ç¯å¢ƒ")]),v._v(" "),t("p",[t("code",[v._v("ActiveMQ")]),v._v(" å¯ä»¥è¿è¡Œåœ¨ "),t("code",[v._v("Java")]),v._v(" è¯­è¨€æ‰€æ”¯æŒçš„å¹³å°ä¹‹ä¸Šã€‚ä½¿ç”¨ "),t("code",[v._v("ActiveMQ")]),v._v(" éœ€è¦ï¼š")]),v._v(" "),t("ul",[t("li",[t("code",[v._v("Java JDK")])]),v._v(" "),t("li",[t("code",[v._v("ActiveMQ")]),v._v(" å®‰è£…åŒ…")])]),v._v(" "),t("h4",{attrs:{id:"c-ä¼˜ç‚¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#c-ä¼˜ç‚¹"}},[v._v("#")]),v._v(" (c) ä¼˜ç‚¹")]),v._v(" "),t("ol",[t("li",[t("strong",[v._v("è·¨å¹³å°")]),v._v(" ("),t("code",[v._v("JAVA")]),v._v(" ç¼–å†™ä¸å¹³å°æ— å…³ï¼Œ"),t("code",[v._v("ActiveMQ")]),v._v(" å‡ ä¹å¯ä»¥è¿è¡Œåœ¨ä»»ä½•çš„ "),t("code",[v._v("JVM")]),v._v(" ä¸Š)ï¼›")]),v._v(" "),t("li",[v._v("å¯ä»¥ç”¨ "),t("code",[v._v("JDBC")]),v._v("ï¼šå¯ä»¥å°† "),t("strong",[v._v("æ•°æ®æŒä¹…åŒ–")]),v._v(" åˆ°æ•°æ®åº“ã€‚è™½ç„¶ä½¿ç”¨ "),t("code",[v._v("JDBC")]),v._v(" ä¼šé™ä½ "),t("code",[v._v("ActiveMQ")]),v._v(" çš„æ€§èƒ½ï¼Œä½†æ˜¯æ•°æ®åº“ä¸€ç›´éƒ½æ˜¯å¼€å‘äººå‘˜æœ€ç†Ÿæ‚‰çš„å­˜å‚¨ä»‹è´¨ï¼›")]),v._v(" "),t("li",[v._v("æ”¯æŒ "),t("code",[v._v("JMS")]),v._v(" è§„èŒƒï¼šæ”¯æŒ "),t("code",[v._v("JMS")]),v._v(" è§„èŒƒæä¾›çš„ "),t("strong",[v._v("ç»Ÿä¸€æ¥å£")]),v._v(";")]),v._v(" "),t("li",[v._v("æ”¯æŒ "),t("strong",[v._v("è‡ªåŠ¨é‡è¿")]),v._v(" å’Œ "),t("strong",[v._v("é”™è¯¯é‡è¯•æœºåˆ¶")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("æœ‰å®‰å…¨æœºåˆ¶ï¼šæ”¯æŒåŸºäº "),t("code",[v._v("shiro")]),v._v("ï¼Œ"),t("code",[v._v("jaas")]),v._v(" ç­‰å¤šç§ "),t("strong",[v._v("å®‰å…¨é…ç½®æœºåˆ¶")]),v._v("ï¼Œå¯ä»¥å¯¹ "),t("code",[v._v("Queue/Topic")]),v._v(" è¿›è¡Œ "),t("strong",[v._v("è®¤è¯å’Œæˆæƒ")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("ç›‘æ§å®Œå–„ï¼šæ‹¥æœ‰å®Œå–„çš„ "),t("strong",[v._v("ç›‘æ§")]),v._v("ï¼ŒåŒ…æ‹¬ "),t("code",[v._v("Web Console")]),v._v("ï¼Œ"),t("code",[v._v("JMX")]),v._v("ï¼Œ"),t("code",[v._v("Shell")]),v._v(" å‘½ä»¤è¡Œï¼Œ"),t("code",[v._v("Jolokia")]),v._v(" çš„ "),t("code",[v._v("RESTful API")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("ç•Œé¢å‹å–„ï¼šæä¾›çš„ "),t("code",[v._v("Web Console")]),v._v(" å¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†æƒ…å†µï¼Œè¿˜æœ‰å¾ˆå¤š "),t("strong",[v._v("ç¬¬ä¸‰æ–¹çš„ç»„ä»¶")]),v._v(" å¯ä»¥ä½¿ç”¨ï¼Œæ¯”å¦‚ "),t("code",[v._v("hawtio")]),v._v("ï¼›")])]),v._v(" "),t("h4",{attrs:{id:"d-ç¼ºç‚¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#d-ç¼ºç‚¹"}},[v._v("#")]),v._v(" (d) ç¼ºç‚¹")]),v._v(" "),t("ol",[t("li",[v._v("ç¤¾åŒºæ´»è·ƒåº¦ä¸åŠ "),t("code",[v._v("RabbitMQ")]),v._v(" é«˜ï¼›")]),v._v(" "),t("li",[v._v("æ ¹æ®å…¶ä»–ç”¨æˆ·åé¦ˆï¼Œä¼šå‡ºè«åå…¶å¦™çš„é—®é¢˜ï¼Œä¼š "),t("strong",[v._v("ä¸¢å¤±æ¶ˆæ¯")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("ç›®å‰é‡å¿ƒæ”¾åˆ° "),t("code",[v._v("activemq 6.0")]),v._v(" äº§å“ "),t("code",[v._v("Apollo")]),v._v("ï¼Œå¯¹ "),t("code",[v._v("5.x")]),v._v(" çš„ç»´æŠ¤è¾ƒå°‘ï¼›")]),v._v(" "),t("li",[v._v("ä¸é€‚åˆç”¨äº "),t("strong",[v._v("ä¸Šåƒä¸ªé˜Ÿåˆ—")]),v._v(" çš„åº”ç”¨åœºæ™¯ï¼›")])]),v._v(" "),t("h3",{attrs:{id:"_5-2-rabbitmq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-rabbitmq"}},[v._v("#")]),v._v(" 5.2. RabbitMQ")]),v._v(" "),t("p",[t("code",[v._v("RabbitMQ")]),v._v(" äº "),t("code",[v._v("2007")]),v._v(" å¹´å‘å¸ƒï¼Œæ˜¯ä¸€ä¸ªåœ¨ "),t("code",[v._v("AMQP")]),v._v(" ("),t("strong",[v._v("é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®")]),v._v(")åŸºç¡€ä¸Šå®Œæˆçš„ï¼Œå¯å¤ç”¨çš„ä¼ä¸šæ¶ˆæ¯ç³»ç»Ÿï¼Œæ˜¯å½“å‰æœ€ä¸»æµçš„æ¶ˆæ¯ä¸­é—´ä»¶ä¹‹ä¸€ã€‚")]),v._v(" "),t("p",[t("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/7/8/16479c8ece3b5d7a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"img"}})]),v._v(" "),t("h4",{attrs:{id:"a-ä¸»è¦ç‰¹æ€§-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#a-ä¸»è¦ç‰¹æ€§-2"}},[v._v("#")]),v._v(" (a) ä¸»è¦ç‰¹æ€§")]),v._v(" "),t("ol",[t("li",[t("strong",[v._v("å¯é æ€§")]),v._v("ï¼šæä¾›äº†å¤šç§æŠ€æœ¯å¯ä»¥è®©ä½ åœ¨ "),t("strong",[v._v("æ€§èƒ½")]),v._v(" å’Œ "),t("strong",[v._v("å¯é æ€§")]),v._v(" ä¹‹é—´è¿›è¡Œ "),t("strong",[v._v("æƒè¡¡")]),v._v("ã€‚è¿™äº›æŠ€æœ¯åŒ…æ‹¬ "),t("strong",[v._v("æŒä¹…æ€§æœºåˆ¶")]),v._v("ã€"),t("strong",[v._v("æŠ•é€’ç¡®è®¤")]),v._v("ã€"),t("strong",[v._v("å‘å¸ƒè€…è¯å®")]),v._v(" å’Œ "),t("strong",[v._v("é«˜å¯ç”¨æ€§æœºåˆ¶")]),v._v("ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("çµæ´»çš„è·¯ç”±")]),v._v("ï¼šæ¶ˆæ¯åœ¨åˆ°è¾¾é˜Ÿåˆ—å‰æ˜¯é€šè¿‡ "),t("strong",[v._v("äº¤æ¢æœº")]),v._v(" è¿›è¡Œ "),t("strong",[v._v("è·¯ç”±")]),v._v(" çš„ã€‚"),t("code",[v._v("RabbitMQ")]),v._v(" ä¸ºå…¸å‹çš„è·¯ç”±é€»è¾‘æä¾›äº† "),t("strong",[v._v("å¤šç§å†…ç½®äº¤æ¢æœº")]),v._v(" ç±»å‹ã€‚å¦‚æœä½ æœ‰æ›´å¤æ‚çš„è·¯ç”±éœ€æ±‚ï¼Œå¯ä»¥å°†è¿™äº›äº¤æ¢æœºç»„åˆèµ·æ¥ä½¿ç”¨ï¼Œä½ ç”šè‡³å¯ä»¥å®ç°è‡ªå·±çš„äº¤æ¢æœºç±»å‹ï¼Œå¹¶ä¸”å½“åš "),t("code",[v._v("RabbitMQ")]),v._v(" çš„ "),t("strong",[v._v("æ’ä»¶")]),v._v(" æ¥ä½¿ç”¨ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("æ¶ˆæ¯é›†ç¾¤")]),v._v("ï¼šåœ¨ç›¸åŒå±€åŸŸç½‘ä¸­çš„å¤šä¸ª "),t("code",[v._v("RabbitMQ")]),v._v(" æœåŠ¡å™¨å¯ä»¥ "),t("strong",[v._v("èšåˆ")]),v._v(" åœ¨ä¸€èµ·ï¼Œä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„é€»è¾‘ä»£ç†æ¥ä½¿ç”¨ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("é˜Ÿåˆ—é«˜å¯ç”¨")]),v._v("ï¼šé˜Ÿåˆ—å¯ä»¥åœ¨é›†ç¾¤ä¸­çš„æœºå™¨ä¸Š "),t("strong",[v._v("è¿›è¡Œé•œåƒ")]),v._v("ï¼Œä»¥ç¡®ä¿åœ¨ç¡¬ä»¶é—®é¢˜ä¸‹è¿˜ä¿è¯ "),t("strong",[v._v("æ¶ˆæ¯å®‰å…¨")]),v._v("ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("æ”¯æŒå¤šç§åè®®")]),v._v("ï¼šæ”¯æŒ "),t("strong",[v._v("å¤šç§æ¶ˆæ¯é˜Ÿåˆ—åè®®")]),v._v("ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("æ”¯æŒå¤šç§è¯­è¨€")]),v._v("ï¼šç”¨ "),t("code",[v._v("Erlang")]),v._v(" è¯­è¨€ç¼–å†™ï¼Œæ”¯æŒåªè¦æ˜¯ä½ èƒ½æƒ³åˆ°çš„ "),t("strong",[v._v("æ‰€æœ‰ç¼–ç¨‹è¯­è¨€")]),v._v("ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("ç®¡ç†ç•Œé¢")]),v._v("ï¼š "),t("code",[v._v("RabbitMQ")]),v._v(" æœ‰ä¸€ä¸ªæ˜“ç”¨çš„ "),t("strong",[v._v("ç”¨æˆ·ç•Œé¢")]),v._v("ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥ "),t("strong",[v._v("ç›‘æ§")]),v._v(" å’Œ "),t("strong",[v._v("ç®¡ç†")]),v._v(" æ¶ˆæ¯ "),t("code",[v._v("Broker")]),v._v(" çš„è®¸å¤šæ–¹é¢ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("è·Ÿè¸ªæœºåˆ¶")]),v._v("ï¼šå¦‚æœ "),t("strong",[v._v("æ¶ˆæ¯å¼‚å¸¸")]),v._v("ï¼Œ"),t("code",[v._v("RabbitMQ")]),v._v(" æä¾›æ¶ˆæ¯è·Ÿè¸ªæœºåˆ¶ï¼Œä½¿ç”¨è€…å¯ä»¥æ‰¾å‡ºå‘ç”Ÿäº†ä»€ä¹ˆï¼›")]),v._v(" "),t("li",[t("strong",[v._v("æ’ä»¶æœºåˆ¶")]),v._v("ï¼šæä¾›äº†è®¸å¤š "),t("strong",[v._v("æ’ä»¶")]),v._v("ï¼Œæ¥ä»å¤šæ–¹é¢è¿›è¡Œæ‰©å±•ï¼Œä¹Ÿå¯ä»¥ç¼–å†™è‡ªå·±çš„æ’ä»¶ã€‚")])]),v._v(" "),t("h4",{attrs:{id:"b-éƒ¨ç½²ç¯å¢ƒ-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#b-éƒ¨ç½²ç¯å¢ƒ-2"}},[v._v("#")]),v._v(" (b) éƒ¨ç½²ç¯å¢ƒ")]),v._v(" "),t("p",[t("code",[v._v("RabbitMQ")]),v._v(" å¯ä»¥è¿è¡Œåœ¨ "),t("code",[v._v("Erlang")]),v._v(" è¯­è¨€æ‰€æ”¯æŒçš„å¹³å°ä¹‹ä¸Šï¼ŒåŒ…æ‹¬ "),t("code",[v._v("Solaris")]),v._v("ï¼Œ"),t("code",[v._v("BSD")]),v._v("ï¼Œ"),t("code",[v._v("Linux")]),v._v("ï¼Œ"),t("code",[v._v("MacOSX")]),v._v("ï¼Œ"),t("code",[v._v("TRU64")]),v._v("ï¼Œ"),t("code",[v._v("Windows")]),v._v(" ç­‰ã€‚ä½¿ç”¨ "),t("code",[v._v("RabbitMQ")]),v._v(" éœ€è¦ï¼š")]),v._v(" "),t("ul",[t("li",[t("code",[v._v("ErLang")]),v._v(" è¯­è¨€åŒ…")]),v._v(" "),t("li",[t("code",[v._v("RabbitMQ")]),v._v(" å®‰è£…åŒ…")])]),v._v(" "),t("h4",{attrs:{id:"c-ä¼˜ç‚¹-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#c-ä¼˜ç‚¹-2"}},[v._v("#")]),v._v(" (c) ä¼˜ç‚¹")]),v._v(" "),t("ol",[t("li",[v._v("ç”±äº "),t("code",[v._v("Erlang")]),v._v(" è¯­è¨€çš„ç‰¹æ€§ï¼Œæ¶ˆæ¯é˜Ÿåˆ—æ€§èƒ½è¾ƒå¥½ï¼Œæ”¯æŒ "),t("strong",[v._v("é«˜å¹¶å‘")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("å¥å£®ã€ç¨³å®šã€æ˜“ç”¨ã€"),t("strong",[v._v("è·¨å¹³å°")]),v._v("ã€æ”¯æŒ "),t("strong",[v._v("å¤šç§è¯­è¨€")]),v._v("ã€æ–‡æ¡£é½å…¨ï¼›")]),v._v(" "),t("li",[v._v("æœ‰æ¶ˆæ¯ "),t("strong",[v._v("ç¡®è®¤æœºåˆ¶")]),v._v(" å’Œ "),t("strong",[v._v("æŒä¹…åŒ–æœºåˆ¶")]),v._v("ï¼Œå¯é æ€§é«˜ï¼›")]),v._v(" "),t("li",[v._v("é«˜åº¦å¯å®šåˆ¶çš„ "),t("strong",[v._v("è·¯ç”±")]),v._v("ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("ç®¡ç†ç•Œé¢")]),v._v(" è¾ƒä¸°å¯Œï¼Œåœ¨äº’è”ç½‘å…¬å¸ä¹Ÿæœ‰è¾ƒå¤§è§„æ¨¡çš„åº”ç”¨ï¼Œç¤¾åŒºæ´»è·ƒåº¦é«˜ã€‚")])]),v._v(" "),t("h4",{attrs:{id:"d-ç¼ºç‚¹-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#d-ç¼ºç‚¹-2"}},[v._v("#")]),v._v(" (d) ç¼ºç‚¹")]),v._v(" "),t("ol",[t("li",[v._v("å°½ç®¡ç»“åˆ "),t("code",[v._v("Erlang")]),v._v(" è¯­è¨€æœ¬èº«çš„å¹¶å‘ä¼˜åŠ¿ï¼Œæ€§èƒ½è¾ƒå¥½ï¼Œä½†æ˜¯ä¸åˆ©äºåš "),t("strong",[v._v("äºŒæ¬¡å¼€å‘å’Œç»´æŠ¤")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("å®ç°äº† "),t("strong",[v._v("ä»£ç†æ¶æ„")]),v._v("ï¼Œæ„å‘³ç€æ¶ˆæ¯åœ¨å‘é€åˆ°å®¢æˆ·ç«¯ä¹‹å‰å¯ä»¥åœ¨ "),t("strong",[v._v("ä¸­å¤®èŠ‚ç‚¹")]),v._v(" ä¸Šæ’é˜Ÿã€‚æ­¤ç‰¹æ€§ä½¿å¾— "),t("code",[v._v("RabbitMQ")]),v._v(" æ˜“äºä½¿ç”¨å’Œéƒ¨ç½²ï¼Œä½†æ˜¯ä½¿å¾—å…¶ "),t("strong",[v._v("è¿è¡Œé€Ÿåº¦è¾ƒæ…¢")]),v._v("ï¼Œå› ä¸ºä¸­å¤®èŠ‚ç‚¹ "),t("strong",[v._v("å¢åŠ äº†å»¶è¿Ÿ")]),v._v("ï¼Œ"),t("strong",[v._v("æ¶ˆæ¯å°è£…å")]),v._v(" ä¹Ÿæ¯”è¾ƒå¤§ï¼›")]),v._v(" "),t("li",[v._v("éœ€è¦å­¦ä¹  "),t("strong",[v._v("æ¯”è¾ƒå¤æ‚")]),v._v(" çš„ "),t("strong",[v._v("æ¥å£å’Œåè®®")]),v._v("ï¼Œå­¦ä¹ å’Œç»´æŠ¤æˆæœ¬è¾ƒé«˜ã€‚")])]),v._v(" "),t("h3",{attrs:{id:"_5-3-rocketmq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-rocketmq"}},[v._v("#")]),v._v(" 5.3. RocketMQ")]),v._v(" "),t("p",[t("code",[v._v("RocketMQ")]),v._v(" å‡ºè‡ª "),t("strong",[v._v("é˜¿é‡Œ")]),v._v(" çš„å¼€æºäº§å“ï¼Œç”¨ "),t("code",[v._v("Java")]),v._v(" è¯­è¨€å®ç°ï¼Œåœ¨è®¾è®¡æ—¶å‚è€ƒäº† "),t("code",[v._v("Kafka")]),v._v("ï¼Œå¹¶åšå‡ºäº†è‡ªå·±çš„ä¸€äº›æ”¹è¿›ï¼Œ"),t("strong",[v._v("æ¶ˆæ¯å¯é æ€§ä¸Š")]),v._v(" æ¯” "),t("code",[v._v("Kafka")]),v._v(" æ›´å¥½ã€‚"),t("code",[v._v("RocketMQ")]),v._v(" åœ¨é˜¿é‡Œå†…éƒ¨ \b è¢«å¹¿æ³›åº”ç”¨åœ¨ "),t("strong",[v._v("è®¢å•")]),v._v("ï¼Œ"),t("strong",[v._v("äº¤æ˜“")]),v._v("ï¼Œ"),t("strong",[v._v("å……å€¼")]),v._v("ï¼Œ"),t("strong",[v._v("æµè®¡ç®—")]),v._v("ï¼Œ"),t("strong",[v._v("æ¶ˆæ¯æ¨é€")]),v._v("ï¼Œ"),t("strong",[v._v("æ—¥å¿—æµå¼å¤„ç†")]),v._v("ï¼Œ"),t("code",[v._v("binglog")]),v._v(" "),t("strong",[v._v("åˆ†å‘")]),v._v(" ç­‰åœºæ™¯ã€‚")]),v._v(" "),t("h4",{attrs:{id:"a-ä¸»è¦ç‰¹æ€§-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#a-ä¸»è¦ç‰¹æ€§-3"}},[v._v("#")]),v._v(" (a) ä¸»è¦ç‰¹æ€§")]),v._v(" "),t("p",[v._v('![img](data:image/svg+xml;utf8,<?xml version="1.0"?>'),t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"800",height:"600"}}),v._v(")")]),v._v(" "),t("ol",[t("li",[v._v("åŸºäº "),t("strong",[v._v("é˜Ÿåˆ—æ¨¡å‹")]),v._v("ï¼šå…·æœ‰ "),t("strong",[v._v("é«˜æ€§èƒ½")]),v._v("ã€"),t("strong",[v._v("é«˜å¯é ")]),v._v("ã€"),t("strong",[v._v("é«˜å®æ—¶")]),v._v("ã€"),t("strong",[v._v("åˆ†å¸ƒå¼")]),v._v(" ç­‰ç‰¹ç‚¹ï¼›")]),v._v(" "),t("li",[t("code",[v._v("Producer")]),v._v("ã€"),t("code",[v._v("Consumer")]),v._v("ã€"),t("strong",[v._v("é˜Ÿåˆ—")]),v._v(" éƒ½æ”¯æŒ "),t("strong",[v._v("åˆ†å¸ƒå¼")]),v._v("ï¼›")]),v._v(" "),t("li",[t("code",[v._v("Producer")]),v._v(" å‘ä¸€äº›é˜Ÿåˆ—è½®æµå‘é€æ¶ˆæ¯ï¼Œ"),t("strong",[v._v("é˜Ÿåˆ—é›†åˆ")]),v._v(" ç§°ä¸º "),t("code",[v._v("Topic")]),v._v("ã€‚"),t("code",[v._v("Consumer")]),v._v(" å¦‚æœåš "),t("strong",[v._v("å¹¿æ’­æ¶ˆè´¹")]),v._v("ï¼Œåˆ™ä¸€ä¸ª "),t("code",[v._v("Consumer")]),v._v(" å®ä¾‹æ¶ˆè´¹è¿™ä¸ª "),t("code",[v._v("Topic")]),v._v(" å¯¹åº”çš„ "),t("strong",[v._v("æ‰€æœ‰é˜Ÿåˆ—")]),v._v("ï¼›å¦‚æœåš "),t("strong",[v._v("é›†ç¾¤æ¶ˆè´¹")]),v._v("ï¼Œåˆ™ "),t("strong",[v._v("å¤šä¸ª")]),v._v(" "),t("code",[v._v("Consumer")]),v._v(" å®ä¾‹ "),t("strong",[v._v("å¹³å‡æ¶ˆè´¹")]),v._v(" è¿™ä¸ª "),t("code",[v._v("Topic")]),v._v(" å¯¹åº”çš„é˜Ÿåˆ—é›†åˆï¼›")]),v._v(" "),t("li",[v._v("èƒ½å¤Ÿä¿è¯ "),t("strong",[v._v("ä¸¥æ ¼çš„æ¶ˆæ¯é¡ºåº")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("æä¾›ä¸°å¯Œçš„ "),t("strong",[v._v("æ¶ˆæ¯æ‹‰å–æ¨¡å¼")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("é«˜æ•ˆçš„è®¢é˜…è€… "),t("strong",[v._v("æ°´å¹³æ‰©å±•")]),v._v("èƒ½åŠ›ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("å®æ—¶")]),v._v(" çš„ "),t("strong",[v._v("æ¶ˆæ¯è®¢é˜…æœºåˆ¶")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("äº¿çº§ "),t("strong",[v._v("æ¶ˆæ¯å †ç§¯")]),v._v(" èƒ½åŠ›ï¼›")]),v._v(" "),t("li",[v._v("è¾ƒå°‘çš„å¤–éƒ¨ä¾èµ–ã€‚")])]),v._v(" "),t("h4",{attrs:{id:"b-éƒ¨ç½²ç¯å¢ƒ-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#b-éƒ¨ç½²ç¯å¢ƒ-3"}},[v._v("#")]),v._v(" (b) éƒ¨ç½²ç¯å¢ƒ")]),v._v(" "),t("p",[t("code",[v._v("RocketMQ")]),v._v(" å¯ä»¥è¿è¡Œåœ¨ "),t("code",[v._v("Java")]),v._v(" è¯­è¨€æ‰€æ”¯æŒçš„å¹³å°ä¹‹ä¸Šã€‚ä½¿ç”¨ "),t("code",[v._v("RocketMQ")]),v._v(" éœ€è¦ï¼š")]),v._v(" "),t("ul",[t("li",[t("code",[v._v("Java JDK")])]),v._v(" "),t("li",[v._v("å®‰è£… "),t("code",[v._v("git")]),v._v("ã€"),t("code",[v._v("Maven")])]),v._v(" "),t("li",[t("code",[v._v("RocketMQ")]),v._v(" å®‰è£…åŒ…")])]),v._v(" "),t("h4",{attrs:{id:"c-ä¼˜ç‚¹-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#c-ä¼˜ç‚¹-3"}},[v._v("#")]),v._v(" (c) ä¼˜ç‚¹")]),v._v(" "),t("ol",[t("li",[t("strong",[v._v("å•æœº")]),v._v(" æ”¯æŒ "),t("code",[v._v("1")]),v._v(" ä¸‡ä»¥ä¸Š "),t("strong",[v._v("æŒä¹…åŒ–é˜Ÿåˆ—")]),v._v("ï¼›")]),v._v(" "),t("li",[t("code",[v._v("RocketMQ")]),v._v(" çš„æ‰€æœ‰æ¶ˆæ¯éƒ½æ˜¯ "),t("strong",[v._v("æŒä¹…åŒ–çš„")]),v._v("ï¼Œå…ˆå†™å…¥ç³»ç»Ÿ "),t("code",[v._v("PAGECACHE")]),v._v("ï¼Œç„¶å "),t("strong",[v._v("åˆ·ç›˜")]),v._v("ï¼Œå¯ä»¥ä¿è¯ "),t("strong",[v._v("å†…å­˜")]),v._v(" ä¸ "),t("strong",[v._v("ç£ç›˜")]),v._v(" éƒ½æœ‰ä¸€ä»½æ•°æ®ï¼Œè€Œ "),t("strong",[v._v("è®¿é—®")]),v._v(" æ—¶ï¼Œç›´æ¥ "),t("strong",[v._v("ä»å†…å­˜è¯»å–")]),v._v("ã€‚")]),v._v(" "),t("li",[v._v("æ¨¡å‹ç®€å•ï¼Œæ¥å£æ˜“ç”¨ï¼ˆ"),t("code",[v._v("JMS")]),v._v(" çš„æ¥å£å¾ˆå¤šåœºåˆå¹¶ä¸å¤ªå®ç”¨ï¼‰ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("æ€§èƒ½éå¸¸å¥½")]),v._v("ï¼Œå¯ä»¥å…è®¸ "),t("strong",[v._v("å¤§é‡å †ç§¯æ¶ˆæ¯")]),v._v(" åœ¨ "),t("code",[v._v("Broker")]),v._v(" ä¸­ï¼›")]),v._v(" "),t("li",[v._v("æ”¯æŒ "),t("strong",[v._v("å¤šç§æ¶ˆè´¹æ¨¡å¼")]),v._v("ï¼ŒåŒ…æ‹¬ "),t("strong",[v._v("é›†ç¾¤æ¶ˆè´¹")]),v._v("ã€"),t("strong",[v._v("å¹¿æ’­æ¶ˆè´¹")]),v._v("ç­‰ï¼›")]),v._v(" "),t("li",[v._v("å„ä¸ªç¯èŠ‚ "),t("strong",[v._v("åˆ†å¸ƒå¼æ‰©å±•è®¾è®¡")]),v._v("ï¼Œæ”¯æŒ "),t("strong",[v._v("ä¸»ä»")]),v._v(" å’Œ "),t("strong",[v._v("é«˜å¯ç”¨")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("å¼€å‘åº¦è¾ƒæ´»è·ƒï¼Œç‰ˆæœ¬æ›´æ–°å¾ˆå¿«ã€‚")])]),v._v(" "),t("h4",{attrs:{id:"d-ç¼ºç‚¹-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#d-ç¼ºç‚¹-3"}},[v._v("#")]),v._v(" (d) ç¼ºç‚¹")]),v._v(" "),t("ol",[t("li",[v._v("æ”¯æŒçš„ "),t("strong",[v._v("å®¢æˆ·ç«¯è¯­è¨€")]),v._v(" ä¸å¤šï¼Œç›®å‰æ˜¯ "),t("code",[v._v("Java")]),v._v(" åŠ "),t("code",[v._v("C++")]),v._v("ï¼Œå…¶ä¸­ "),t("code",[v._v("C++")]),v._v(" è¿˜ä¸æˆç†Ÿï¼›")]),v._v(" "),t("li",[t("code",[v._v("RocketMQ")]),v._v(" ç¤¾åŒºå…³æ³¨åº¦åŠæˆç†Ÿåº¦ä¹Ÿä¸åŠå‰ä¸¤è€…ï¼›")]),v._v(" "),t("li",[v._v("æ²¡æœ‰ "),t("code",[v._v("Web")]),v._v(" ç®¡ç†ç•Œé¢ï¼Œæä¾›äº†ä¸€ä¸ª "),t("code",[v._v("CLI")]),v._v(" (å‘½ä»¤è¡Œç•Œé¢) ç®¡ç†å·¥å…·å¸¦æ¥ "),t("strong",[v._v("æŸ¥è¯¢")]),v._v("ã€"),t("strong",[v._v("ç®¡ç†")]),v._v(" å’Œ "),t("strong",[v._v("è¯Šæ–­å„ç§é—®é¢˜")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("æ²¡æœ‰åœ¨ "),t("code",[v._v("MQ")]),v._v(" æ ¸å¿ƒé‡Œå®ç° "),t("code",[v._v("JMS")]),v._v(" ç­‰æ¥å£ï¼›")])]),v._v(" "),t("h3",{attrs:{id:"_5-4-kafka"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-kafka"}},[v._v("#")]),v._v(" 5.4. Kafka")]),v._v(" "),t("p",[t("code",[v._v("Apache Kafka")]),v._v(" æ˜¯ä¸€ä¸ª "),t("strong",[v._v("åˆ†å¸ƒå¼æ¶ˆæ¯å‘å¸ƒè®¢é˜…")]),v._v(" ç³»ç»Ÿã€‚å®ƒæœ€åˆç”± "),t("code",[v._v("LinkedIn")]),v._v(" å…¬å¸åŸºäºç‹¬ç‰¹çš„è®¾è®¡å®ç°ä¸ºä¸€ä¸ª "),t("strong",[v._v("åˆ†å¸ƒå¼çš„æ—¥å¿—æäº¤ç³»ç»Ÿ")]),v._v(" ("),t("code",[v._v("a distributed commit log")]),v._v(")ï¼Œä¹‹åæˆä¸º "),t("code",[v._v("Apache")]),v._v(" é¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚"),t("code",[v._v("Kafka")]),v._v(" "),t("strong",[v._v("æ€§èƒ½é«˜æ•ˆ")]),v._v("ã€"),t("strong",[v._v("å¯æ‰©å±•è‰¯å¥½")]),v._v(" å¹¶ä¸” "),t("strong",[v._v("å¯æŒä¹…åŒ–")]),v._v("ã€‚å®ƒçš„ "),t("strong",[v._v("åˆ†åŒºç‰¹æ€§")]),v._v("ï¼Œ"),t("strong",[v._v("å¯å¤åˆ¶")]),v._v(" å’Œ "),t("strong",[v._v("å¯å®¹é”™")]),v._v(" éƒ½æ˜¯å…¶ä¸é”™çš„ç‰¹æ€§ã€‚")]),v._v(" "),t("h4",{attrs:{id:"a-ä¸»è¦ç‰¹æ€§-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#a-ä¸»è¦ç‰¹æ€§-4"}},[v._v("#")]),v._v(" (a) ä¸»è¦ç‰¹æ€§")]),v._v(" "),t("ol",[t("li",[t("strong",[v._v("å¿«é€ŸæŒä¹…åŒ–")]),v._v("ï¼šå¯ä»¥åœ¨ "),t("code",[v._v("O(1)")]),v._v(" çš„ç³»ç»Ÿå¼€é”€ä¸‹è¿›è¡Œ "),t("strong",[v._v("æ¶ˆæ¯æŒä¹…åŒ–")]),v._v("ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("é«˜åå")]),v._v("ï¼šåœ¨ä¸€å°æ™®é€šçš„æœåŠ¡å™¨ä¸Šæ—¢å¯ä»¥è¾¾åˆ° "),t("code",[v._v("10W/s")]),v._v(" çš„ "),t("strong",[v._v("ååé€Ÿç‡")]),v._v("ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("å®Œå…¨çš„åˆ†å¸ƒå¼ç³»ç»Ÿ")]),v._v("ï¼š"),t("code",[v._v("Broker")]),v._v("ã€"),t("code",[v._v("Producer")]),v._v(" å’Œ "),t("code",[v._v("Consumer")]),v._v(" éƒ½åŸç”Ÿè‡ªåŠ¨æ”¯æŒ "),t("strong",[v._v("åˆ†å¸ƒå¼")]),v._v("ï¼Œè‡ªåŠ¨å®ç° "),t("strong",[v._v("è´Ÿè½½å‡è¡¡")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("æ”¯æŒ "),t("strong",[v._v("åŒæ­¥")]),v._v(" å’Œ "),t("strong",[v._v("å¼‚æ­¥")]),v._v(" å¤åˆ¶ä¸¤ç§ "),t("strong",[v._v("é«˜å¯ç”¨æœºåˆ¶")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("æ”¯æŒ "),t("strong",[v._v("æ•°æ®æ‰¹é‡å‘é€")]),v._v(" å’Œ "),t("strong",[v._v("æ‹‰å–")]),v._v("ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("é›¶æ‹·è´æŠ€æœ¯(zero-copy)")]),v._v("ï¼šå‡å°‘ "),t("code",[v._v("IO")]),v._v(" æ“ä½œæ­¥éª¤ï¼Œæé«˜ "),t("strong",[v._v("ç³»ç»Ÿååé‡")]),v._v("ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("æ•°æ®è¿ç§»")]),v._v("ã€"),t("strong",[v._v("æ‰©å®¹")]),v._v(" å¯¹ç”¨æˆ·é€æ˜ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("æ— éœ€åœæœº")]),v._v(" å³å¯æ‰©å±•æœºå™¨ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("å…¶ä»–ç‰¹æ€§")]),v._v("ï¼šä¸°å¯Œçš„ "),t("strong",[v._v("æ¶ˆæ¯æ‹‰å–æ¨¡å‹")]),v._v("ã€é«˜æ•ˆ "),t("strong",[v._v("è®¢é˜…è€…æ°´å¹³æ‰©å±•")]),v._v("ã€å®æ—¶çš„ "),t("strong",[v._v("æ¶ˆæ¯è®¢é˜…")]),v._v("ã€äº¿çº§çš„ "),t("strong",[v._v("æ¶ˆæ¯å †ç§¯èƒ½åŠ›")]),v._v("ã€å®šæœŸåˆ é™¤æœºåˆ¶ï¼›")])]),v._v(" "),t("h4",{attrs:{id:"b-éƒ¨ç½²ç¯å¢ƒ-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#b-éƒ¨ç½²ç¯å¢ƒ-4"}},[v._v("#")]),v._v(" (b) éƒ¨ç½²ç¯å¢ƒ")]),v._v(" "),t("p",[v._v("ä½¿ç”¨ "),t("code",[v._v("Kafka")]),v._v(" éœ€è¦ï¼š")]),v._v(" "),t("ul",[t("li",[t("code",[v._v("Java JDK")])]),v._v(" "),t("li",[t("code",[v._v("Kafka")]),v._v(" å®‰è£…åŒ…")])]),v._v(" "),t("h4",{attrs:{id:"c-ä¼˜ç‚¹-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#c-ä¼˜ç‚¹-4"}},[v._v("#")]),v._v(" (c) ä¼˜ç‚¹")]),v._v(" "),t("ol",[t("li",[t("strong",[v._v("å®¢æˆ·ç«¯è¯­è¨€ä¸°å¯Œ")]),v._v("ï¼šæ”¯æŒ "),t("code",[v._v("Java")]),v._v("ã€"),t("code",[v._v(".Net")]),v._v("ã€"),t("code",[v._v("PHP")]),v._v("ã€"),t("code",[v._v("Ruby")]),v._v("ã€"),t("code",[v._v("Python")]),v._v("ã€"),t("code",[v._v("Go")]),v._v(" ç­‰å¤šç§è¯­è¨€ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("é«˜æ€§èƒ½")]),v._v("ï¼šå•æœºå†™å…¥ "),t("code",[v._v("TPS")]),v._v(" çº¦åœ¨ "),t("code",[v._v("100")]),v._v(" ä¸‡æ¡/ç§’ï¼Œæ¶ˆæ¯å¤§å° "),t("code",[v._v("10")]),v._v(" ä¸ªå­—èŠ‚ï¼›")]),v._v(" "),t("li",[v._v("æä¾› "),t("strong",[v._v("å®Œå…¨åˆ†å¸ƒå¼æ¶æ„")]),v._v("ï¼Œå¹¶æœ‰ "),t("code",[v._v("replica")]),v._v(" æœºåˆ¶ï¼Œæ‹¥æœ‰è¾ƒé«˜çš„ "),t("strong",[v._v("å¯ç”¨æ€§")]),v._v(" å’Œ "),t("strong",[v._v("å¯é æ€§")]),v._v("ï¼Œç†è®ºä¸Šæ”¯æŒ "),t("strong",[v._v("æ¶ˆæ¯æ— é™å †ç§¯")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("æ”¯æŒæ‰¹é‡æ“ä½œï¼›")]),v._v(" "),t("li",[t("strong",[v._v("æ¶ˆè´¹è€…")]),v._v(" é‡‡ç”¨ "),t("code",[v._v("Pull")]),v._v(" æ–¹å¼è·å–æ¶ˆæ¯ã€‚"),t("strong",[v._v("æ¶ˆæ¯æœ‰åº")]),v._v("ï¼Œ"),t("strong",[v._v("é€šè¿‡æ§åˆ¶")]),v._v(" èƒ½å¤Ÿä¿è¯æ‰€æœ‰æ¶ˆæ¯è¢«æ¶ˆè´¹ä¸”ä»…è¢«æ¶ˆè´¹ "),t("strong",[v._v("ä¸€æ¬¡")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("æœ‰ä¼˜ç§€çš„ç¬¬ä¸‰æ–¹ "),t("code",[v._v("Kafka Web")]),v._v(" ç®¡ç†ç•Œé¢ "),t("code",[v._v("Kafka-Manager")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("åœ¨ "),t("strong",[v._v("æ—¥å¿—é¢†åŸŸ")]),v._v(" æ¯”è¾ƒæˆç†Ÿï¼Œè¢«å¤šå®¶å…¬å¸å’Œå¤šä¸ªå¼€æºé¡¹ç›®ä½¿ç”¨ã€‚")])]),v._v(" "),t("h4",{attrs:{id:"d-ç¼ºç‚¹-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#d-ç¼ºç‚¹-4"}},[v._v("#")]),v._v(" (d) ç¼ºç‚¹")]),v._v(" "),t("ol",[t("li",[t("code",[v._v("Kafka")]),v._v(" å•æœºè¶…è¿‡ "),t("code",[v._v("64")]),v._v(" ä¸ª "),t("strong",[v._v("é˜Ÿåˆ—/åˆ†åŒº")]),v._v(" æ—¶ï¼Œ"),t("code",[v._v("Load")]),v._v(" æ—¶ä¼šå‘ç”Ÿæ˜æ˜¾çš„é£™é«˜ç°è±¡ã€‚"),t("strong",[v._v("é˜Ÿåˆ—")]),v._v(" è¶Šå¤šï¼Œ"),t("strong",[v._v("è´Ÿè½½")]),v._v(" è¶Šé«˜ï¼Œå‘é€æ¶ˆæ¯ "),t("strong",[v._v("å“åº”æ—¶é—´å˜é•¿")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("ä½¿ç”¨ "),t("strong",[v._v("çŸ­è½®è¯¢æ–¹å¼")]),v._v("ï¼Œ"),t("strong",[v._v("å®æ—¶æ€§")]),v._v(" å–å†³äº "),t("strong",[v._v("è½®è¯¢é—´éš”æ—¶é—´")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("æ¶ˆè´¹å¤±è´¥ "),t("strong",[v._v("ä¸æ”¯æŒé‡è¯•")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("æ”¯æŒ "),t("strong",[v._v("æ¶ˆæ¯é¡ºåº")]),v._v("ï¼Œä½†æ˜¯ "),t("strong",[v._v("ä¸€å°ä»£ç†å®•æœº")]),v._v(" åï¼Œå°±ä¼šäº§ç”Ÿ "),t("strong",[v._v("æ¶ˆæ¯ä¹±åº")]),v._v("ï¼›")]),v._v(" "),t("li",[v._v("ç¤¾åŒºæ›´æ–°è¾ƒæ…¢ã€‚")])]),v._v(" "),t("h3",{attrs:{id:"_5-5-mq-çš„æŠ€æœ¯é€‰å‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-mq-çš„æŠ€æœ¯é€‰å‹"}},[v._v("#")]),v._v(" 5.5. MQ çš„æŠ€æœ¯é€‰å‹")]),v._v(" "),t("p",[v._v("MQ çš„æŠ€æœ¯é€‰å‹ä¸€èˆ¬è¦è€ƒè™‘ä»¥ä¸‹å‡ ç‚¹ï¼š")]),v._v(" "),t("ul",[t("li",[t("strong",[v._v("æ˜¯å¦å¼€æº")]),v._v("ï¼šè¿™å†³å®šäº†èƒ½å¦å•†ç”¨ï¼Œæ‰€ä»¥æœ€ä¸ºé‡è¦ã€‚")]),v._v(" "),t("li",[t("strong",[v._v("ç¤¾åŒºæ´»è·ƒåº¦è¶Šé«˜è¶Šå¥½")]),v._v("ï¼šé«˜ç¤¾åŒºæ´»è·ƒåº¦ï¼Œä¸€èˆ¬ä¿è¯äº†ä½ Bug ç‡ï¼Œå› ä¸ºå¤§éƒ¨åˆ† Bugï¼Œå·²ç»æœ‰äººé‡åˆ°å¹¶è§£å†³äº†ã€‚")]),v._v(" "),t("li",[t("strong",[v._v("æŠ€æœ¯ç”Ÿæ€é€‚é…æ€§")]),v._v("ï¼šå®¢æˆ·ç«¯å¯¹å„ç§ç¼–ç¨‹è¯­è¨€çš„æ”¯æŒã€‚æ¯”å¦‚ï¼šå¦‚æœä½¿ç”¨ MQ çš„éƒ½æ˜¯ Java åº”ç”¨ï¼Œé‚£ä¹ˆ ActiveMQã€RabbitMQã€RocketMQã€Kafka éƒ½å¯ä»¥ã€‚å¦‚æœéœ€è¦æ”¯æŒå…¶ä»–è¯­è¨€ï¼Œé‚£ä¹ˆ RMQ æ¯”è¾ƒåˆé€‚ï¼Œå› ä¸ºå®ƒæ”¯æŒçš„ç¼–ç¨‹è¯­è¨€æ¯”è¾ƒä¸°å¯Œã€‚å¦‚æœ MQ æ˜¯åº”ç”¨äºå¤§æ•°æ®æˆ–æµå¼è®¡ç®—ï¼Œé‚£ä¹ˆ Kafka å‡ ä¹æ˜¯æ ‡é…ã€‚å¦‚æœæ˜¯åº”ç”¨äºåœ¨çº¿ä¸šåŠ¡ç³»ç»Ÿï¼Œé‚£ä¹ˆ Kafka å°±ä¸åˆé€‚äº†ï¼Œå¯ä»¥è€ƒè™‘ RabbitMQã€ RocketMQ å¾ˆåˆé€‚ã€‚")]),v._v(" "),t("li",[t("strong",[v._v("é«˜å¯ç”¨æ€§")]),v._v("ï¼šåº”ç”¨äºçº¿ä¸Šçš„å‡†å…¥æ ‡å‡†ã€‚")]),v._v(" "),t("li",[t("strong",[v._v("æ€§èƒ½")]),v._v("ï¼šå…·å¤‡è¶³å¤Ÿå¥½çš„æ€§èƒ½ï¼Œèƒ½æ»¡è¶³ç»å¤§å¤šæ•°åœºæ™¯çš„æ€§èƒ½è¦æ±‚ã€‚")])]),v._v(" "),t("table",[t("thead",[t("tr",[t("th",[v._v("ç‰¹æ€§")]),v._v(" "),t("th",[v._v("ActiveMQ")]),v._v(" "),t("th",[v._v("RabbitMQ")]),v._v(" "),t("th",[v._v("RocketMQ")]),v._v(" "),t("th",[v._v("Kafka")])])]),v._v(" "),t("tbody",[t("tr",[t("td",[v._v("å•æœºååé‡")]),v._v(" "),t("td",[v._v("ä¸‡çº§ï¼Œæ¯” RocketMQã€Kafka ä½ä¸€ä¸ªæ•°é‡çº§")]),v._v(" "),t("td",[v._v("åŒ ActiveMQ")]),v._v(" "),t("td",[v._v("10 ä¸‡çº§ï¼Œæ”¯æ’‘é«˜åå")]),v._v(" "),t("td",[v._v("10 ä¸‡çº§ï¼Œé«˜ååï¼Œä¸€èˆ¬é…åˆå¤§æ•°æ®ç±»çš„ç³»ç»Ÿæ¥è¿›è¡Œæµå¼è®¡ç®—ã€æ—¥å¿—é‡‡é›†ç­‰åœºæ™¯")])]),v._v(" "),t("tr",[t("td",[v._v("topic æ•°é‡å¯¹ååé‡çš„å½±å“")]),v._v(" "),t("td"),v._v(" "),t("td"),v._v(" "),t("td",[v._v("topic å¯ä»¥è¾¾åˆ°å‡ ç™¾/å‡ åƒçš„çº§åˆ«ï¼Œååé‡ä¼šæœ‰è¾ƒå°å¹…åº¦çš„ä¸‹é™ï¼Œè¿™æ˜¯ RocketMQ çš„ä¸€å¤§ä¼˜åŠ¿ï¼Œåœ¨åŒç­‰æœºå™¨ä¸‹ï¼Œå¯ä»¥æ”¯æ’‘å¤§é‡çš„ topic")]),v._v(" "),t("td",[v._v("topic ä»å‡ ååˆ°å‡ ç™¾ä¸ªæ—¶å€™ï¼Œååé‡ä¼šå¤§å¹…åº¦ä¸‹é™ï¼Œåœ¨åŒç­‰æœºå™¨ä¸‹ï¼ŒKafka å°½é‡ä¿è¯ topic æ•°é‡ä¸è¦è¿‡å¤šï¼Œå¦‚æœè¦æ”¯æ’‘å¤§è§„æ¨¡çš„ topicï¼Œéœ€è¦å¢åŠ æ›´å¤šçš„æœºå™¨èµ„æº")])]),v._v(" "),t("tr",[t("td",[v._v("æ—¶æ•ˆæ€§")]),v._v(" "),t("td",[v._v("ms çº§")]),v._v(" "),t("td",[v._v("å¾®ç§’çº§ï¼Œè¿™æ˜¯ RabbitMQ çš„ä¸€å¤§ç‰¹ç‚¹ï¼Œå»¶è¿Ÿæœ€ä½")]),v._v(" "),t("td",[v._v("ms çº§")]),v._v(" "),t("td",[v._v("å»¶è¿Ÿåœ¨ ms çº§ä»¥å†…")])]),v._v(" "),t("tr",[t("td",[v._v("å¯ç”¨æ€§")]),v._v(" "),t("td",[v._v("é«˜ï¼ŒåŸºäºä¸»ä»æ¶æ„å®ç°é«˜å¯ç”¨")]),v._v(" "),t("td",[v._v("åŒ ActiveMQ")]),v._v(" "),t("td",[v._v("éå¸¸é«˜ï¼Œåˆ†å¸ƒå¼æ¶æ„")]),v._v(" "),t("td",[v._v("éå¸¸é«˜ï¼Œåˆ†å¸ƒå¼ï¼Œä¸€ä¸ªæ•°æ®å¤šä¸ªå‰¯æœ¬ï¼Œå°‘æ•°æœºå™¨å®•æœºï¼Œä¸ä¼šä¸¢å¤±æ•°æ®ï¼Œä¸ä¼šå¯¼è‡´ä¸å¯ç”¨")])]),v._v(" "),t("tr",[t("td",[v._v("æ¶ˆæ¯å¯é æ€§")]),v._v(" "),t("td",[v._v("æœ‰è¾ƒä½çš„æ¦‚ç‡ä¸¢å¤±æ•°æ®")]),v._v(" "),t("td",[v._v("åŸºæœ¬ä¸ä¸¢")]),v._v(" "),t("td",[v._v("ç»è¿‡å‚æ•°ä¼˜åŒ–é…ç½®ï¼Œå¯ä»¥åšåˆ° 0 ä¸¢å¤±")]),v._v(" "),t("td",[v._v("åŒ RocketMQ")])]),v._v(" "),t("tr",[t("td",[v._v("åŠŸèƒ½æ”¯æŒ")]),v._v(" "),t("td",[v._v("MQ é¢†åŸŸçš„åŠŸèƒ½æå…¶å®Œå¤‡")]),v._v(" "),t("td",[v._v("åŸºäº erlang å¼€å‘ï¼Œå¹¶å‘èƒ½åŠ›å¾ˆå¼ºï¼Œæ€§èƒ½æå¥½ï¼Œå»¶æ—¶å¾ˆä½")]),v._v(" "),t("td",[v._v("MQ åŠŸèƒ½è¾ƒä¸ºå®Œå–„ï¼Œè¿˜æ˜¯åˆ†å¸ƒå¼çš„ï¼Œæ‰©å±•æ€§å¥½")]),v._v(" "),t("td",[v._v("åŠŸèƒ½è¾ƒä¸ºç®€å•ï¼Œä¸»è¦æ”¯æŒç®€å•çš„ MQ åŠŸèƒ½ï¼Œåœ¨å¤§æ•°æ®é¢†åŸŸçš„å®æ—¶è®¡ç®—ä»¥åŠæ—¥å¿—é‡‡é›†è¢«å¤§è§„æ¨¡ä½¿ç”¨")])])])]),v._v(" "),t("p",[v._v("ç»¼ä¸Šï¼Œå„ç§å¯¹æ¯”ä¹‹åï¼Œæœ‰å¦‚ä¸‹å»ºè®®ï¼š")]),v._v(" "),t("ul",[t("li",[v._v("ä¸šåŠ¡ç³»ç»Ÿåœºæ™¯ï¼Œå»ºè®®ä½¿ç”¨ RocketMQã€RabbitMQã€‚å¦‚æœæ‰€æœ‰åº”ç”¨éƒ½æ˜¯ Javaï¼Œä¼˜é€‰ RocketMQï¼Œå› ä¸º RocketMQ æœ¬èº«å°±æ˜¯ Java å¼€å‘çš„ï¼Œæ‰€ä»¥æœ€é€‚é…ã€‚å¦‚æœä¸šåŠ¡ä¸­æœ‰å¤šç§ç¼–ç¨‹è¯­è¨€çš„åº”ç”¨ï¼Œå»ºè®®é€‰æ‹© RabbitMQã€‚")]),v._v(" "),t("li",[v._v("å¤§æ•°æ®å’Œæµå¼è®¡ç®—é¢†åŸŸï¼Œæˆ–æ˜¯ä½œä¸ºæ—¥å¿—ç¼“å†²ï¼Œå¼ºçƒˆå»ºè®®é€‰æ‹© Kafkaï¼Œä¸šç•Œæ ‡å‡†ï¼Œä¹…ç»è€ƒéªŒã€‚")])]),v._v(" "),t("h2",{attrs:{id:"_6-jms"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-jms"}},[v._v("#")]),v._v(" 6. JMS")]),v._v(" "),t("p",[v._v("æåˆ° MQï¼Œå°±é¡ºä¾¿æä¸€ä¸‹ JMS ã€‚")]),v._v(" "),t("p",[t("strong",[v._v("JMSï¼ˆJAVA Message Serviceï¼Œjava æ¶ˆæ¯æœåŠ¡ï¼‰API æ˜¯ä¸€ä¸ªæ¶ˆæ¯æœåŠ¡çš„æ ‡å‡†/è§„èŒƒï¼Œå…è®¸åº”ç”¨ç¨‹åºç»„ä»¶åŸºäº JavaEE å¹³å°åˆ›å»ºã€å‘é€ã€æ¥æ”¶å’Œè¯»å–æ¶ˆæ¯")]),v._v("ã€‚å®ƒä½¿åˆ†å¸ƒå¼é€šä¿¡è€¦åˆåº¦æ›´ä½ï¼Œæ¶ˆæ¯æœåŠ¡æ›´åŠ å¯é ä»¥åŠå¼‚æ­¥æ€§ã€‚")]),v._v(" "),t("p",[v._v("åœ¨ EJB æ¶æ„ä¸­ï¼Œæœ‰æ¶ˆæ¯ bean å¯ä»¥æ— ç¼çš„ä¸ JMS æ¶ˆæ¯æœåŠ¡é›†æˆã€‚åœ¨ J2EE æ¶æ„æ¨¡å¼ä¸­ï¼Œæœ‰æ¶ˆæ¯æœåŠ¡è€…æ¨¡å¼ï¼Œç”¨äºå®ç°æ¶ˆæ¯ä¸åº”ç”¨ç›´æ¥çš„è§£è€¦ã€‚")]),v._v(" "),t("h3",{attrs:{id:"_6-1-æ¶ˆæ¯æ¨¡å‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-æ¶ˆæ¯æ¨¡å‹"}},[v._v("#")]),v._v(" 6.1. æ¶ˆæ¯æ¨¡å‹")]),v._v(" "),t("p",[v._v("åœ¨ JMS æ ‡å‡†ä¸­ï¼Œæœ‰ä¸¤ç§æ¶ˆæ¯æ¨¡å‹ï¼š")]),v._v(" "),t("ul",[t("li",[v._v("P2P(Point to Point)")]),v._v(" "),t("li",[v._v("Pub/Sub(Publish/Subscribe)")])]),v._v(" "),t("h4",{attrs:{id:"p2p-æ¨¡å¼"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#p2p-æ¨¡å¼"}},[v._v("#")]),v._v(" P2P æ¨¡å¼")]),v._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/3101171-2adc66e2367cd2c2.png"}})]),v._v("\nP2P æ¨¡å¼åŒ…å«ä¸‰ä¸ªè§’è‰²ï¼šMQï¼ˆQueueï¼‰ï¼Œå‘é€è€…(Sender)ï¼Œæ¥æ”¶è€…(Receiver)ã€‚æ¯ä¸ªæ¶ˆæ¯éƒ½è¢«å‘é€åˆ°ä¸€ä¸ªç‰¹å®šçš„é˜Ÿåˆ—ï¼Œæ¥æ”¶è€…ä»é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯ã€‚é˜Ÿåˆ—ä¿ç•™ç€æ¶ˆæ¯ï¼Œç›´åˆ°ä»–ä»¬è¢«æ¶ˆè´¹æˆ–è¶…æ—¶ã€‚\n"),t("p",[v._v("P2P çš„ç‰¹ç‚¹")]),v._v(" "),t("ul",[t("li",[v._v("æ¯ä¸ªæ¶ˆæ¯åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…ï¼ˆConsumerï¼‰(å³ä¸€æ—¦è¢«æ¶ˆè´¹ï¼Œæ¶ˆæ¯å°±ä¸å†åœ¨ MQ ä¸­)")]),v._v(" "),t("li",[v._v("å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´åœ¨æ—¶é—´ä¸Šæ²¡æœ‰ä¾èµ–æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´å½“å‘é€è€…å‘é€äº†æ¶ˆæ¯ä¹‹åï¼Œä¸ç®¡æ¥æ”¶è€…æœ‰æ²¡æœ‰æ­£åœ¨è¿è¡Œï¼Œå®ƒä¸ä¼šå½±å“åˆ°æ¶ˆæ¯è¢«å‘é€åˆ°é˜Ÿåˆ—")]),v._v(" "),t("li",[v._v("æ¥æ”¶è€…åœ¨æˆåŠŸæ¥æ”¶æ¶ˆæ¯ä¹‹åéœ€å‘é˜Ÿåˆ—åº”ç­”æˆåŠŸ")])]),v._v(" "),t("p",[v._v("å¦‚æœå¸Œæœ›å‘é€çš„æ¯ä¸ªæ¶ˆæ¯éƒ½ä¼šè¢«æˆåŠŸå¤„ç†çš„è¯ï¼Œé‚£ä¹ˆéœ€è¦ P2P æ¨¡å¼ã€‚")]),v._v(" "),t("h4",{attrs:{id:"pub-sub-æ¨¡å¼"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pub-sub-æ¨¡å¼"}},[v._v("#")]),v._v(" Pub/sub æ¨¡å¼")]),v._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://upload-images.jianshu.io/upload_images/3101171-12afe9581da889ea.png"}})]),v._v("\nåŒ…å«ä¸‰ä¸ªè§’è‰²ä¸»é¢˜ï¼ˆTopicï¼‰ï¼Œå‘å¸ƒè€…ï¼ˆPublisherï¼‰ï¼Œè®¢é˜…è€…ï¼ˆSubscriberï¼‰ ã€‚å¤šä¸ªå‘å¸ƒè€…å°†æ¶ˆæ¯å‘é€åˆ° Topic,ç³»ç»Ÿå°†è¿™äº›æ¶ˆæ¯ä¼ é€’ç»™å¤šä¸ªè®¢é˜…è€…ã€‚\n"),t("p",[v._v("Pub/Sub çš„ç‰¹ç‚¹")]),v._v(" "),t("ul",[t("li",[v._v("æ¯ä¸ªæ¶ˆæ¯å¯ä»¥æœ‰å¤šä¸ªæ¶ˆè´¹è€…")]),v._v(" "),t("li",[v._v("å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´æœ‰æ—¶é—´ä¸Šçš„ä¾èµ–æ€§ã€‚é’ˆå¯¹æŸä¸ªä¸»é¢˜ï¼ˆTopicï¼‰çš„è®¢é˜…è€…ï¼Œå®ƒå¿…é¡»åˆ›å»ºä¸€ä¸ªè®¢é˜…è€…ä¹‹åï¼Œæ‰èƒ½æ¶ˆè´¹å‘å¸ƒè€…çš„æ¶ˆæ¯ã€‚")]),v._v(" "),t("li",[v._v("ä¸ºäº†æ¶ˆè´¹æ¶ˆæ¯ï¼Œè®¢é˜…è€…å¿…é¡»ä¿æŒè¿è¡Œçš„çŠ¶æ€ã€‚")])]),v._v(" "),t("p",[v._v("ä¸ºäº†ç¼“å’Œè¿™æ ·ä¸¥æ ¼çš„æ—¶é—´ç›¸å…³æ€§ï¼ŒJMS å…è®¸è®¢é˜…è€…åˆ›å»ºä¸€ä¸ªå¯æŒä¹…åŒ–çš„è®¢é˜…ã€‚è¿™æ ·ï¼Œå³ä½¿è®¢é˜…è€…æ²¡æœ‰è¢«æ¿€æ´»ï¼ˆè¿è¡Œï¼‰ï¼Œå®ƒä¹Ÿèƒ½æ¥æ”¶åˆ°å‘å¸ƒè€…çš„æ¶ˆæ¯ã€‚")]),v._v(" "),t("p",[v._v("å¦‚æœå¸Œæœ›å‘é€çš„æ¶ˆæ¯å¯ä»¥ä¸è¢«åšä»»ä½•å¤„ç†ã€æˆ–è€…åªè¢«ä¸€ä¸ªæ¶ˆæ¯è€…å¤„ç†ã€æˆ–è€…å¯ä»¥è¢«å¤šä¸ªæ¶ˆè´¹è€…å¤„ç†çš„è¯ï¼Œé‚£ä¹ˆå¯ä»¥é‡‡ç”¨ Pub/Sub æ¨¡å‹ã€‚")]),v._v(" "),t("h3",{attrs:{id:"_6-2-æ¶ˆæ¯æ¶ˆè´¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-æ¶ˆæ¯æ¶ˆè´¹"}},[v._v("#")]),v._v(" 6.2. æ¶ˆæ¯æ¶ˆè´¹")]),v._v(" "),t("p",[v._v("åœ¨ JMS ä¸­ï¼Œæ¶ˆæ¯çš„äº§ç”Ÿå’Œæ¶ˆè´¹éƒ½æ˜¯å¼‚æ­¥çš„ã€‚å¯¹äºæ¶ˆè´¹æ¥è¯´ï¼ŒJMS çš„æ¶ˆæ¯è€…å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥æ¶ˆè´¹æ¶ˆæ¯ã€‚")]),v._v(" "),t("ul",[t("li",[t("strong",[v._v("åŒæ­¥")]),v._v(" - è®¢é˜…è€…æˆ–æ¥æ”¶è€…é€šè¿‡ "),t("code",[v._v("receive")]),v._v(" æ–¹æ³•æ¥æ¥æ”¶æ¶ˆæ¯ï¼Œ"),t("code",[v._v("receive")]),v._v(" æ–¹æ³•åœ¨æ¥æ”¶åˆ°æ¶ˆæ¯ä¹‹å‰ï¼ˆæˆ–è¶…æ—¶ä¹‹å‰ï¼‰å°†ä¸€ç›´é˜»å¡ï¼›")]),v._v(" "),t("li",[t("strong",[v._v("å¼‚æ­¥")]),v._v(" - è®¢é˜…è€…æˆ–æ¥æ”¶è€…å¯ä»¥æ³¨å†Œä¸ºä¸€ä¸ªæ¶ˆæ¯ç›‘å¬å™¨ã€‚å½“æ¶ˆæ¯åˆ°è¾¾ä¹‹åï¼Œç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ç›‘å¬å™¨çš„ "),t("code",[v._v("onMessage")]),v._v(" æ–¹æ³•ã€‚")])]),v._v(" "),t("p",[t("code",[v._v("JNDI")]),v._v(" - Java å‘½åå’Œç›®å½•æ¥å£,æ˜¯ä¸€ç§æ ‡å‡†çš„ Java å‘½åç³»ç»Ÿæ¥å£ã€‚å¯ä»¥åœ¨ç½‘ç»œä¸ŠæŸ¥æ‰¾å’Œè®¿é—®æœåŠ¡ã€‚é€šè¿‡æŒ‡å®šä¸€ä¸ªèµ„æºåç§°ï¼Œè¯¥åç§°å¯¹åº”äºæ•°æ®åº“æˆ–å‘½åæœåŠ¡ä¸­çš„ä¸€ä¸ªè®°å½•ï¼ŒåŒæ—¶è¿”å›èµ„æºè¿æ¥å»ºç«‹æ‰€å¿…é¡»çš„ä¿¡æ¯ã€‚")]),v._v(" "),t("p",[v._v("JNDI åœ¨ JMS ä¸­èµ·åˆ°æŸ¥æ‰¾å’Œè®¿é—®å‘é€ç›®æ ‡æˆ–æ¶ˆæ¯æ¥æºçš„ä½œç”¨ã€‚")]),v._v(" "),t("h3",{attrs:{id:"_6-3-jms-ç¼–ç¨‹æ¨¡å‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-jms-ç¼–ç¨‹æ¨¡å‹"}},[v._v("#")]),v._v(" 6.3. JMS ç¼–ç¨‹æ¨¡å‹")]),v._v(" "),t("h4",{attrs:{id:"connectionfactory"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#connectionfactory"}},[v._v("#")]),v._v(" ConnectionFactory")]),v._v(" "),t("p",[v._v("åˆ›å»º Connection å¯¹è±¡çš„å·¥å‚ï¼Œé’ˆå¯¹ä¸¤ç§ä¸åŒçš„ jms æ¶ˆæ¯æ¨¡å‹ï¼Œåˆ†åˆ«æœ‰ QueueConnectionFactory å’Œ TopicConnectionFactory ä¸¤ç§ã€‚å¯ä»¥é€šè¿‡ JNDI æ¥æŸ¥æ‰¾ ConnectionFactory å¯¹è±¡ã€‚")]),v._v(" "),t("h4",{attrs:{id:"destination"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#destination"}},[v._v("#")]),v._v(" Destination")]),v._v(" "),t("p",[v._v("Destination çš„æ„æ€æ˜¯æ¶ˆæ¯ç”Ÿäº§è€…çš„æ¶ˆæ¯å‘é€ç›®æ ‡æˆ–è€…è¯´æ¶ˆæ¯æ¶ˆè´¹è€…çš„æ¶ˆæ¯æ¥æºã€‚å¯¹äºæ¶ˆæ¯ç”Ÿäº§è€…æ¥è¯´ï¼Œå®ƒçš„ Destination æ˜¯æŸä¸ªé˜Ÿåˆ—ï¼ˆQueueï¼‰æˆ–æŸä¸ªä¸»é¢˜ï¼ˆTopicï¼‰;å¯¹äºæ¶ˆæ¯æ¶ˆè´¹è€…æ¥è¯´ï¼Œå®ƒçš„ Destination ä¹Ÿæ˜¯æŸä¸ªé˜Ÿåˆ—æˆ–ä¸»é¢˜ï¼ˆå³æ¶ˆæ¯æ¥æºï¼‰ã€‚")]),v._v(" "),t("p",[v._v("æ‰€ä»¥ï¼ŒDestination å®é™…ä¸Šå°±æ˜¯ä¸¤ç§ç±»å‹çš„å¯¹è±¡ï¼šQueueã€Topicã€‚å¯ä»¥é€šè¿‡ JNDI æ¥æŸ¥æ‰¾ Destinationã€‚")]),v._v(" "),t("h4",{attrs:{id:"connection"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#connection"}},[v._v("#")]),v._v(" Connection")]),v._v(" "),t("p",[v._v("Connection è¡¨ç¤ºåœ¨å®¢æˆ·ç«¯å’Œ JMS ç³»ç»Ÿä¹‹é—´å»ºç«‹çš„é“¾æ¥ï¼ˆå¯¹ TCP/IP socket çš„åŒ…è£…ï¼‰ã€‚Connection å¯ä»¥äº§ç”Ÿä¸€ä¸ªæˆ–å¤šä¸ª Sessionã€‚è·Ÿ ConnectionFactory ä¸€æ ·ï¼ŒConnection ä¹Ÿæœ‰ä¸¤ç§ç±»å‹ï¼šQueueConnection å’Œ TopicConnectionã€‚")]),v._v(" "),t("h4",{attrs:{id:"session"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#session"}},[v._v("#")]),v._v(" Session")]),v._v(" "),t("p",[v._v("Session æ˜¯æ“ä½œæ¶ˆæ¯çš„æ¥å£ã€‚å¯ä»¥é€šè¿‡ session åˆ›å»ºç”Ÿäº§è€…ã€æ¶ˆè´¹è€…ã€æ¶ˆæ¯ç­‰ã€‚Session æä¾›äº†äº‹åŠ¡çš„åŠŸèƒ½ã€‚å½“éœ€è¦ä½¿ç”¨ session å‘é€/æ¥æ”¶å¤šä¸ªæ¶ˆæ¯æ—¶ï¼Œå¯ä»¥å°†è¿™äº›å‘é€/æ¥æ”¶åŠ¨ä½œæ”¾åˆ°ä¸€ä¸ªäº‹åŠ¡ä¸­ã€‚åŒæ ·ï¼Œä¹Ÿåˆ† QueueSession å’Œ TopicSessionã€‚")]),v._v(" "),t("h4",{attrs:{id:"æ¶ˆæ¯çš„ç”Ÿäº§è€…"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ¶ˆæ¯çš„ç”Ÿäº§è€…"}},[v._v("#")]),v._v(" æ¶ˆæ¯çš„ç”Ÿäº§è€…")]),v._v(" "),t("p",[v._v("æ¶ˆæ¯ç”Ÿäº§è€…ç”± Session åˆ›å»ºï¼Œå¹¶ç”¨äºå°†æ¶ˆæ¯å‘é€åˆ° Destinationã€‚åŒæ ·ï¼Œæ¶ˆæ¯ç”Ÿäº§è€…åˆ†ä¸¤ç§ç±»å‹ï¼šQueueSender å’Œ TopicPublisherã€‚å¯ä»¥è°ƒç”¨æ¶ˆæ¯ç”Ÿäº§è€…çš„æ–¹æ³•ï¼ˆsend æˆ– publish æ–¹æ³•ï¼‰å‘é€æ¶ˆæ¯ã€‚")]),v._v(" "),t("h4",{attrs:{id:"æ¶ˆæ¯æ¶ˆè´¹è€…"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ¶ˆæ¯æ¶ˆè´¹è€…"}},[v._v("#")]),v._v(" æ¶ˆæ¯æ¶ˆè´¹è€…")]),v._v(" "),t("p",[v._v("æ¶ˆæ¯æ¶ˆè´¹è€…ç”± Session åˆ›å»ºï¼Œç”¨äºæ¥æ”¶è¢«å‘é€åˆ° Destination çš„æ¶ˆæ¯ã€‚ä¸¤ç§ç±»å‹ï¼šQueueReceiver å’Œ TopicSubscriberã€‚å¯åˆ†åˆ«é€šè¿‡ session çš„ createReceiver(Queue)æˆ– createSubscriber(Topic)æ¥åˆ›å»ºã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ session çš„ creatDurableSubscriber æ–¹æ³•æ¥åˆ›å»ºæŒä¹…åŒ–çš„è®¢é˜…è€…ã€‚")]),v._v(" "),t("h4",{attrs:{id:"messagelistener"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#messagelistener"}},[v._v("#")]),v._v(" MessageListener")]),v._v(" "),t("p",[v._v("æ¶ˆæ¯ç›‘å¬å™¨ã€‚å¦‚æœæ³¨å†Œäº†æ¶ˆæ¯ç›‘å¬å™¨ï¼Œä¸€æ—¦æ¶ˆæ¯åˆ°è¾¾ï¼Œå°†è‡ªåŠ¨è°ƒç”¨ç›‘å¬å™¨çš„ onMessage æ–¹æ³•ã€‚EJB ä¸­çš„ MDBï¼ˆMessage-Driven Beanï¼‰å°±æ˜¯ä¸€ç§ MessageListenerã€‚")]),v._v(" "),t("h2",{attrs:{id:"_7-å‚è€ƒèµ„æ–™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-å‚è€ƒèµ„æ–™"}},[v._v("#")]),v._v(" 7. å‚è€ƒèµ„æ–™")]),v._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/itfly8/p/5155983.html",target:"_blank",rel:"noopener noreferrer"}},[v._v("å¤§å‹ç½‘ç«™æ¶æ„ç³»åˆ—ï¼šåˆ†å¸ƒå¼ MQï¼ˆä¸€ï¼‰"),t("OutboundLink")],1)]),v._v(" "),t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/itfly8/p/5156155.html",target:"_blank",rel:"noopener noreferrer"}},[v._v("å¤§å‹ç½‘ç«™æ¶æ„ç³»åˆ—ï¼šMQï¼ˆäºŒï¼‰"),t("OutboundLink")],1)]),v._v(" "),t("li",[t("a",{attrs:{href:"https://www.jianshu.com/p/453c6e7ff81c",target:"_blank",rel:"noopener noreferrer"}},[v._v("åˆ†å¸ƒå¼å¼€æ”¾ MQ(RocketMQ)çš„åŸç†ä¸å®è·µ"),t("OutboundLink")],1)]),v._v(" "),t("li",[t("a",{attrs:{href:"https://juejin.im/entry/5a0abfb5f265da43062a4a91",target:"_blank",rel:"noopener noreferrer"}},[v._v("é˜¿é‡Œ RocketMQ ä¼˜åŠ¿å¯¹æ¯”"),t("OutboundLink")],1)]),v._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/doocs/advanced-java/blob/master/docs/high-concurrency/mq-interview.md",target:"_blank",rel:"noopener noreferrer"}},[v._v("advanced-java ä¹‹ MQ"),t("OutboundLink")],1)]),v._v(" "),t("li",[t("a",{attrs:{href:"https://juejin.im/post/6844903635046924296",target:"_blank",rel:"noopener noreferrer"}},[v._v("æµ…è°ˆæ¶ˆæ¯é˜Ÿåˆ—åŠå¸¸è§çš„æ¶ˆæ¯ä¸­é—´ä»¶"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);_.default=a.exports}}]);