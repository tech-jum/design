<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DESIGN</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/design/favicon.ico">
    <meta name="description" content="DESIGN">
    
    <link rel="preload" href="/design/assets/css/0.styles.3c2ef156.css" as="style"><link rel="preload" href="/design/assets/js/app.31535b90.js" as="script"><link rel="preload" href="/design/assets/js/4.843d76c1.js" as="script"><link rel="preload" href="/design/assets/js/79.09f8c9ad.js" as="script"><link rel="preload" href="/design/assets/js/5.eb6f8f38.js" as="script"><link rel="prefetch" href="/design/assets/js/10.07f2584d.js"><link rel="prefetch" href="/design/assets/js/11.df166aa0.js"><link rel="prefetch" href="/design/assets/js/12.b7ade635.js"><link rel="prefetch" href="/design/assets/js/13.151414b4.js"><link rel="prefetch" href="/design/assets/js/14.5dd04c5d.js"><link rel="prefetch" href="/design/assets/js/15.14e9a635.js"><link rel="prefetch" href="/design/assets/js/16.8728dd67.js"><link rel="prefetch" href="/design/assets/js/17.1686b754.js"><link rel="prefetch" href="/design/assets/js/18.d815545e.js"><link rel="prefetch" href="/design/assets/js/19.d846ce2f.js"><link rel="prefetch" href="/design/assets/js/20.1dd8edb9.js"><link rel="prefetch" href="/design/assets/js/21.38ae8c29.js"><link rel="prefetch" href="/design/assets/js/22.26dcb0f5.js"><link rel="prefetch" href="/design/assets/js/23.d996c1df.js"><link rel="prefetch" href="/design/assets/js/24.84573b57.js"><link rel="prefetch" href="/design/assets/js/25.362291b4.js"><link rel="prefetch" href="/design/assets/js/26.287f6746.js"><link rel="prefetch" href="/design/assets/js/27.665cd644.js"><link rel="prefetch" href="/design/assets/js/28.2d373aaa.js"><link rel="prefetch" href="/design/assets/js/29.18195cfe.js"><link rel="prefetch" href="/design/assets/js/30.b8a39bf2.js"><link rel="prefetch" href="/design/assets/js/31.e6497a3e.js"><link rel="prefetch" href="/design/assets/js/32.7c78886f.js"><link rel="prefetch" href="/design/assets/js/33.3a07575c.js"><link rel="prefetch" href="/design/assets/js/34.53801173.js"><link rel="prefetch" href="/design/assets/js/35.fe943393.js"><link rel="prefetch" href="/design/assets/js/36.e9ecc031.js"><link rel="prefetch" href="/design/assets/js/37.48dcf161.js"><link rel="prefetch" href="/design/assets/js/38.bc65c12c.js"><link rel="prefetch" href="/design/assets/js/39.76a7947c.js"><link rel="prefetch" href="/design/assets/js/40.57c60fe7.js"><link rel="prefetch" href="/design/assets/js/41.64d1acff.js"><link rel="prefetch" href="/design/assets/js/42.2b13267e.js"><link rel="prefetch" href="/design/assets/js/43.bc12e4a9.js"><link rel="prefetch" href="/design/assets/js/44.05348389.js"><link rel="prefetch" href="/design/assets/js/45.a821f14b.js"><link rel="prefetch" href="/design/assets/js/46.4f6121ee.js"><link rel="prefetch" href="/design/assets/js/47.2331491d.js"><link rel="prefetch" href="/design/assets/js/48.e99e2990.js"><link rel="prefetch" href="/design/assets/js/49.97ac4425.js"><link rel="prefetch" href="/design/assets/js/50.9561222b.js"><link rel="prefetch" href="/design/assets/js/51.5a3682fc.js"><link rel="prefetch" href="/design/assets/js/52.41f6da09.js"><link rel="prefetch" href="/design/assets/js/53.f3cbdb44.js"><link rel="prefetch" href="/design/assets/js/54.b64ed791.js"><link rel="prefetch" href="/design/assets/js/55.0b2515c6.js"><link rel="prefetch" href="/design/assets/js/56.f87ff124.js"><link rel="prefetch" href="/design/assets/js/57.c351d3a3.js"><link rel="prefetch" href="/design/assets/js/58.68c1d0ee.js"><link rel="prefetch" href="/design/assets/js/59.8cc7450d.js"><link rel="prefetch" href="/design/assets/js/6.cbcf7f30.js"><link rel="prefetch" href="/design/assets/js/60.f2f8871f.js"><link rel="prefetch" href="/design/assets/js/61.8922cbcd.js"><link rel="prefetch" href="/design/assets/js/62.ccb7c5ee.js"><link rel="prefetch" href="/design/assets/js/63.8191a330.js"><link rel="prefetch" href="/design/assets/js/64.1d881bbb.js"><link rel="prefetch" href="/design/assets/js/65.f4089278.js"><link rel="prefetch" href="/design/assets/js/66.66cf1b40.js"><link rel="prefetch" href="/design/assets/js/67.27e2cf6f.js"><link rel="prefetch" href="/design/assets/js/68.6a688bec.js"><link rel="prefetch" href="/design/assets/js/69.f59b5cd7.js"><link rel="prefetch" href="/design/assets/js/7.159ffade.js"><link rel="prefetch" href="/design/assets/js/70.aa52fe1c.js"><link rel="prefetch" href="/design/assets/js/71.f7f17e5c.js"><link rel="prefetch" href="/design/assets/js/72.f0a76070.js"><link rel="prefetch" href="/design/assets/js/73.b454f9b3.js"><link rel="prefetch" href="/design/assets/js/74.748903ca.js"><link rel="prefetch" href="/design/assets/js/75.1abb30fc.js"><link rel="prefetch" href="/design/assets/js/76.38081e86.js"><link rel="prefetch" href="/design/assets/js/77.631fd31e.js"><link rel="prefetch" href="/design/assets/js/78.b642c4ea.js"><link rel="prefetch" href="/design/assets/js/8.bbc07c86.js"><link rel="prefetch" href="/design/assets/js/80.15162b19.js"><link rel="prefetch" href="/design/assets/js/81.0a02424d.js"><link rel="prefetch" href="/design/assets/js/82.0a6de1bd.js"><link rel="prefetch" href="/design/assets/js/83.8bd118c7.js"><link rel="prefetch" href="/design/assets/js/84.c9db97ea.js"><link rel="prefetch" href="/design/assets/js/85.ea23932a.js"><link rel="prefetch" href="/design/assets/js/86.a70e5ac7.js"><link rel="prefetch" href="/design/assets/js/9.c3d97cd4.js"><link rel="prefetch" href="/design/assets/js/vendors~flowchart.5fa23d41.js"><link rel="prefetch" href="/design/assets/js/vendors~notification.4b668bb8.js">
    <link rel="stylesheet" href="/design/assets/css/0.styles.3c2ef156.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/design/" class="home-link router-link-active"><img src="https://raw.githubusercontent.com/dunwu/images/dev/common/dunwu-logo-200.png" alt="DESIGN" class="logo"> <span class="site-name can-hide">DESIGN</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/design/architecture/" class="nav-link">
  цЮ╢цЮД
</a></div><div class="nav-item"><a href="/design/distributed/" class="nav-link">
  хИЖх╕Гх╝П
</a></div><div class="nav-item"><a href="/design/pattern/" class="nav-link">
  шо╛шобцибх╝П
</a></div><div class="nav-item"><a href="/design/refactor/" class="nav-link">
  щЗНцЮД
</a></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ЁЯОп хНЪхов
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/dunwu/design" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/design/architecture/" class="nav-link">
  цЮ╢цЮД
</a></div><div class="nav-item"><a href="/design/distributed/" class="nav-link">
  хИЖх╕Гх╝П
</a></div><div class="nav-item"><a href="/design/pattern/" class="nav-link">
  шо╛шобцибх╝П
</a></div><div class="nav-item"><a href="/design/refactor/" class="nav-link">
  щЗНцЮД
</a></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ЁЯОп хНЪхов
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/dunwu/design" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#хжВф╜Хф╗Оц╡╖щЗПчЪД-url-ф╕нцЙ╛хЗ║чЫ╕хРМчЪД-url" class="sidebar-link">хжВф╜Хф╗Оц╡╖щЗПчЪД URL ф╕нцЙ╛хЗ║чЫ╕хРМчЪД URLя╝Я</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#щЧощвШцППш┐░" class="sidebar-link">щЧощвШцППш┐░</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#шзгхЖ│цАЭш╖п" class="sidebar-link">шзгхЖ│цАЭш╖п</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#цЦ╣цбИцА╗ч╗У" class="sidebar-link">цЦ╣цбИцА╗ч╗У</a></li></ul></li><li><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#хжВф╜Хф╗Оц╡╖щЗПцХ░цНоф╕нцЙ╛хЗ║щлШщвСшпН" class="sidebar-link">хжВф╜Хф╗Оц╡╖щЗПцХ░цНоф╕нцЙ╛хЗ║щлШщвСшпНя╝Я</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#щЧощвШцППш┐░-2" class="sidebar-link">щЧощвШцППш┐░</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#шзгхЖ│цАЭш╖п-2" class="sidebar-link">шзгхЖ│цАЭш╖п</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#цЦ╣цбИцА╗ч╗У-2" class="sidebar-link">цЦ╣цбИцА╗ч╗У</a></li></ul></li><li><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#хжВф╜ХцЙ╛хЗ║цЯРф╕Ахдйшо┐щЧочЩ╛х║жч╜СчлЩцЬАхдЪчЪД-ip" class="sidebar-link">хжВф╜ХцЙ╛хЗ║цЯРф╕Ахдйшо┐щЧочЩ╛х║жч╜СчлЩцЬАхдЪчЪД IPя╝Я</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#щЧощвШцППш┐░-3" class="sidebar-link">щЧощвШцППш┐░</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#шзгхЖ│цАЭш╖п-3" class="sidebar-link">шзгхЖ│цАЭш╖п</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#цЦ╣ц│ХцА╗ч╗У" class="sidebar-link">цЦ╣ц│ХцА╗ч╗У</a></li></ul></li><li><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#хжВф╜ХхЬихдзщЗПчЪДцХ░цНоф╕нцЙ╛хЗ║ф╕НщЗНхдНчЪДцХ┤цХ░" class="sidebar-link">хжВф╜ХхЬихдзщЗПчЪДцХ░цНоф╕нцЙ╛хЗ║ф╕НщЗНхдНчЪДцХ┤цХ░я╝Я</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#щЧощвШцППш┐░-4" class="sidebar-link">щЧощвШцППш┐░</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#шзгхЖ│цАЭш╖п-4" class="sidebar-link">шзгхЖ│цАЭш╖п</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#цЦ╣ц│ХцА╗ч╗У-2" class="sidebar-link">цЦ╣ц│ХцА╗ч╗У</a></li></ul></li><li><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#хжВф╜ХхЬихдзщЗПчЪДцХ░цНоф╕нхИдцЦнф╕Аф╕кцХ░цШпхРжхнШхЬи" class="sidebar-link">хжВф╜ХхЬихдзщЗПчЪДцХ░цНоф╕нхИдцЦнф╕Аф╕кцХ░цШпхРжхнШхЬия╝Я</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#щвШчЫоцППш┐░" class="sidebar-link">щвШчЫоцППш┐░</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#шзгчнФцАЭш╖п" class="sidebar-link">шзгчнФцАЭш╖п</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#цЦ╣ц│ХцА╗ч╗У-3" class="sidebar-link">цЦ╣ц│ХцА╗ч╗У</a></li></ul></li><li><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#хжВф╜ХцЯешпвцЬАчГнщЧичЪДцЯешпвф╕▓" class="sidebar-link">хжВф╜ХцЯешпвцЬАчГнщЧичЪДцЯешпвф╕▓я╝Я</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#щвШчЫоцППш┐░-2" class="sidebar-link">щвШчЫоцППш┐░</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#шзгчнФцАЭш╖п-2" class="sidebar-link">шзгчнФцАЭш╖п</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#цЦ╣ц│ХцА╗ч╗У-4" class="sidebar-link">цЦ╣ц│ХцА╗ч╗У</a></li></ul></li><li><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#хжВф╜Хч╗Яшобф╕НхРМчФ╡шпЭхП╖чаБчЪДф╕кцХ░" class="sidebar-link">хжВф╜Хч╗Яшобф╕НхРМчФ╡шпЭхП╖чаБчЪДф╕кцХ░я╝Я</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#щвШчЫоцППш┐░-3" class="sidebar-link">щвШчЫоцППш┐░</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#шзгчнФцАЭш╖п-3" class="sidebar-link">шзгчнФцАЭш╖п</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#цЦ╣ц│ХцА╗ч╗У-5" class="sidebar-link">цЦ╣ц│ХцА╗ч╗У</a></li></ul></li><li><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#хжВф╜Хф╗О-5-ф║┐ф╕кцХ░ф╕нцЙ╛хЗ║ф╕нф╜НцХ░" class="sidebar-link">хжВф╜Хф╗О 5 ф║┐ф╕кцХ░ф╕нцЙ╛хЗ║ф╕нф╜НцХ░я╝Я</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#щвШчЫоцППш┐░-4" class="sidebar-link">щвШчЫоцППш┐░</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#шзгчнФцАЭш╖п-4" class="sidebar-link">шзгчнФцАЭш╖п</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#цЦ╣ц│ХцА╗ч╗У-6" class="sidebar-link">цЦ╣ц│ХцА╗ч╗У</a></li></ul></li><li><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#хжВф╜ХцЙ╛хЗ║цОТхРНхЙН-500-чЪДцХ░" class="sidebar-link">хжВф╜ХцЙ╛хЗ║цОТхРНхЙН 500 чЪДцХ░я╝Я</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#щвШчЫоцППш┐░-5" class="sidebar-link">щвШчЫоцППш┐░</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#шзгчнФцАЭш╖п-5" class="sidebar-link">шзгчнФцАЭш╖п</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#цЦ╣ц│ХцА╗ч╗У-7" class="sidebar-link">цЦ╣ц│ХцА╗ч╗У</a></li></ul></li><li><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#хжВф╜ХцМЙчЕз-query-чЪДщвСх║жцОТх║П" class="sidebar-link">хжВф╜ХцМЙчЕз query чЪДщвСх║жцОТх║Пя╝Я</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#щвШчЫоцППш┐░-6" class="sidebar-link">щвШчЫоцППш┐░</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#шзгчнФцАЭш╖п-6" class="sidebar-link">шзгчнФцАЭш╖п</a></li><li class="sidebar-sub-header"><a href="/design/solutions/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html#цЦ╣ц│ХцА╗ч╗У-8" class="sidebar-link">цЦ╣ц│ХцА╗ч╗У</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>ц╡╖щЗПцХ░цНохдДчРЖ</p> <h2 id="хжВф╜Хф╗Оц╡╖щЗПчЪД-url-ф╕нцЙ╛хЗ║чЫ╕хРМчЪД-url"><a href="#хжВф╜Хф╗Оц╡╖щЗПчЪД-url-ф╕нцЙ╛хЗ║чЫ╕хРМчЪД-url" class="header-anchor">#</a> хжВф╜Хф╗Оц╡╖щЗПчЪД URL ф╕нцЙ╛хЗ║чЫ╕хРМчЪД URLя╝Я</h2> <h3 id="щЧощвШцППш┐░"><a href="#щЧощвШцППш┐░" class="header-anchor">#</a> щЧощвШцППш┐░</h3> <p>ч╗ЩхоЪ aуАБb ф╕дф╕кцЦЗф╗╢я╝МхРДхнШцФ╛ 50 ф║┐ф╕к URLя╝МцпПф╕к URL хРДхНа 64Bя╝МхЖЕхнШщЩРхИ╢цШп 4GуАВшп╖цЙ╛хЗ║ aуАБb ф╕дф╕кцЦЗф╗╢хЕ▒хРМчЪД URLуАВ</p> <h3 id="шзгхЖ│цАЭш╖п"><a href="#шзгхЖ│цАЭш╖п" class="header-anchor">#</a> шзгхЖ│цАЭш╖п</h3> <p>цпПф╕к URL хНа 64Bя╝МщВгф╣И 50 ф║┐ф╕к URL хНачФичЪДчй║щЧ┤хдзх░Пч║жф╕║ 320GBуАВ</p> <blockquote><p>$$5,000,000,000 * 64 B тЙИ 5 GB * 64 = 320 GB$$</p></blockquote> <p>чФ▒ф║ОхЖЕхнШхдзх░ПхПкцЬЙ 4Gя╝МхЫацндя╝МцИСф╗мф╕НхПпшГ╜ф╕АцмбцАзцККцЙАцЬЙ URL хКаш╜╜хИ░хЖЕхнШф╕нхдДчРЖуАВхп╣ф║Ош┐ЩчзНч▒╗хЮЛчЪДщвШчЫоя╝Мф╕АшИмщЗЗчФи<strong>хИЖц▓╗чнЦчХе</strong>я╝МхН│я╝ЪцККф╕Аф╕кцЦЗф╗╢ф╕нчЪД URL цМЙчЕзцЯРф╕кчЙ╣х╛БхИТхИЖф╕║хдЪф╕кх░ПцЦЗф╗╢я╝Мф╜┐х╛ЧцпПф╕кх░ПцЦЗф╗╢хдзх░Пф╕Нш╢Еш┐З 4Gя╝Мш┐Щца╖х░▒хПпф╗ецККш┐Щф╕кх░ПцЦЗф╗╢шп╗хИ░хЖЕхнШф╕нш┐ЫшбМхдДчРЖф║ЖуАВ</p> <p>цАЭш╖пхжВф╕Ля╝Ъ</p> <p>щжЦхЕИщБНхОЖцЦЗф╗╢ aя╝Мхп╣щБНхОЖхИ░чЪД URL ц▒В <code>hash(URL) % 1000</code>я╝Мца╣цНошобчоЧч╗УцЮЬцККщБНхОЖхИ░чЪД URL хнШхВихИ░ a0, a1, a2, ..., a999я╝Мш┐Щца╖цпПф╕кхдзх░Пч║жф╕║ 300MBуАВф╜┐чФихРМца╖чЪДцЦ╣ц│ХщБНхОЖцЦЗф╗╢ bя╝МцККцЦЗф╗╢ b ф╕нчЪД URL хИЖхИлхнШхВихИ░цЦЗф╗╢ b0, b1, b2, ..., b999 ф╕нуАВш┐Щца╖хдДчРЖш┐ЗхРОя╝МцЙАцЬЙхПпшГ╜чЫ╕хРМчЪД URL щГ╜хЬихп╣х║ФчЪДх░ПцЦЗф╗╢ф╕ня╝МхН│ a0 хп╣х║Ф b0, ..., a999 хп╣х║Ф b999я╝Мф╕Нхп╣х║ФчЪДх░ПцЦЗф╗╢ф╕НхПпшГ╜цЬЙчЫ╕хРМчЪД URLуАВщВгф╣ИцОеф╕ЛцЭея╝МцИСф╗мхПкщЬАшжБц▒ВхЗ║ш┐Щ 1000 хп╣х░ПцЦЗф╗╢ф╕нчЫ╕хРМчЪД URL х░▒хе╜ф║ЖуАВ</p> <p>цОечЭАщБНхОЖ ai( <code>iтИИ[0,999]</code>)я╝МцКК URL хнШхВихИ░ф╕Аф╕к HashSet щЫЖхРИф╕нуАВчД╢хРОщБНхОЖ bi ф╕нцпПф╕к URLя╝МчЬЛхЬи HashSet щЫЖхРИф╕нцШпхРжхнШхЬия╝МшЛехнШхЬия╝Мшп┤цШОш┐Щх░▒цШпхЕ▒хРМчЪД URLя╝МхПпф╗ецККш┐Щф╕к URL ф┐ЭхнШхИ░ф╕Аф╕кхНХчЛмчЪДцЦЗф╗╢ф╕нуАВ</p> <h3 id="цЦ╣цбИцА╗ч╗У"><a href="#цЦ╣цбИцА╗ч╗У" class="header-anchor">#</a> цЦ╣цбИцА╗ч╗У</h3> <ul><li>хИЖшАМц▓╗ф╣Ля╝Мш┐ЫшбМхУИх╕МхПЦф╜Щя╝Ы</li> <li>хп╣цпПф╕кхнРцЦЗф╗╢ш┐ЫшбМ HashSet ч╗ЯшобуАВ</li></ul> <h2 id="хжВф╜Хф╗Оц╡╖щЗПцХ░цНоф╕нцЙ╛хЗ║щлШщвСшпН"><a href="#хжВф╜Хф╗Оц╡╖щЗПцХ░цНоф╕нцЙ╛хЗ║щлШщвСшпН" class="header-anchor">#</a> хжВф╜Хф╗Оц╡╖щЗПцХ░цНоф╕нцЙ╛хЗ║щлШщвСшпНя╝Я</h2> <h3 id="щЧощвШцППш┐░-2"><a href="#щЧощвШцППш┐░-2" class="header-anchor">#</a> щЧощвШцППш┐░</h3> <p>цЬЙф╕Аф╕к 1GB хдзх░ПчЪДцЦЗф╗╢я╝МцЦЗф╗╢щЗМцпПф╕АшбМцШпф╕Аф╕кшпНя╝МцпПф╕кшпНчЪДхдзх░Пф╕Нш╢Еш┐З 16Bя╝МхЖЕхнШхдзх░ПщЩРхИ╢цШп 1MBя╝МшжБц▒Вш┐ФхЫЮщвСцХ░цЬАщлШчЪД 100 ф╕кшпН(Top 100)уАВ</p> <h3 id="шзгхЖ│цАЭш╖п-2"><a href="#шзгхЖ│цАЭш╖п-2" class="header-anchor">#</a> шзгхЖ│цАЭш╖п</h3> <p>чФ▒ф║ОхЖЕхнШщЩРхИ╢я╝МцЧац│ХчЫ┤цОех░ЖхдзцЦЗф╗╢чЪДцЙАцЬЙшпНф╕Ацмбшп╗хИ░хЖЕхнШф╕нуАВхЫацндя╝МхПпф╗ещЗЗчФи<strong>хИЖц▓╗чнЦчХе</strong>я╝МцККф╕Аф╕кхдзцЦЗф╗╢хИЖшзгцИРхдЪф╕кх░ПцЦЗф╗╢я╝Мф┐ЭшпБцпПф╕кцЦЗф╗╢чЪДхдзх░Пх░Пф║О 1MBя╝Мш┐ЫшАМчЫ┤цОех░ЖхНХф╕кх░ПцЦЗф╗╢шп╗хПЦхИ░хЖЕхнШф╕нш┐ЫшбМхдДчРЖуАВ</p> <p><strong>цАЭш╖пхжВф╕Л</strong>я╝Ъ</p> <p>щжЦхЕИщБНхОЖхдзцЦЗф╗╢я╝Мхп╣щБНхОЖхИ░чЪДцпПф╕кшпН xя╝МцЙзшбМ <code>hash(x) % 5000</code>я╝Мх░Жч╗УцЮЬф╕║ i чЪДшпНхнШцФ╛хИ░цЦЗф╗╢ Ai ф╕нуАВщБНхОЖч╗УцЭЯхРОя╝МцИСф╗мхПпф╗ех╛ЧхИ░ 5000 ф╕кх░ПцЦЗф╗╢уАВцпПф╕кх░ПцЦЗф╗╢чЪДхдзх░Пф╕║ 200KB х╖жхП│уАВхжВцЮЬцЬЙчЪДх░ПцЦЗф╗╢хдзх░Пф╗НчД╢ш╢Еш┐З 1MBя╝МхИЩщЗЗчФихРМца╖чЪДцЦ╣х╝Пч╗зч╗нш┐ЫшбМхИЖшзгуАВ</p> <p>цОечЭАч╗ЯшобцпПф╕кх░ПцЦЗф╗╢ф╕нхЗ║чО░щвСцХ░цЬАщлШчЪД 100 ф╕кшпНуАВцЬАчоАхНХчЪДцЦ╣х╝ПцШпф╜┐чФи <code>HashMap</code> цЭехоЮчО░уАВхЕ╢ф╕н key ф╕║шпНя╝Мvalue ф╕║шпешпНхЗ║чО░чЪДщвСчОЗуАВхЕ╖ф╜УцЦ╣ц│ХцШпя╝Ъхп╣ф║ОщБНхОЖхИ░чЪДшпН xя╝МхжВцЮЬхЬи map ф╕нф╕НхнШхЬия╝МхИЩцЙзшбМ <code>map.put(x, 1)</code> шЛехнШхЬия╝МхИЩцЙзшбМ <code>map.put(x, map.get(x)+1)</code>я╝Мх░ЖшпешпНщвСцХ░хКа 1уАВ</p> <p>ф╕КщЭвцИСф╗мч╗Яшобф║ЖцпПф╕кх░ПцЦЗф╗╢хНХшпНхЗ║чО░чЪДщвСцХ░уАВцОеф╕ЛцЭея╝МцИСф╗мхПпф╗ещАЪш┐Зч╗┤цКдф╕Аф╕к<strong>х░Пщб╢хаЖ</strong>цЭецЙ╛хЗ║цЙАцЬЙшпНф╕нхЗ║чО░щвСцХ░цЬАщлШчЪД 100 ф╕куАВхЕ╖ф╜УцЦ╣ц│ХцШпя╝Ъф╛ЭцмбщБНхОЖцпПф╕кх░ПцЦЗф╗╢я╝МцЮДх╗║ф╕Аф╕к<strong>х░Пщб╢хаЖ</strong>я╝МхаЖхдзх░Пф╕║ 100уАВхжВцЮЬщБНхОЖхИ░чЪДшпНчЪДхЗ║чО░цмбцХ░хдзф║ОхаЖщб╢шпНчЪДхЗ║чО░цмбцХ░я╝МхИЩчФицЦ░шпНцЫ┐цНвхаЖщб╢чЪДшпНя╝МчД╢хРОщЗНцЦ░ш░ГцХ┤ф╕║<strong>х░Пщб╢хаЖ</strong>я╝МщБНхОЖч╗УцЭЯхРОя╝Мх░Пщб╢хаЖф╕КчЪДшпНх░▒цШпхЗ║чО░щвСцХ░цЬАщлШчЪД 100 ф╕кшпНуАВ</p> <h3 id="цЦ╣цбИцА╗ч╗У-2"><a href="#цЦ╣цбИцА╗ч╗У-2" class="header-anchor">#</a> цЦ╣цбИцА╗ч╗У</h3> <ul><li>хИЖшАМц▓╗ф╣Ля╝Мш┐ЫшбМхУИх╕МхПЦф╜Щя╝Ы</li> <li>ф╜┐чФи <code>HashMap</code> ч╗ЯшобщвСцХ░я╝Ы</li> <li>ц▒Вшзг<strong>цЬАхдз</strong>чЪД TopN ф╕кя╝МчФи<strong>х░Пщб╢хаЖ</strong>я╝Ыц▒Вшзг<strong>цЬАх░П</strong>чЪД TopN ф╕кя╝МчФи<strong>хдзщб╢хаЖ</strong>уАВ</li></ul> <h2 id="хжВф╜ХцЙ╛хЗ║цЯРф╕Ахдйшо┐щЧочЩ╛х║жч╜СчлЩцЬАхдЪчЪД-ip"><a href="#хжВф╜ХцЙ╛хЗ║цЯРф╕Ахдйшо┐щЧочЩ╛х║жч╜СчлЩцЬАхдЪчЪД-ip" class="header-anchor">#</a> хжВф╜ХцЙ╛хЗ║цЯРф╕Ахдйшо┐щЧочЩ╛х║жч╜СчлЩцЬАхдЪчЪД IPя╝Я</h2> <h3 id="щЧощвШцППш┐░-3"><a href="#щЧощвШцППш┐░-3" class="header-anchor">#</a> щЧощвШцППш┐░</h3> <p>чО░цЬЙц╡╖щЗПцЧех┐ЧцХ░цНоф┐ЭхнШхЬиф╕Аф╕кш╢ЕхдзцЦЗф╗╢ф╕ня╝МшпецЦЗф╗╢цЧац│ХчЫ┤цОешп╗хЕехЖЕхнШя╝МшжБц▒Вф╗Оф╕нцПРхПЦцЯРхдйшо┐щЧочЩ╛х║жцмбцХ░цЬАхдЪчЪДщВгф╕к IPуАВ</p> <h3 id="шзгхЖ│цАЭш╖п-3"><a href="#шзгхЖ│цАЭш╖п-3" class="header-anchor">#</a> шзгхЖ│цАЭш╖п</h3> <p>ш┐ЩщБУщвШхПкхЕ│х┐ГцЯРф╕Ахдйшо┐щЧочЩ╛х║жцЬАхдЪчЪД IPя╝МхЫацндя╝МхПпф╗ещжЦхЕИхп╣цЦЗф╗╢ш┐ЫшбМф╕АцмбщБНхОЖя╝МцККш┐Щф╕Ахдйшо┐щЧочЩ╛х║ж IP чЪДчЫ╕хЕ│ф┐бцБпшо░х╜ХхИ░ф╕Аф╕кхНХчЛмчЪДхдзцЦЗф╗╢ф╕нуАВцОеф╕ЛцЭещЗЗчФичЪДцЦ╣ц│Хф╕Оф╕Кф╕АщвШф╕Аца╖я╝МхдзшЗ┤х░▒цШпхЕИхп╣ IP ш┐ЫшбМхУИх╕МцШах░Дя╝МцОечЭАф╜┐чФи HashMap ч╗ЯшобщЗНхдН IP чЪДцмбцХ░я╝МцЬАхРОшобчоЧхЗ║щЗНхдНцмбцХ░цЬАхдЪчЪД IPуАВ</p> <blockquote><p>ц│ия╝Ъш┐ЩщЗМхПкщЬАшжБцЙ╛хЗ║хЗ║чО░цмбцХ░цЬАхдЪчЪД IPя╝МхПпф╗еф╕Нх┐Еф╜┐чФихаЖя╝МчЫ┤цОечФиф╕Аф╕кхПШщЗП max хН│хПпуАВ</p></blockquote> <h3 id="цЦ╣ц│ХцА╗ч╗У"><a href="#цЦ╣ц│ХцА╗ч╗У" class="header-anchor">#</a> цЦ╣ц│ХцА╗ч╗У</h3> <ul><li>хИЖшАМц▓╗ф╣Ля╝Мш┐ЫшбМхУИх╕МхПЦф╜Щя╝Ы</li> <li>ф╜┐чФи HashMap ч╗ЯшобщвСцХ░я╝Ы</li> <li>ц▒Вшзг<strong>цЬАхдз</strong>чЪД TopN ф╕кя╝МчФи<strong>х░Пщб╢хаЖ</strong>я╝Ыц▒Вшзг<strong>цЬАх░П</strong>чЪД TopN ф╕кя╝МчФи<strong>хдзщб╢хаЖ</strong>уАВ</li></ul> <h2 id="хжВф╜ХхЬихдзщЗПчЪДцХ░цНоф╕нцЙ╛хЗ║ф╕НщЗНхдНчЪДцХ┤цХ░"><a href="#хжВф╜ХхЬихдзщЗПчЪДцХ░цНоф╕нцЙ╛хЗ║ф╕НщЗНхдНчЪДцХ┤цХ░" class="header-anchor">#</a> хжВф╜ХхЬихдзщЗПчЪДцХ░цНоф╕нцЙ╛хЗ║ф╕НщЗНхдНчЪДцХ┤цХ░я╝Я</h2> <h3 id="щЧощвШцППш┐░-4"><a href="#щЧощвШцППш┐░-4" class="header-anchor">#</a> щЧощвШцППш┐░</h3> <p>хЬи 2.5 ф║┐ф╕кцХ┤цХ░ф╕нцЙ╛хЗ║ф╕НщЗНхдНчЪДцХ┤цХ░уАВц│ицДПя╝ЪхЖЕхнШф╕Нш╢│ф╗ехо╣ч║│ш┐Щ 2.5 ф║┐ф╕кцХ┤цХ░уАВ</p> <h3 id="шзгхЖ│цАЭш╖п-4"><a href="#шзгхЖ│цАЭш╖п-4" class="header-anchor">#</a> шзгхЖ│цАЭш╖п</h3> <h4 id="цЦ╣ц│Хф╕А-хИЖц▓╗ц│Х"><a href="#цЦ╣ц│Хф╕А-хИЖц▓╗ц│Х" class="header-anchor">#</a> цЦ╣ц│Хф╕Ая╝ЪхИЖц▓╗ц│Х</h4> <p>ф╕ОхЙНщЭвчЪДщвШчЫоцЦ╣ц│Хч▒╗ф╝╝я╝МхЕИх░Ж 2.5 ф║┐ф╕кцХ░хИТхИЖхИ░хдЪф╕кх░ПцЦЗф╗╢я╝МчФи HashSet/HashMap цЙ╛хЗ║цпПф╕кх░ПцЦЗф╗╢ф╕нф╕НщЗНхдНчЪДцХ┤цХ░я╝МхЖНхРИх╣╢цпПф╕кхнРч╗УцЮЬя╝МхН│ф╕║цЬАч╗Ич╗УцЮЬуАВ</p> <h4 id="цЦ╣ц│Хф║М-ф╜НхЫ╛ц│Х"><a href="#цЦ╣ц│Хф║М-ф╜НхЫ╛ц│Х" class="header-anchor">#</a> цЦ╣ц│Хф║Мя╝Ъф╜НхЫ╛ц│Х</h4> <p><strong>ф╜НхЫ╛</strong>я╝Мх░▒цШпчФиф╕Аф╕кцИЦхдЪф╕к bit цЭецаЗшо░цЯРф╕кхЕГч┤ахп╣х║ФчЪДхА╝я╝МшАМщФох░▒цШпшпехЕГч┤ауАВщЗЗчФиф╜Нф╜Ьф╕║хНХф╜НцЭехнШхВицХ░цНоя╝МхПпф╗ехдзхдзшКВчЬБхнШхВичй║щЧ┤уАВ</p> <p>ф╜НхЫ╛щАЪш┐Зф╜┐чФиф╜НцХ░ч╗ДцЭешбичд║цЯРф║ЫхЕГч┤ацШпхРжхнШхЬиуАВхоГхПпф╗ечФиф║Ох┐лщАЯцЯецЙ╛я╝МхИдщЗНя╝МцОТх║ПчнЙуАВф╕НцШпх╛Иц╕ЕцеЪя╝ЯцИСхЕИф╕╛ф╕кх░Пф╛ЛхнРуАВ</p> <p>хБЗшо╛цИСф╗мшжБхп╣ <code>[0,7]</code> ф╕нчЪД 5 ф╕кхЕГч┤а (6, 4, 2, 1, 5) ш┐ЫшбМцОТх║Пя╝МхПпф╗ещЗЗчФиф╜НхЫ╛ц│ХуАВ0~7 шМГхЫ┤цА╗хЕ▒цЬЙ 8 ф╕кцХ░я╝МхПкщЬАшжБ 8bitя╝МхН│ 1 ф╕кхнЧшКВуАВщжЦхЕИх░ЖцпПф╕кф╜НщГ╜ч╜о 0я╝Ъ</p> <div class="language- extra-class"><pre class="language-text"><code>0 0 0 0 0 0 0 0
</code></pre></div><p>чД╢хРОщБНхОЖ 5 ф╕кхЕГч┤ая╝МщжЦхЕИщБЗхИ░ 6я╝МщВгф╣Их░Жф╕ЛцаЗф╕║ 6 чЪДф╜НчЪД 0 ч╜оф╕║ 1я╝ЫцОечЭАщБЗхИ░ 4я╝МцККф╕ЛцаЗф╕║ 4 чЪДф╜Н чЪД 0 ч╜оф╕║ 1я╝Ъ</p> <div class="language- extra-class"><pre class="language-text"><code>0 0 0 0 1 0 1 0
</code></pre></div><p>ф╛ЭцмбщБНхОЖя╝Мч╗УцЭЯхРОя╝Мф╜НцХ░ч╗ДцШпш┐Щца╖чЪДя╝Ъ</p> <div class="language- extra-class"><pre class="language-text"><code>0 1 1 0 1 1 1 0
</code></pre></div><p>цпПф╕кф╕║ 1 чЪДф╜Ня╝МхоГчЪДф╕ЛцаЗщГ╜шбичд║ф║Жф╕Аф╕кцХ░я╝Ъ</p> <div class="language- extra-class"><pre class="language-text"><code>for i in range(8):
    if bits[i] == 1:
        print(i)
</code></pre></div><p>ш┐Щца╖цИСф╗мхЕ╢хоЮх░▒х╖▓ч╗ПхоЮчО░ф║ЖцОТх║ПуАВ</p> <p>хп╣ф║ОцХ┤цХ░чЫ╕хЕ│чЪДчоЧц│ХчЪДц▒Вшзгя╝М<strong>ф╜НхЫ╛ц│Х</strong>цШпф╕АчзНщЭЮх╕╕хоЮчФичЪДчоЧц│ХуАВхБЗшо╛ int цХ┤цХ░хНачФи 4Bя╝МхН│ 32bitя╝МщВгф╣ИцИСф╗мхПпф╗ешбичд║чЪДцХ┤цХ░чЪДф╕кцХ░ф╕║ 232уАВ</p> <p><strong>щВгф╣Ихп╣ф║Ош┐ЩщБУщвШ</strong>я╝МцИСф╗мчФи 2 ф╕к bit цЭешбичд║хРДф╕кцХ░хнЧчЪДчК╢цАБя╝Ъ</p> <ul><li>00 шбичд║ш┐Щф╕кцХ░хнЧц▓бхЗ║чО░ш┐Зя╝Ы</li> <li>01 шбичд║ш┐Щф╕кцХ░хнЧхЗ║чО░ш┐Зф╕Ацмбя╝ИхН│ф╕║щвШчЫоцЙАцЙ╛чЪДф╕НщЗНхдНцХ┤цХ░я╝Йя╝Ы</li> <li>10 шбичд║ш┐Щф╕кцХ░хнЧхЗ║чО░ф║ЖхдЪцмбуАВ</li></ul> <p>щВгф╣Иш┐Щ 232 ф╕кцХ┤цХ░я╝МцА╗хЕ▒цЙАщЬАхЖЕхнШф╕║ 232*2b=1GBуАВхЫацндя╝Мх╜УхПпчФихЖЕхнШш╢Еш┐З 1GB цЧ╢я╝МхПпф╗ещЗЗчФиф╜НхЫ╛ц│ХуАВхБЗшо╛хЖЕхнШц╗бш╢│ф╜НхЫ╛ц│ХщЬАц▒Вя╝Мш┐ЫшбМф╕ЛщЭвчЪДцУНф╜Ья╝Ъ</p> <p>щБНхОЖ 2.5 ф║┐ф╕кцХ┤цХ░я╝МцЯечЬЛф╜НхЫ╛ф╕нхп╣х║ФчЪДф╜Ня╝МхжВцЮЬцШп 00я╝МхИЩхПШф╕║ 01я╝МхжВцЮЬцШп 01 хИЩхПШф╕║ 10я╝МхжВцЮЬцШп 10 хИЩф┐ЭцМБф╕НхПШуАВщБНхОЖч╗УцЭЯхРОя╝МцЯечЬЛф╜НхЫ╛я╝МцККхп╣х║Фф╜НцШп 01 чЪДцХ┤цХ░ш╛УхЗ║хН│хПпуАВ</p> <h3 id="цЦ╣ц│ХцА╗ч╗У-2"><a href="#цЦ╣ц│ХцА╗ч╗У-2" class="header-anchor">#</a> цЦ╣ц│ХцА╗ч╗У</h3> <p><strong>хИдцЦнцХ░хнЧцШпхРжщЗНхдНчЪДщЧощвШ</strong>я╝Мф╜НхЫ╛ц│ХцШпф╕АчзНщЭЮх╕╕щлШцХИчЪДцЦ╣ц│ХуАВ</p> <h2 id="хжВф╜ХхЬихдзщЗПчЪДцХ░цНоф╕нхИдцЦнф╕Аф╕кцХ░цШпхРжхнШхЬи"><a href="#хжВф╜ХхЬихдзщЗПчЪДцХ░цНоф╕нхИдцЦнф╕Аф╕кцХ░цШпхРжхнШхЬи" class="header-anchor">#</a> хжВф╜ХхЬихдзщЗПчЪДцХ░цНоф╕нхИдцЦнф╕Аф╕кцХ░цШпхРжхнШхЬия╝Я</h2> <h3 id="щвШчЫоцППш┐░"><a href="#щвШчЫоцППш┐░" class="header-anchor">#</a> щвШчЫоцППш┐░</h3> <p>ч╗ЩхоЪ 40 ф║┐ф╕кф╕НщЗНхдНчЪДц▓бцОТш┐Зх║ПчЪД unsigned int хЮЛцХ┤цХ░я╝МчД╢хРОхЖНч╗ЩхоЪф╕Аф╕кцХ░я╝МхжВф╜Хх┐лщАЯхИдцЦнш┐Щф╕кцХ░цШпхРжхЬиш┐Щ 40 ф║┐ф╕кцХ┤цХ░х╜Уф╕ня╝Я</p> <h3 id="шзгчнФцАЭш╖п"><a href="#шзгчнФцАЭш╖п" class="header-anchor">#</a> шзгчнФцАЭш╖п</h3> <h4 id="цЦ╣ц│Хф╕А-хИЖц▓╗ц│Х-2"><a href="#цЦ╣ц│Хф╕А-хИЖц▓╗ц│Х-2" class="header-anchor">#</a> цЦ╣ц│Хф╕Ая╝ЪхИЖц▓╗ц│Х</h4> <p>ф╛ЭчД╢хПпф╗ечФихИЖц▓╗ц│ХшзгхЖ│я╝МцЦ╣ц│Хф╕ОхЙНщЭвч▒╗ф╝╝я╝Мх░▒ф╕НхЖНцмбш╡Шш┐░ф║ЖуАВ</p> <h4 id="цЦ╣ц│Хф║М-ф╜НхЫ╛ц│Х-2"><a href="#цЦ╣ц│Хф║М-ф╜НхЫ╛ц│Х-2" class="header-anchor">#</a> цЦ╣ц│Хф║Мя╝Ъф╜НхЫ╛ц│Х</h4> <p>40 ф║┐ф╕кф╕НщЗНхдНцХ┤цХ░я╝МцИСф╗мчФи 40 ф║┐ф╕к bit цЭешбичд║я╝МхИЭхзЛф╜НхЭЗф╕║ 0я╝МщВгф╣ИцА╗хЕ▒щЬАшжБхЖЕхнШя╝Ъ4,000,000,000bтЙИ512MуАВ</p> <p>цИСф╗мшп╗хПЦш┐Щ 40 ф║┐ф╕кцХ┤цХ░я╝Мх░Жхп╣х║ФчЪД bit шо╛ч╜оф╕║ 1уАВцОечЭАшп╗хПЦшжБцЯешпвчЪДцХ░я╝МцЯечЬЛчЫ╕х║Фф╜НцШпхРжф╕║ 1я╝МхжВцЮЬф╕║ 1 шбичд║хнШхЬия╝МхжВцЮЬф╕║ 0 шбичд║ф╕НхнШхЬиуАВ</p> <h3 id="цЦ╣ц│ХцА╗ч╗У-3"><a href="#цЦ╣ц│ХцА╗ч╗У-3" class="header-anchor">#</a> цЦ╣ц│ХцА╗ч╗У</h3> <p><strong>хИдцЦнцХ░хнЧцШпхРжхнШхЬиуАБхИдцЦнцХ░хнЧцШпхРжщЗНхдНчЪДщЧощвШ</strong>я╝Мф╜НхЫ╛ц│ХцШпф╕АчзНщЭЮх╕╕щлШцХИчЪДцЦ╣ц│ХуАВ</p> <h2 id="хжВф╜ХцЯешпвцЬАчГнщЧичЪДцЯешпвф╕▓"><a href="#хжВф╜ХцЯешпвцЬАчГнщЧичЪДцЯешпвф╕▓" class="header-anchor">#</a> хжВф╜ХцЯешпвцЬАчГнщЧичЪДцЯешпвф╕▓я╝Я</h2> <h3 id="щвШчЫоцППш┐░-2"><a href="#щвШчЫоцППш┐░-2" class="header-anchor">#</a> щвШчЫоцППш┐░</h3> <p>цРЬч┤вх╝ХцУОф╝ЪщАЪш┐ЗцЧех┐ЧцЦЗф╗╢цККчФицИ╖цпПцмбцгАч┤вф╜┐чФичЪДцЙАцЬЙцЯешпвф╕▓щГ╜шо░х╜Хф╕ЛцЭея╝МцпПф╕кцЯешпвф╕▓чЪДщХ┐х║жф╕Нш╢Еш┐З 255 хнЧшКВуАВ</p> <p>хБЗшо╛чЫохЙНцЬЙ 1000w ф╕кшо░х╜Хя╝Иш┐Щф║ЫцЯешпвф╕▓чЪДщЗНхдНх║жцпФш╛ГщлШя╝МшЩ╜чД╢цА╗цХ░цШп 1000wя╝Мф╜ЖхжВцЮЬщЩдхО╗щЗНхдНхРОя╝МхИЩф╕Нш╢Еш┐З 300w ф╕кя╝ЙуАВшп╖ч╗ЯшобцЬАчГнщЧичЪД 10 ф╕кцЯешпвф╕▓я╝МшжБц▒Вф╜┐чФичЪДхЖЕхнШф╕НшГ╜ш╢Еш┐З 1GуАВя╝Иф╕Аф╕кцЯешпвф╕▓чЪДщЗНхдНх║жш╢КщлШя╝Мшп┤цШОцЯешпвхоГчЪДчФицИ╖ш╢КхдЪя╝Мф╣Ях░▒ш╢КчГнщЧиуАВя╝Й</p> <h3 id="шзгчнФцАЭш╖п-2"><a href="#шзгчнФцАЭш╖п-2" class="header-anchor">#</a> шзгчнФцАЭш╖п</h3> <p>цпПф╕кцЯешпвф╕▓цЬАщХ┐ф╕║ 255Bя╝М1000w ф╕кф╕▓щЬАшжБхНачФи ч║ж 2.55G хЖЕхнШя╝МхЫацндя╝МцИСф╗мцЧац│Хх░ЖцЙАцЬЙхнЧчмжф╕▓хЕищГишп╗хЕехИ░хЖЕхнШф╕нхдДчРЖуАВ</p> <h4 id="цЦ╣ц│Хф╕А-хИЖц▓╗ц│Х-3"><a href="#цЦ╣ц│Хф╕А-хИЖц▓╗ц│Х-3" class="header-anchor">#</a> цЦ╣ц│Хф╕Ая╝ЪхИЖц▓╗ц│Х</h4> <p>хИЖц▓╗ц│Хф╛ЭчД╢цШпф╕Аф╕кщЭЮх╕╕хоЮчФичЪДцЦ╣ц│ХуАВ</p> <p>хИТхИЖф╕║хдЪф╕кх░ПцЦЗф╗╢я╝Мф┐ЭшпБхНХф╕кх░ПцЦЗф╗╢ф╕нчЪДхнЧчмжф╕▓шГ╜швлчЫ┤цОехКаш╜╜хИ░хЖЕхнШф╕нхдДчРЖя╝МчД╢хРОц▒ВхЗ║цпПф╕кцЦЗф╗╢ф╕нхЗ║чО░цмбцХ░цЬАхдЪчЪД 10 ф╕кхнЧчмжф╕▓я╝ЫцЬАхРОщАЪш┐Зф╕Аф╕кх░Пщб╢хаЖч╗ЯшобхЗ║цЙАцЬЙцЦЗф╗╢ф╕нхЗ║чО░цЬАхдЪчЪД 10 ф╕кхнЧчмжф╕▓уАВ</p> <p>цЦ╣ц│ХхПпшбМя╝Мф╜Жф╕НцШпцЬАхе╜я╝Мф╕ЛщЭвф╗Лч╗НхЕ╢ф╗ЦцЦ╣ц│ХуАВ</p> <h4 id="цЦ╣ц│Хф║М-hashmap-ц│Х"><a href="#цЦ╣ц│Хф║М-hashmap-ц│Х" class="header-anchor">#</a> цЦ╣ц│Хф║Мя╝ЪHashMap ц│Х</h4> <p>шЩ╜чД╢хнЧчмжф╕▓цА╗цХ░цпФш╛ГхдЪя╝Мф╜ЖхО╗щЗНхРОф╕Нш╢Еш┐З 300wя╝МхЫацндя╝МхПпф╗ешАГшЩСцККцЙАцЬЙхнЧчмжф╕▓хПКхЗ║чО░цмбцХ░ф┐ЭхнШхЬиф╕Аф╕к HashMap ф╕ня╝МцЙАхНачФичЪДчй║щЧ┤ф╕║ 300w*(255+4)тЙИ777Mя╝ИхЕ╢ф╕ня╝М4 шбичд║цХ┤цХ░хНачФичЪД 4 ф╕кхнЧшКВя╝ЙуАВчФ▒цндхПпшзБя╝М1G чЪДхЖЕхнШчй║щЧ┤хоМхЕихдЯчФиуАВ</p> <p><strong>цАЭш╖пхжВф╕Л</strong>я╝Ъ</p> <p>щжЦхЕИя╝МщБНхОЖхнЧчмжф╕▓я╝МшЛеф╕НхЬи map ф╕ня╝МчЫ┤цОехнШхЕе mapя╝Мvalue шо░ф╕║ 1я╝ЫшЛехЬи map ф╕ня╝МхИЩцККхп╣х║ФчЪД value хКа 1я╝Мш┐Щф╕АцнецЧ╢щЧ┤хдНцЭВх║ж <code>O(N)</code>уАВ</p> <p>цОечЭАщБНхОЖ mapя╝МцЮДх╗║ф╕Аф╕к 10 ф╕кхЕГч┤ачЪДх░Пщб╢хаЖя╝МшЛещБНхОЖхИ░чЪДхнЧчмжф╕▓чЪДхЗ║чО░цмбцХ░хдзф║ОхаЖщб╢хнЧчмжф╕▓чЪДхЗ║чО░цмбцХ░я╝МхИЩш┐ЫшбМцЫ┐цНвя╝Мх╣╢х░ЖхаЖш░ГцХ┤ф╕║х░Пщб╢хаЖуАВ</p> <p>щБНхОЖч╗УцЭЯхРОя╝МхаЖф╕н 10 ф╕кхнЧчмжф╕▓х░▒цШпхЗ║чО░цмбцХ░цЬАхдЪчЪДхнЧчмжф╕▓уАВш┐Щф╕АцнецЧ╢щЧ┤хдНцЭВх║ж <code>O(Nlog10)</code>уАВ</p> <h4 id="цЦ╣ц│Хф╕Й-хЙНч╝АцаСц│Х-хнЧхЕ╕цаС"><a href="#цЦ╣ц│Хф╕Й-хЙНч╝АцаСц│Х-хнЧхЕ╕цаС" class="header-anchor">#</a> цЦ╣ц│Хф╕Йя╝ЪхЙНч╝АцаСц│Хя╝ИхнЧхЕ╕цаСя╝Й</h4> <p>цЦ╣ц│Хф║Мф╜┐чФиф║Ж HashMap цЭеч╗ЯшобцмбцХ░я╝Мх╜Уш┐Щф║ЫхнЧчмжф╕▓цЬЙхдзщЗПчЫ╕хРМхЙНч╝АцЧ╢я╝МхПпф╗ешАГшЩСф╜┐чФихЙНч╝АцаСцЭеч╗ЯшобхнЧчмжф╕▓хЗ║чО░чЪДцмбцХ░я╝МцаСчЪДч╗УчВ╣ф┐ЭхнШхнЧчмжф╕▓хЗ║чО░цмбцХ░я╝М0 шбичд║ц▓бцЬЙхЗ║чО░уАВ</p> <p><strong>цАЭш╖пхжВф╕Л</strong>я╝Ъ</p> <p>хЬищБНхОЖхнЧчмжф╕▓цЧ╢я╝МхЬихЙНч╝АцаСф╕нцЯецЙ╛я╝МхжВцЮЬцЙ╛хИ░я╝МхИЩцККч╗УчВ╣ф╕нф┐ЭхнШчЪДхнЧчмжф╕▓цмбцХ░хКа 1я╝МхРжхИЩф╕║ш┐Щф╕кхнЧчмжф╕▓цЮДх╗║цЦ░ч╗УчВ╣я╝МцЮДх╗║хоМцИРхРОцККхП╢хнРч╗УчВ╣ф╕нхнЧчмжф╕▓чЪДхЗ║чО░цмбцХ░ч╜оф╕║ 1уАВ</p> <p>цЬАхРОф╛ЭчД╢ф╜┐чФих░Пщб╢хаЖцЭехп╣хнЧчмжф╕▓чЪДхЗ║чО░цмбцХ░ш┐ЫшбМцОТх║ПуАВ</p> <h3 id="цЦ╣ц│ХцА╗ч╗У-4"><a href="#цЦ╣ц│ХцА╗ч╗У-4" class="header-anchor">#</a> цЦ╣ц│ХцА╗ч╗У</h3> <p>хЙНч╝АцаСч╗Пх╕╕швлчФицЭеч╗ЯшобхнЧчмжф╕▓чЪДхЗ║чО░цмбцХ░уАВхоГчЪДхПжхдЦф╕Аф╕кхдзчЪДчФищАФцШпхнЧчмжф╕▓цЯецЙ╛я╝МхИдцЦнцШпхРжцЬЙщЗНхдНчЪДхнЧчмжф╕▓чнЙуАВ</p> <h2 id="хжВф╜Хч╗Яшобф╕НхРМчФ╡шпЭхП╖чаБчЪДф╕кцХ░"><a href="#хжВф╜Хч╗Яшобф╕НхРМчФ╡шпЭхП╖чаБчЪДф╕кцХ░" class="header-anchor">#</a> хжВф╜Хч╗Яшобф╕НхРМчФ╡шпЭхП╖чаБчЪДф╕кцХ░я╝Я</h2> <h3 id="щвШчЫоцППш┐░-3"><a href="#щвШчЫоцППш┐░-3" class="header-anchor">#</a> щвШчЫоцППш┐░</h3> <p>х╖▓чЯецЯРф╕кцЦЗф╗╢хЖЕхМЕхРлф╕Аф║ЫчФ╡шпЭхП╖чаБя╝МцпПф╕кхП╖чаБф╕║ 8 ф╜НцХ░хнЧя╝Мч╗Яшобф╕НхРМхП╖чаБчЪДф╕кцХ░уАВ</p> <h3 id="шзгчнФцАЭш╖п-3"><a href="#шзгчнФцАЭш╖п-3" class="header-anchor">#</a> шзгчнФцАЭш╖п</h3> <p>ш┐ЩщБУщвШцЬмш┤иш┐ШцШпц▒Вшзг<strong>цХ░цНощЗНхдН</strong>чЪДщЧощвШя╝Мхп╣ф║Ош┐Щч▒╗щЧощвШя╝Мф╕АшИмщжЦхЕИшАГшЩСф╜НхЫ╛ц│ХуАВ</p> <p>хп╣ф║ОцЬмщвШя╝М8 ф╜НчФ╡шпЭхП╖чаБхПпф╗ешбичд║чЪДхП╖чаБф╕кцХ░ф╕║ $$10^8$$ ф╕кя╝МхН│ 1 ф║┐ф╕куАВцИСф╗мцпПф╕кхП╖чаБчФиф╕Аф╕к bit цЭешбичд║я╝МхИЩцА╗хЕ▒щЬАшжБ 1 ф║┐ф╕к bitя╝МхЖЕхнШхНачФич║ж 100MуАВ</p> <p><strong>цАЭш╖пхжВф╕Л</strong>я╝Ъ</p> <p>чФ│шп╖ф╕Аф╕кф╜НхЫ╛цХ░ч╗Дя╝МщХ┐х║жф╕║ 1 ф║┐я╝МхИЭхзЛхМЦф╕║ 0уАВчД╢хРОщБНхОЖцЙАцЬЙчФ╡шпЭхП╖чаБя╝МцККхП╖чаБхп╣х║ФчЪДф╜НхЫ╛ф╕нчЪДф╜Нч╜оч╜оф╕║ 1уАВщБНхОЖхоМцИРхРОя╝МхжВцЮЬ bit ф╕║ 1я╝МхИЩшбичд║ш┐Щф╕кчФ╡шпЭхП╖чаБхЬицЦЗф╗╢ф╕нхнШхЬия╝МхРжхИЩф╕НхнШхЬиуАВbit хА╝ф╕║ 1 чЪДцХ░щЗПхН│ф╕║ ф╕НхРМчФ╡шпЭхП╖чаБчЪДф╕кцХ░уАВ</p> <h3 id="цЦ╣ц│ХцА╗ч╗У-5"><a href="#цЦ╣ц│ХцА╗ч╗У-5" class="header-anchor">#</a> цЦ╣ц│ХцА╗ч╗У</h3> <p>ц▒ВшзгцХ░цНощЗНхдНщЧощвШя╝Мшо░х╛ЧшАГшЩСф╜НхЫ╛ц│ХуАВ</p> <h2 id="хжВф╜Хф╗О-5-ф║┐ф╕кцХ░ф╕нцЙ╛хЗ║ф╕нф╜НцХ░"><a href="#хжВф╜Хф╗О-5-ф║┐ф╕кцХ░ф╕нцЙ╛хЗ║ф╕нф╜НцХ░" class="header-anchor">#</a> хжВф╜Хф╗О 5 ф║┐ф╕кцХ░ф╕нцЙ╛хЗ║ф╕нф╜НцХ░я╝Я</h2> <h3 id="щвШчЫоцППш┐░-4"><a href="#щвШчЫоцППш┐░-4" class="header-anchor">#</a> щвШчЫоцППш┐░</h3> <p>ф╗О 5 ф║┐ф╕кцХ░ф╕нцЙ╛хЗ║ф╕нф╜НцХ░уАВцХ░цНоцОТх║ПхРОя╝Мф╜Нч╜охЬицЬАф╕нщЧ┤чЪДцХ░х░▒цШпф╕нф╜НцХ░уАВх╜Уца╖цЬмцХ░ф╕║хеЗцХ░цЧ╢я╝Мф╕нф╜НцХ░ф╕║ чмм <code>(N+1)/2</code> ф╕кцХ░я╝Ых╜Уца╖цЬмцХ░ф╕║хБ╢цХ░цЧ╢я╝Мф╕нф╜НцХ░ф╕║ чмм <code>N/2</code> ф╕кцХ░ф╕Очмм <code>1+N/2</code> ф╕кцХ░чЪДхЭЗхА╝уАВ</p> <h3 id="шзгчнФцАЭш╖п-4"><a href="#шзгчнФцАЭш╖п-4" class="header-anchor">#</a> шзгчнФцАЭш╖п</h3> <p>хжВцЮЬш┐ЩщБУщвШц▓бцЬЙхЖЕхнШхдзх░ПщЩРхИ╢я╝МхИЩхПпф╗ецККцЙАцЬЙцХ░шп╗хИ░хЖЕхнШф╕нцОТх║ПхРОцЙ╛хЗ║ф╕нф╜НцХ░уАВф╜ЖцШпцЬАхе╜чЪДцОТх║ПчоЧц│ХчЪДцЧ╢щЧ┤хдНцЭВх║жщГ╜ф╕║ <code>O(NlogN)</code>уАВш┐ЩщЗМф╜┐чФихЕ╢ф╗ЦцЦ╣ц│ХуАВ</p> <h4 id="цЦ╣ц│Хф╕А-хПМхаЖц│Х"><a href="#цЦ╣ц│Хф╕А-хПМхаЖц│Х" class="header-anchor">#</a> цЦ╣ц│Хф╕Ая╝ЪхПМхаЖц│Х</h4> <p>ч╗┤цКдф╕дф╕кхаЖя╝Мф╕Аф╕кхдзщб╢хаЖя╝Мф╕Аф╕кх░Пщб╢хаЖуАВхдзщб╢хаЖф╕нцЬАхдзчЪДцХ░<strong>х░Пф║ОчнЙф║О</strong>х░Пщб╢хаЖф╕нцЬАх░ПчЪДцХ░я╝Ыф┐ЭшпБш┐Щф╕дф╕кхаЖф╕нчЪДхЕГч┤аф╕кцХ░чЪДх╖оф╕Нш╢Еш┐З 1уАВ</p> <p>шЛецХ░цНоцА╗цХ░ф╕║<strong>хБ╢цХ░</strong>я╝Мх╜Уш┐Щф╕дф╕кхаЖх╗║хе╜ф╣ЛхРОя╝М<strong>ф╕нф╜НцХ░х░▒цШпш┐Щф╕дф╕кхаЖщб╢хЕГч┤ачЪДх╣│хЭЗхА╝</strong>уАВх╜УцХ░цНоцА╗цХ░ф╕║<strong>хеЗцХ░</strong>цЧ╢я╝Мца╣цНоф╕дф╕кхаЖчЪДхдзх░Пя╝М<strong>ф╕нф╜НцХ░ф╕АхоЪхЬицХ░цНохдЪчЪДхаЖчЪДхаЖщб╢</strong>уАВ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">MedianFinder</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> maxHeap<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> minHeap<span class="token punctuation">;</span>

    <span class="token comment">/** initialize your data structure here. */</span>
    <span class="token keyword">public</span> <span class="token class-name">MedianFinder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        maxHeap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">reverseOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        minHeap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">compareTo</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addNum</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>maxHeap<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> maxHeap<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            maxHeap<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            minHeap<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">int</span> size1 <span class="token operator">=</span> maxHeap<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> size2 <span class="token operator">=</span> minHeap<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>size1 <span class="token operator">-</span> size2 <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            minHeap<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>maxHeap<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>size2 <span class="token operator">-</span> size1 <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            maxHeap<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>minHeap<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">findMedian</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> size1 <span class="token operator">=</span> maxHeap<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> size2 <span class="token operator">=</span> minHeap<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> size1 <span class="token operator">==</span> size2
            <span class="token operator">?</span> <span class="token punctuation">(</span>maxHeap<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> minHeap<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1.0</span> <span class="token operator">/</span> <span class="token number">2</span>
            <span class="token operator">:</span> <span class="token punctuation">(</span>size1 <span class="token operator">&gt;</span> size2 <span class="token operator">?</span> maxHeap<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> minHeap<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>шзБ LeetCode No.295я╝Ъhttps://leetcode.com/problems/find-median-from-data-stream/</p></blockquote> <p>ф╗еф╕Кш┐ЩчзНцЦ╣ц│Хя╝МщЬАшжБцККцЙАцЬЙцХ░цНощГ╜хКаш╜╜хИ░хЖЕхнШф╕нуАВх╜УцХ░цНощЗПх╛ИхдзцЧ╢я╝Мх░▒ф╕НшГ╜ш┐Щца╖ф║Жя╝МхЫацндя╝Мш┐ЩчзНцЦ╣ц│Х<strong>щАВчФиф║ОцХ░цНощЗПш╛Гх░ПчЪДцГЕхЖ╡</strong>уАВ5 ф║┐ф╕кцХ░я╝МцпПф╕кцХ░хнЧхНачФи 4Bя╝МцА╗хЕ▒щЬАшжБ 2G хЖЕхнШуАВхжВцЮЬхПпчФихЖЕхнШф╕Нш╢│ 2Gя╝Мх░▒ф╕НшГ╜ф╜┐чФиш┐ЩчзНцЦ╣ц│Хф║Жя╝Мф╕ЛщЭвф╗Лч╗НхПжф╕АчзНцЦ╣ц│ХуАВ</p> <h4 id="цЦ╣ц│Хф║М-хИЖц▓╗ц│Х"><a href="#цЦ╣ц│Хф║М-хИЖц▓╗ц│Х" class="header-anchor">#</a> цЦ╣ц│Хф║Мя╝ЪхИЖц▓╗ц│Х</h4> <p>хИЖц▓╗ц│ХчЪДцАЭцГ│цШпцККф╕Аф╕кхдзчЪДщЧощвШщАРц╕Рш╜мцНвф╕║шзДцибш╛Гх░ПчЪДщЧощвШцЭец▒ВшзгуАВ</p> <p>хп╣ф║Ош┐ЩщБУщвШя╝Мщб║х║Пшп╗хПЦш┐Щ 5 ф║┐ф╕кцХ░хнЧя╝Мхп╣ф║Ошп╗хПЦхИ░чЪДцХ░хнЧ numя╝МхжВцЮЬхоГхп╣х║ФчЪДф║Мш┐ЫхИ╢ф╕нцЬАщлШф╜Нф╕║ 1я╝МхИЩцККш┐Щф╕кцХ░хнЧхЖЩхИ░ f1 ф╕ня╝МхРжхИЩхЖЩхЕе f0 ф╕нуАВщАЪш┐Зш┐Щф╕Ацнея╝МхПпф╗ецККш┐Щ 5 ф║┐ф╕кцХ░хИТхИЖф╕║ф╕дщГихИЖя╝МшАМф╕Ф f0 ф╕нчЪДцХ░щГ╜хдзф║О f1 ф╕нчЪДцХ░я╝ИцЬАщлШф╜НцШпчмжхП╖ф╜Ня╝ЙуАВ</p> <p>хИТхИЖф╣ЛхРОя╝МхПпф╗ещЭЮх╕╕хо╣цШУхЬ░чЯещБУф╕нф╜НцХ░цШпхЬи f0 ш┐ШцШп f1 ф╕нуАВхБЗшо╛ f1 ф╕нцЬЙ 1 ф║┐ф╕кцХ░я╝МщВгф╣Иф╕нф╜НцХ░ф╕АхоЪхЬи f0 ф╕ня╝Мф╕ФцШпхЬи f0 ф╕ня╝Мф╗Ох░ПхИ░хдзцОТхИЧчЪДчмм 1.5 ф║┐ф╕кцХ░ф╕ОхоГхРОщЭвчЪДф╕Аф╕кцХ░чЪДх╣│хЭЗхА╝уАВ</p> <blockquote><p><strong>цПРчд║</strong>я╝М5 ф║┐цХ░чЪДф╕нф╜НцХ░цШпчмм 2.5 ф║┐ф╕ОхП│ш╛╣чЫ╕щВ╗ф╕Аф╕кцХ░ц▒Вх╣│хЭЗхА╝уАВшЛе f1 цЬЙф╕Аф║┐ф╕кцХ░я╝МщВгф╣Иф╕нф╜НцХ░х░▒цШп f0 ф╕нф╗Очмм 1.5 ф║┐ф╕кцХ░х╝АхзЛчЪДф╕дф╕кцХ░ц▒Вх╛ЧчЪДх╣│хЭЗхА╝уАВ</p></blockquote> <p>хп╣ф║О f0 хПпф╗ечФицмбщлШф╜НчЪДф║Мш┐ЫхИ╢ч╗зч╗нх░ЖцЦЗф╗╢ф╕АхИЖф╕║ф║Мя╝МхжВцндхИТхИЖф╕ЛхО╗я╝МчЫ┤хИ░хИТхИЖхРОчЪДцЦЗф╗╢хПпф╗ешвлхКаш╜╜хИ░хЖЕхнШф╕ня╝МцККцХ░цНохКаш╜╜хИ░хЖЕхнШф╕нф╗ехРОчЫ┤цОецОТх║Пя╝МцЙ╛хЗ║ф╕нф╜НцХ░уАВ</p> <blockquote><p><strong>ц│ицДП</strong>я╝Мх╜УцХ░цНоцА╗цХ░ф╕║хБ╢цХ░я╝МхжВцЮЬхИТхИЖхРОф╕дф╕кцЦЗф╗╢ф╕нчЪДцХ░цНоцЬЙчЫ╕хРМф╕кцХ░я╝МщВгф╣Иф╕нф╜НцХ░х░▒цШпцХ░цНош╛Гх░ПчЪДцЦЗф╗╢ф╕нчЪДцЬАхдзхА╝ф╕ОцХ░цНош╛ГхдзчЪДцЦЗф╗╢ф╕нчЪДцЬАх░ПхА╝чЪДх╣│хЭЗхА╝уАВ</p></blockquote> <h3 id="цЦ╣ц│ХцА╗ч╗У-6"><a href="#цЦ╣ц│ХцА╗ч╗У-6" class="header-anchor">#</a> цЦ╣ц│ХцА╗ч╗У</h3> <p>хИЖц▓╗ц│Хя╝МчЬЯщжЩя╝Б</p> <h2 id="хжВф╜ХцЙ╛хЗ║цОТхРНхЙН-500-чЪДцХ░"><a href="#хжВф╜ХцЙ╛хЗ║цОТхРНхЙН-500-чЪДцХ░" class="header-anchor">#</a> хжВф╜ХцЙ╛хЗ║цОТхРНхЙН 500 чЪДцХ░я╝Я</h2> <h3 id="щвШчЫоцППш┐░-5"><a href="#щвШчЫоцППш┐░-5" class="header-anchor">#</a> щвШчЫоцППш┐░</h3> <p>цЬЙ 20 ф╕кцХ░ч╗Дя╝МцпПф╕кцХ░ч╗ДцЬЙ 500 ф╕кхЕГч┤ая╝Мх╣╢ф╕ФцЬЙх║ПцОТхИЧуАВхжВф╜ХхЬиш┐Щ 20*500 ф╕кцХ░ф╕нцЙ╛хЗ║хЙН 500 чЪДцХ░я╝Я</p> <h3 id="шзгчнФцАЭш╖п-5"><a href="#шзгчнФцАЭш╖п-5" class="header-anchor">#</a> шзгчнФцАЭш╖п</h3> <p>хп╣ф║О TopK щЧощвШя╝МцЬАх╕╕чФичЪДцЦ╣ц│ХцШпф╜┐чФихаЖцОТх║ПуАВхп╣цЬмщвШшАМшиАя╝МхБЗшо╛цХ░ч╗ДщЩНх║ПцОТхИЧя╝МхПпф╗ещЗЗчФиф╗еф╕ЛцЦ╣ц│Хя╝Ъ</p> <p>щжЦхЕИх╗║члЛхдзщб╢хаЖя╝МхаЖчЪДхдзх░Пф╕║цХ░ч╗ДчЪДф╕кцХ░я╝МхН│ф╕║ 20я╝МцККцпПф╕кцХ░ч╗ДцЬАхдзчЪДхА╝хнШхИ░хаЖф╕нуАВ</p> <p>цОечЭАхИащЩдхаЖщб╢хЕГч┤ая╝Мф┐ЭхнШхИ░хПжф╕Аф╕кхдзх░Пф╕║ 500 чЪДцХ░ч╗Дф╕ня╝МчД╢хРОхРСхдзщб╢хаЖцПТхЕехИащЩдчЪДхЕГч┤ацЙАхЬицХ░ч╗ДчЪДф╕Лф╕Аф╕кхЕГч┤ауАВ</p> <p>щЗНхдНф╕КщЭвчЪДцнещкдя╝МчЫ┤хИ░хИащЩдхоМчмм 500 ф╕кхЕГч┤ая╝Мф╣ЯхН│цЙ╛хЗ║ф║ЖцЬАхдзчЪДхЙН 500 ф╕кцХ░уАВ</p> <blockquote><p>ф╕║ф║ЖхЬихаЖф╕нхПЦхЗ║ф╕Аф╕кцХ░цНохРОя╝МшГ╜чЯещБУхоГцШпф╗ОхУкф╕кцХ░ч╗Дф╕нхПЦхЗ║чЪДя╝Мф╗ОшАМхПпф╗еф╗Ош┐Щф╕кцХ░ч╗Дф╕нхПЦф╕Лф╕Аф╕кхА╝я╝МхПпф╗ецККцХ░ч╗ДчЪДцМЗщТИхнШцФ╛хИ░хаЖф╕ня╝Мхп╣ш┐Щф╕кцМЗщТИцПРф╛ЫцпФш╛Гхдзх░ПчЪДцЦ╣ц│ХуАВ</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">PriorityQueue</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author https://github.com/yanglbme
 */</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataWithSource</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DataWithSource</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * цХ░хА╝
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span>

    <span class="token comment">/**
     * шо░х╜ХцХ░хА╝цЭец║РчЪДцХ░ч╗Д
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> source<span class="token punctuation">;</span>

    <span class="token comment">/**
     * шо░х╜ХцХ░хА╝хЬицХ░ч╗Дф╕нчЪДч┤вх╝Х
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> index<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">DataWithSource</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">,</span> <span class="token keyword">int</span> source<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>source <span class="token operator">=</span> source<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>index <span class="token operator">=</span> index<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     *
     * чФ▒ф║О PriorityQueue ф╜┐чФих░Пщб╢хаЖцЭехоЮчО░я╝Мш┐ЩщЗМщАЪш┐Зф┐оцФ╣
     * ф╕дф╕кцХ┤цХ░чЪДцпФш╛ГщА╗ш╛СцЭешой PriorityQueue хПШцИРхдзщб╢хаЖ
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">DataWithSource</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getTop</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> rowSize <span class="token operator">=</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">int</span> columnSize <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>

        <span class="token comment">// хИЫх╗║ф╕Аф╕кcolumnSizeхдзх░ПчЪДцХ░ч╗Дя╝МхнШцФ╛ч╗УцЮЬ</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>columnSize<span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DataWithSource</span><span class="token punctuation">&gt;</span></span> maxHeap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> rowSize<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// х░ЖцпПф╕кцХ░ч╗ДчЪДцЬАхдзф╕Аф╕кхЕГч┤ацФ╛хЕехаЖф╕н</span>
            <span class="token class-name">DataWithSource</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataWithSource</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            maxHeap<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>num <span class="token operator">&lt;</span> columnSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// хИащЩдхаЖщб╢хЕГч┤а</span>
            <span class="token class-name">DataWithSource</span> d <span class="token operator">=</span> maxHeap<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            result<span class="token punctuation">[</span>num<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&gt;=</span> columnSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            d<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token function">getSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span>d<span class="token punctuation">.</span><span class="token function">getIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            d<span class="token punctuation">.</span><span class="token function">setIndex</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span><span class="token function">getIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            maxHeap<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token punctuation">{</span><span class="token number">29</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span><span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> top <span class="token operator">=</span> <span class="token function">getTop</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>top<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [30, 29, 25, 20, 19]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="цЦ╣ц│ХцА╗ч╗У-7"><a href="#цЦ╣ц│ХцА╗ч╗У-7" class="header-anchor">#</a> цЦ╣ц│ХцА╗ч╗У</h3> <p>ц▒В TopKя╝Мф╕НхжишАГшЩСф╕Аф╕ЛхаЖцОТх║Пя╝Я</p> <h2 id="хжВф╜ХцМЙчЕз-query-чЪДщвСх║жцОТх║П"><a href="#хжВф╜ХцМЙчЕз-query-чЪДщвСх║жцОТх║П" class="header-anchor">#</a> хжВф╜ХцМЙчЕз query чЪДщвСх║жцОТх║Пя╝Я</h2> <h3 id="щвШчЫоцППш┐░-6"><a href="#щвШчЫоцППш┐░-6" class="header-anchor">#</a> щвШчЫоцППш┐░</h3> <p>цЬЙ 10 ф╕кцЦЗф╗╢я╝МцпПф╕кцЦЗф╗╢хдзх░Пф╕║ 1Gя╝МцпПф╕кцЦЗф╗╢чЪДцпПф╕АшбМхнШцФ╛чЪДщГ╜цШпчФицИ╖чЪД queryя╝МцпПф╕кцЦЗф╗╢чЪД query щГ╜хПпшГ╜щЗНхдНуАВшжБц▒ВцМЙчЕз query чЪДщвСх║жцОТх║ПуАВ</p> <h3 id="шзгчнФцАЭш╖п-6"><a href="#шзгчнФцАЭш╖п-6" class="header-anchor">#</a> шзгчнФцАЭш╖п</h3> <p>хжВцЮЬ query чЪДщЗНхдНх║жцпФш╛Гхдзя╝МхПпф╗ешАГшЩСф╕АцмбцАзцККцЙАцЬЙ query шп╗хЕехЖЕхнШф╕нхдДчРЖя╝ЫхжВцЮЬ query чЪДщЗНхдНчОЗф╕НщлШя╝МщВгф╣ИхПпчФихЖЕхнШф╕Нш╢│ф╗ехо╣ч║│цЙАцЬЙчЪД queryя╝Мш┐ЩцЧ╢хАЩх░▒щЬАшжБщЗЗчФихИЖц▓╗ц│ХцИЦхЕ╢ф╗ЦчЪДцЦ╣ц│ХцЭешзгхЖ│уАВ</p> <h4 id="цЦ╣ц│Хф╕А-hashmap-ц│Х"><a href="#цЦ╣ц│Хф╕А-hashmap-ц│Х" class="header-anchor">#</a> цЦ╣ц│Хф╕Ая╝ЪHashMap ц│Х</h4> <p>хжВцЮЬ query щЗНхдНчОЗщлШя╝Мшп┤цШОф╕НхРМ query цА╗цХ░цпФш╛Гх░Пя╝МхПпф╗ешАГшЩСцККцЙАцЬЙчЪД query щГ╜хКаш╜╜хИ░хЖЕхнШф╕нчЪД HashMap ф╕нуАВцОечЭАх░▒хПпф╗ецМЙчЕз query хЗ║чО░чЪДцмбцХ░ш┐ЫшбМцОТх║ПуАВ</p> <h4 id="цЦ╣ц│Хф║М-хИЖц▓╗ц│Х-2"><a href="#цЦ╣ц│Хф║М-хИЖц▓╗ц│Х-2" class="header-anchor">#</a> цЦ╣ц│Хф║Мя╝ЪхИЖц▓╗ц│Х</h4> <p>хИЖц▓╗ц│ХщЬАшжБца╣цНоцХ░цНощЗПхдзх░Пф╗ехПКхПпчФихЖЕхнШчЪДхдзх░ПцЭечбохоЪщЧощвШхИТхИЖчЪДшзДцибуАВхп╣ф║Ош┐ЩщБУщвШя╝МхПпф╗ещб║х║ПщБНхОЖ 10 ф╕кцЦЗф╗╢ф╕нчЪД queryя╝МщАЪш┐З Hash хЗ╜цХ░ <code>hash(query) % 10</code> цККш┐Щф║Ы query хИТхИЖхИ░ 10 ф╕кх░ПцЦЗф╗╢ф╕нуАВф╣ЛхРОхп╣цпПф╕кх░ПцЦЗф╗╢ф╜┐чФи HashMap ч╗Яшоб query хЗ║чО░цмбцХ░я╝Мца╣цНоцмбцХ░цОТх║Пх╣╢хЖЩхЕехИ░щЫ╢хдЦф╕Аф╕кхНХчЛмцЦЗф╗╢ф╕нуАВ</p> <p>цОечЭАхп╣цЙАцЬЙцЦЗф╗╢цМЙчЕз query чЪДцмбцХ░ш┐ЫшбМцОТх║Пя╝Мш┐ЩщЗМхПпф╗еф╜┐чФих╜Тх╣╢цОТх║Пя╝ИчФ▒ф║ОцЧац│ХцККцЙАцЬЙ query щГ╜шп╗хЕехЖЕхнШя╝МхЫацндщЬАшжБф╜┐чФихдЦцОТх║Пя╝ЙуАВ</p> <h3 id="цЦ╣ц│ХцА╗ч╗У-8"><a href="#цЦ╣ц│ХцА╗ч╗У-8" class="header-anchor">#</a> цЦ╣ц│ХцА╗ч╗У</h3> <ul><li>хЖЕхнШшЛехдЯя╝МчЫ┤цОешп╗хЕеш┐ЫшбМцОТх║Пя╝Ы</li> <li>хЖЕхнШф╕НхдЯя╝МхЕИхИТхИЖф╕║х░ПцЦЗф╗╢я╝Мх░ПцЦЗф╗╢цОТхе╜х║ПхРОя╝МцХ┤чРЖф╜┐чФихдЦцОТх║Пш┐ЫшбМх╜Тх╣╢уАВ</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/design/edit/master/docs/solutions/ц╡╖щЗПцХ░цНохдДчРЖ.md" target="_blank" rel="noopener noreferrer">х╕охКйцИСф╗мцФ╣хЦДцндщб╡щЭвя╝Б</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">ф╕КцмбцЫ┤цЦ░:</span> <span class="time">12 days ago</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/design/assets/js/app.31535b90.js" defer></script><script src="/design/assets/js/4.843d76c1.js" defer></script><script src="/design/assets/js/79.09f8c9ad.js" defer></script><script src="/design/assets/js/5.eb6f8f38.js" defer></script>
  </body>
</html>
